/*! For license information please see ore-three-ts.min.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("three")):"function"==typeof define&&define.amd?define(["three"],t):"object"==typeof exports?exports.ORE=t(require("three")):e.ORE=t(e.THREE)}(self,(function(e){return(()=>{var t={714:function(e,t){(function(){(null!==t?t:this).Lethargy=function(){function e(e,t,i,n){this.stability=null!=e?Math.abs(e):8,this.sensitivity=null!=t?1+Math.abs(t):100,this.tolerance=null!=i?1+Math.abs(i):1.1,this.delay=null!=n?n:150,this.lastUpDeltas=function(){var e,t,i;for(i=[],e=1,t=2*this.stability;1<=t?e<=t:e>=t;1<=t?e++:e--)i.push(null);return i}.call(this),this.lastDownDeltas=function(){var e,t,i;for(i=[],e=1,t=2*this.stability;1<=t?e<=t:e>=t;1<=t?e++:e--)i.push(null);return i}.call(this),this.deltasTimestamp=function(){var e,t,i;for(i=[],e=1,t=2*this.stability;1<=t?e<=t:e>=t;1<=t?e++:e--)i.push(null);return i}.call(this)}return e.prototype.check=function(e){var t;return null!=(e=e.originalEvent||e).wheelDelta?t=e.wheelDelta:null!=e.deltaY?t=-40*e.deltaY:null==e.detail&&0!==e.detail||(t=-40*e.detail),this.deltasTimestamp.push(Date.now()),this.deltasTimestamp.shift(),t>0?(this.lastUpDeltas.push(t),this.lastUpDeltas.shift(),this.isInertia(1)):(this.lastDownDeltas.push(t),this.lastDownDeltas.shift(),this.isInertia(-1))},e.prototype.isInertia=function(e){var t,i,n,s,r,o,a;return null===(t=-1===e?this.lastDownDeltas:this.lastUpDeltas)[0]?e:!(this.deltasTimestamp[2*this.stability-2]+this.delay>Date.now()&&t[0]===t[2*this.stability-1])&&(n=t.slice(0,this.stability),i=t.slice(this.stability,2*this.stability),a=n.reduce((function(e,t){return e+t})),r=i.reduce((function(e,t){return e+t})),o=a/n.length,s=r/i.length,Math.abs(o)<Math.abs(s*this.tolerance)&&this.sensitivity<Math.abs(s)&&e)},e.prototype.showLastUpDeltas=function(){return this.lastUpDeltas},e.prototype.showLastDownDeltas=function(){return this.lastDownDeltas},e}()}).call(this)},885:e=>{e.exports=function(e,t){t||(t=[0,""]),e=String(e);var i=parseFloat(e,10);return t[0]=i,t[1]=e.match(/[\d.\-\+]*\s*(.*)/)[1]||"",t}},810:(e,t,i)=>{"use strict";var n=i(885);e.exports=a;var s=o("in",document.body);function r(e,t){var i=n(getComputedStyle(e).getPropertyValue(t));return i[0]*a(i[1],e)}function o(e,t){var i=document.createElement("div");i.style.height="128"+e,t.appendChild(i);var n=r(i,"height")/128;return t.removeChild(i),n}function a(e,t){if(!e)return null;switch(t=t||document.body,e=(e+""||"px").trim().toLowerCase(),t!==window&&t!==document||(t=document.body),e){case"%":return t.clientHeight/100;case"ch":case"ex":return o(e,t);case"em":return r(t,"font-size");case"rem":return r(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return s;case"cm":return s/2.54;case"mm":return s/25.4;case"pt":return s/72;case"pc":return s/6;case"px":return 1}var i=n(e);if(!isNaN(i[0])&&i[1]){var l=a(i[1],t);return"number"==typeof l?i[0]*l:null}return null}},795:function(e,t,i){var n;!function(t){"use strict";function s(){}var r=s.prototype,o=t.EventEmitter;function a(e,t){for(var i=e.length;i--;)if(e[i].listener===t)return i;return-1}function l(e){return function(){return this[e].apply(this,arguments)}}function h(e){return"function"==typeof e||e instanceof RegExp||!(!e||"object"!=typeof e)&&h(e.listener)}r.getListeners=function(e){var t,i,n=this._getEvents();if(e instanceof RegExp)for(i in t={},n)n.hasOwnProperty(i)&&e.test(i)&&(t[i]=n[i]);else t=n[e]||(n[e]=[]);return t},r.flattenListeners=function(e){var t,i=[];for(t=0;t<e.length;t+=1)i.push(e[t].listener);return i},r.getListenersAsObject=function(e){var t,i=this.getListeners(e);return i instanceof Array&&((t={})[e]=i),t||i},r.addListener=function(e,t){if(!h(t))throw new TypeError("listener must be a function");var i,n=this.getListenersAsObject(e),s="object"==typeof t;for(i in n)n.hasOwnProperty(i)&&-1===a(n[i],t)&&n[i].push(s?t:{listener:t,once:!1});return this},r.on=l("addListener"),r.addOnceListener=function(e,t){return this.addListener(e,{listener:t,once:!0})},r.once=l("addOnceListener"),r.defineEvent=function(e){return this.getListeners(e),this},r.defineEvents=function(e){for(var t=0;t<e.length;t+=1)this.defineEvent(e[t]);return this},r.removeListener=function(e,t){var i,n,s=this.getListenersAsObject(e);for(n in s)s.hasOwnProperty(n)&&-1!==(i=a(s[n],t))&&s[n].splice(i,1);return this},r.off=l("removeListener"),r.addListeners=function(e,t){return this.manipulateListeners(!1,e,t)},r.removeListeners=function(e,t){return this.manipulateListeners(!0,e,t)},r.manipulateListeners=function(e,t,i){var n,s,r=e?this.removeListener:this.addListener,o=e?this.removeListeners:this.addListeners;if("object"!=typeof t||t instanceof RegExp)for(n=i.length;n--;)r.call(this,t,i[n]);else for(n in t)t.hasOwnProperty(n)&&(s=t[n])&&("function"==typeof s?r.call(this,n,s):o.call(this,n,s));return this},r.removeEvent=function(e){var t,i=typeof e,n=this._getEvents();if("string"===i)delete n[e];else if(e instanceof RegExp)for(t in n)n.hasOwnProperty(t)&&e.test(t)&&delete n[t];else delete this._events;return this},r.removeAllListeners=l("removeEvent"),r.emitEvent=function(e,t){var i,n,s,r,o=this.getListenersAsObject(e);for(r in o)if(o.hasOwnProperty(r))for(i=o[r].slice(0),s=0;s<i.length;s++)!0===(n=i[s]).once&&this.removeListener(e,n.listener),n.listener.apply(this,t||[])===this._getOnceReturnValue()&&this.removeListener(e,n.listener);return this},r.trigger=l("emitEvent"),r.emit=function(e){var t=Array.prototype.slice.call(arguments,1);return this.emitEvent(e,t)},r.setOnceReturnValue=function(e){return this._onceReturnValue=e,this},r._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue},r._getEvents=function(){return this._events||(this._events={})},s.noConflict=function(){return t.EventEmitter=o,s},void 0===(n=function(){return s}.call(t,i,t,e))||(e.exports=n)}("undefined"!=typeof window?window:this||{})},381:t=>{"use strict";t.exports=e},147:e=>{"use strict";e.exports={i8:"2.2.0"}}},i={};function n(e){var s=i[e];if(void 0!==s)return s.exports;var r=i[e]={exports:{}};return t[e].call(r.exports,r,r.exports,n),r.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var s={};return(()=>{"use strict";n.r(s),n.d(s,{Animator:()=>u,Background:()=>p,BaseLayer:()=>t,BlenderConnector:()=>E,Controller:()=>a,DOMMesh:()=>S,Easings:()=>h,EventDispatcher:()=>b,GPUComputationController:()=>x,LayoutController:()=>V,Lerps:()=>c,MouseRotator:()=>P,PageScroller:()=>T,PageScrollerSection:()=>L,Pointer:()=>o,PostProcessing:()=>A,TimelineAnimator:()=>_,UniformsLib:()=>d,WaitMan:()=>R});var e=n(381);class t extends e.EventDispatcher{constructor(){super(),this.readyAnimate=!1,this.time=0,this.info={name:"",aspectSetting:{mainAspect:16/9,wideAspect:10,portraitAspect:.5},size:{windowSize:new e.Vector2,windowAspectRatio:1,canvasSize:new e.Vector2,canvasPixelSize:new e.Vector2,canvasAspectRatio:1,pixelRatio:window.devicePixelRatio,portraitWeight:0,wideWeight:0}},this.commonUniforms={time:{value:0}},this.scene=new e.Scene,this.camera=new e.PerspectiveCamera(50,1,.1,1e3)}tick(e){this.time+=e,this.commonUniforms.time.value=this.time,this.readyAnimate&&this.animate(e)}animate(e){}onBind(t){this.info.name=t.name,this.info.canvas=t.canvas,t.wrapperElement&&this.setWrapperElement(t.wrapperElement||null,!1),this.info.aspectSetting=t.aspectSetting||this.info.aspectSetting,this.info.alpha=t.alpha,this.info.size.pixelRatio=t.pixelRatio||this.info.size.pixelRatio,this.renderer=new e.WebGLRenderer(this.info),this.renderer.setPixelRatio(this.info.size.pixelRatio),this.renderer.debug.checkShaderErrors=!0,setTimeout((()=>{this.onResize(),this.readyAnimate=!0}),0)}onUnbind(){this.removeChildrens(this.scene),this.readyAnimate=!1}removeChildrens(e){for(let t=e.children.length-1;t>=0;t--){let i,n;this.removeChildrens(e.children[t]),e.children[t].isMesh&&(i=e.children[t].geometry,n=e.children[t].material),e.remove(e.children[t]),i&&i.dispose(),n&&n.dispose()}}setWrapperElement(e,t=!0){this.info.wrapperElement=e,this.info.wrapperElementRect=e?e.getBoundingClientRect():null,t&&this.onResize()}onResize(){if(null==this.renderer)return;const t=new e.Vector2(window.innerWidth,window.innerHeight),i=new e.Vector2;this.info.wrapperElement?i.set(this.info.wrapperElement.clientWidth,this.info.wrapperElement.clientHeight):i.copy(t);let n=1-(i.x/i.y-this.info.aspectSetting.portraitAspect)/(this.info.aspectSetting.mainAspect-this.info.aspectSetting.portraitAspect);n=Math.min(1,Math.max(0,n));let s=1-(i.x/i.y-this.info.aspectSetting.wideAspect)/(this.info.aspectSetting.mainAspect-this.info.aspectSetting.wideAspect);s=Math.min(1,Math.max(0,s)),this.info.size.windowSize.copy(t),this.info.size.windowAspectRatio=t.x/t.y,this.info.size.canvasSize.copy(i),this.info.size.canvasPixelSize.copy(i.clone().multiplyScalar(this.renderer.getPixelRatio())),this.info.size.canvasAspectRatio=i.x/i.y,this.info.size.portraitWeight=n,this.info.size.wideWeight=s,this.renderer.setPixelRatio(this.info.size.pixelRatio),this.renderer.setSize(this.info.size.canvasSize.x,this.info.size.canvasSize.y),this.camera.aspect=this.info.size.canvasAspectRatio,this.camera.updateProjectionMatrix(),this.info.wrapperElement&&(this.info.wrapperElementRect=this.info.wrapperElement.getBoundingClientRect())}pointerEvent(t){const i=new e.Vector2;if(i.copy(t.position),this.info.canvas){const t=this.info.canvas.getBoundingClientRect();i.sub(new e.Vector2(t.x,t.y))}const n=i.clone();n.divide(this.info.size.canvasSize),n.y=1-n.y,n.multiplyScalar(2).subScalar(1);const s={event:t.pointerEvent,position:i.clone(),delta:t.delta.clone(),normalizedPosition:n.clone(),windowPosition:t.position.clone()};"hover"==t.pointerEventType?this.onHover(s):"start"==t.pointerEventType?this.onTouchStart(s):"move"==t.pointerEventType?this.onTouchMove(s):"end"==t.pointerEventType&&this.onTouchEnd(s)}onTouchStart(e){}onTouchMove(e){}onTouchEnd(e){}onHover(e){}onWheel(e,t){}}const{Lethargy:i}=n(714),r=n(810);class o extends e.EventDispatcher{constructor(){super(),this.trackpadMemDelta=0,this.trackpadMax=!1,this.lethargy=new i(7,0,.05),this.position=new e.Vector2(NaN,NaN),this.delta=new e.Vector2(NaN,NaN);const t=navigator.userAgent;this.isSP=t.indexOf("iPhone")>=0||t.indexOf("iPad")>=0||t.indexOf("Android")>=0||"iPad"==navigator.platform||"MacIntel"==navigator.platform&&-1!=navigator.userAgent.indexOf("Safari")&&-1==navigator.userAgent.indexOf("Chrome")&&void 0!==navigator.standalone,window.addEventListener("touchstart",this.onTouch.bind(this,"start"),{passive:!1}),window.addEventListener("touchmove",this.onTouch.bind(this,"move"),{passive:!1}),window.addEventListener("touchend",this.onTouch.bind(this,"end"),{passive:!1}),window.addEventListener("pointerdown",this.onPointer.bind(this,"start")),window.addEventListener("pointermove",this.onPointer.bind(this,"move")),window.addEventListener("pointerup",this.onPointer.bind(this,"end")),window.addEventListener("dragend",this.onPointer.bind(this,"end")),window.addEventListener("wheel",this.wheel.bind(this),{passive:!1}),this.position.set(NaN,NaN),this.isTouching=!1}getNormalizePosition(t){if(this.position.x!=this.position.x)return new e.Vector2(NaN,NaN);const i=this.position.clone().divide(t).multiplyScalar(2).subScalar(1);return i.y*=-1,i}getRelativePosition(t,i){const n=t.getClientRects()[0];let s=this.position.x-n.left,r=this.position.y-n.top;return i&&(s/=n.width,r/=n.height),new e.Vector2(s,r)}setPos(e,t){this.position.x!=this.position.x||this.position.y!=this.position.y?this.delta.set(0,0):this.delta.set(e-this.position.x,t-this.position.y),this.position.set(e,t)}onTouch(e,t){const i=t.touches[0];i?this.touchEventHandler(i.pageX,i.pageY,e,t):"end"==e&&this.touchEventHandler(NaN,NaN,e,t)}onPointer(e,t){const i=t.pointerType;null!=i&&("mouse"!=i||-1!=t.button&&0!=t.button)||this.touchEventHandler(t.pageX,t.pageY,e,t)}touchEventHandler(e,t,i,n){let s=!1;const r=e-window.pageXOffset,o=t-window.pageYOffset;"start"==i?(this.isTouching=!0,this.setPos(r,o),this.delta.set(0,0),s=!0):"move"==i?(this.setPos(r,o),this.isTouching&&(s=!0)):"end"==i&&(this.isTouching=!1,s=!0),s&&this.dispatchEvent({type:"update",pointerEvent:n,pointerEventType:i,position:this.position.clone(),delta:this.delta.clone()})}update(){this.isSP||this.dispatchEvent({type:"update",pointerEvent:null,pointerEventType:"hover",position:this.position.clone(),delta:this.delta.clone()})}wheel(e){let t=e.deltaY,i=0;switch(e.deltaMode){case e.DOM_DELTA_LINE:t*=2.5*r("ex",window);break;case e.DOM_DELTA_PAGE:t*=window.innerHeight}this.lethargy.check(e)&&(i=t),this.dispatchEvent({type:"wheel",wheelEvent:e,trackpadDelta:i})}}class a extends e.EventDispatcher{constructor(t){super(),this.layers=[],t&&t.silent||console.log("%c- ore-three "+n(147).i8+" -","padding: 5px 10px ;background-color: black; color: white;font-size:11px"),this.clock=new e.Clock,this.pointer=new o;let i=this.pointerEvent.bind(this),s=this.onWheel.bind(this),r=this.onOrientationDevice.bind(this),a=this.onWindowResize.bind(this);this.pointer.addEventListener("update",i),this.pointer.addEventListener("wheel",s),window.addEventListener("orientationchange",r),window.addEventListener("resize",a),this.addEventListener("dispose",(()=>{this.pointer.removeEventListener("update",i),this.pointer.removeEventListener("wheel",s),window.removeEventListener("orientationchange",r),window.removeEventListener("resize",a)})),this.tick()}tick(){const e=this.clock.getDelta();this.pointer.update();for(let t=0;t<this.layers.length;t++)this.layers[t].tick(e);requestAnimationFrame(this.tick.bind(this))}onWindowResize(){for(let e=0;e<this.layers.length;e++)this.layers[e].onResize()}onOrientationDevice(){this.onWindowResize()}pointerEvent(e){for(let t=0;t<this.layers.length;t++)this.layers[t].pointerEvent(e)}onWheel(e){for(let t=0;t<this.layers.length;t++)this.layers[t].onWheel(e.wheelEvent,e.trackpadDelta)}addLayer(e,t){for(;this.getLayer(t.name);)t.name+="_";this.layers.push(e),e.onBind(t)}getLayer(e){for(let t=0;t<this.layers.length;t++)if(this.layers[t].info.name==e)return this.layers[t];return null}removeLayer(e){for(let t=this.layers.length-1;t>=0;t--){const i=this.layers[t];i.info.name==e&&(i.onUnbind(),this.layers.splice(t,1))}}dispose(){this.layers.forEach((e=>{this.removeLayer(e.info.name)})),this.tick=()=>{},this.dispatchEvent({type:"dispose"})}}var l,h,c;!function(e){function t(e){return-e.p0+3*e.p1-3*e.p2+e.p3}function i(e){return 3*e.p0-6*e.p1+3*e.p2}function n(e){return-3*e.p0+3*e.p1}function s(e,s){return 3*t(e)*s*s+2*i(e)*s+n(e)}function r(e,s){return((t(e)*s+i(e))*s+n(e))*s+e.p0}e.NEWTON_ITERATIONS=4,e.NEWTON_MIN_SLOPE=.001,e.SUBDIVISION_PRECISION=1e-7,e.SUBDIVISION_MAX_ITERATIONS=10,e.BEZIER_EASING_CACHE_SIZE=11,e.BEZIER_EASING_SAMPLE_STEP_SIZE=1/e.BEZIER_EASING_CACHE_SIZE,e.calcBezierSlope=s,e.calcBezier=r,e.getBezierTfromX=function(t,i,n){t.p1=Math.max(t.p0,Math.min(t.p3,t.p1)),t.p2=Math.max(t.p0,Math.min(t.p3,t.p2));let o=0;for(let e=1;e<n.length&&(o=e-1,!(i<n[e]));e++);let a=o/(e.BEZIER_EASING_CACHE_SIZE-1),l=s(t,a)/(t.p3-t.p0);return 0==l?a:l>.01?function(t,i,n){for(let o=0;o<e.NEWTON_ITERATIONS;o++){let e=s(i,n);if(0==e)return n;n-=(r(i,n)-t)/e}return n}(i,t,a):function(t,i,n,s){let o=0,a=0;for(let l=0;l<e.SUBDIVISION_MAX_ITERATIONS;l++)a=i+(n-i)/2,o=r(s,a),o>t?n=a:i=a;return a}(i,a,a+e.BEZIER_EASING_SAMPLE_STEP_SIZE,t)}}(l||(l={})),function(e){e.sigmoid=function(e=6){return t=>{var i=Math.exp(-e*(2*t-1)),n=Math.exp(-e);return(1+(1-i)/(1+i)*(1+n)/(1-n))/2}},e.smoothstep=function(e,t,i){let n=Math.max(0,Math.min(1,(i-e)/(t-e)));return n*n*(3-2*n)},e.linear=function(e){return e},e.easeInQuad=function(e){return e*e},e.easeOutQuad=function(e){return e*(2-e)},e.easeInOutQuad=function(e){return e<.5?2*e*e:(4-2*e)*e-1},e.easeInCubic=function(e){return e*e*e},e.easeOutCubic=function(e){return--e*e*e+1},e.easeInOutCubic=function(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1},e.easeInQuart=function(e){return e*e*e*e},e.easeOutQuart=function(e){return 1- --e*e*e*e},e.easeInOutQuart=function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e},e.easeInQuint=function(e){return e*e*e*e*e},e.easeOutQuint=function(e){return 1+--e*e*e*e*e},e.easeInOutQuint=function(e){return e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e},e.bezier=function(e,t,i,n){for(var s=new Array(l.BEZIER_EASING_CACHE_SIZE),r=0;r<l.BEZIER_EASING_CACHE_SIZE;++r)s[r]=l.calcBezier({p0:e.x,p1:t.x,p2:i.x,p3:n.x},r/(l.BEZIER_EASING_CACHE_SIZE-1));return r=>r<=e.x?e.y:n.x<=r?n.y:l.calcBezier({p0:e.y,p1:t.y,p2:i.y,p3:n.y},l.getBezierTfromX({p0:e.x,p1:t.x,p2:i.x,p3:n.x},r,s))}}(h||(h={})),function(e){e.number=function(e,t,i){return e+(t-e)*i},e.numberArray=function(e,t,i){if(e.length==t.length){let n=[];for(let s=0;s<e.length;s++)n.push(e[s]+(t[s]-e[s])*i);return n}return console.log("Different length Arrays!!!"),!1},e.THREEVectors=function(e,t,i){return e.clone().lerp(t,i)},e.THREEQuaternion=function(e,t,i){return e.clone().slerp(t,i)},e.THREEEuler=function(e,t,i){let n=e.clone(),s=t.clone();return n.x=n.x+(s.x-n.x)*i,n.y=n.y+(s.y-n.y)*i,n.z=n.z+(s.z-n.z)*i,n},e.getLerpFunc=function(t){return"number"==typeof t?e.number:t instanceof Array&&"number"==typeof t[0]?e.numberArray:t.isVector2|t.isVector3|t.isVector4|t.isColor?e.THREEVectors:t.isQuaternion?e.THREEQuaternion:t.isEuler?e.THREEEuler:void 0}}(c||(c={}));class u extends e.EventDispatcher{constructor(){super(),this._isAnimating=!1,this.animatingCount=0,this.dispatchEvents=[],this.variables={}}get isAnimating(){return this._isAnimating}add(e){let t=e.customLerpFunc||c.getLerpFunc(e.initValue),i={time:-1,value:e.initValue,startValue:e.initValue,goalValue:null,easing:e.easing||h.sigmoid(),lerpFunc:t};return this.variables[e.name]=i,i}setEasing(e,t){let i=this.variables[e];i?i.easing=t:console.warn('"'+e+'" is not exist')}animate(e,t,i=1,n,s){let r=this.variables[e];return new Promise((o=>{if(r){if(i<=0)return this.setValue(e,t),r.time=1,void(r.onAnimationFinished=()=>{n&&n(),o(null)});-1==r.time&&(this._isAnimating=!0,this.animatingCount++),r.time=0,r.duration=i,r.startValue=r.value,r.goalValue=t,r.onAnimationFinished=()=>{n&&n(),o(null)},s&&this.setEasing(e,s)}else console.warn('"'+e+'" is not exist')}))}cancelAnimate(e){let t=this.variables[e];t?(t.time=1,t.onAnimationFinished=null):console.warn('"'+e+'" is not exist')}setValue(e,t){if(!this.variables[e])return console.warn('"'+e+'" is not exist'),null;this.variables[e].value=t,this.cancelAnimate(e)}get(e){return this.variables[e]?this.variables[e].value:(console.warn('"'+e+'" is not exist'),null)}getVariableObject(e,t=!1){return this.variables[e]?this.variables[e]:(t||console.warn('"'+e+'" is not exist'),null)}isAnimatingVariable(e,t=!1){return this.variables[e]?-1!=this.variables[e].time:(t||console.warn('"'+e+'" is not exist'),null)}applyToUniforms(e){let t=Object.keys(this.variables);for(let i=0;i<t.length;i++){let n=this.getVariableObject(t[i]);n&&(e[t[i]]=n)}}update(e){0==this.animatingCount&&(this._isAnimating=!1);let t=Object.keys(this.variables);for(let i=0;i<t.length;i++){let n=this.variables[t[i]],s=n.time;if(1==s&&(this.animatingCount--,s=-1,n.onAnimationFinished&&this.dispatchEvents.push(n.onAnimationFinished)),s>=0&&s<1){let r=n.duration,o=n.easing,a=n.lerpFunc;r&&(s+=(e||.016)/r,(0==r||s>=1)&&(s=1)),a&&(n.value=a(n.startValue,n.goalValue,o(s))),1==s&&(n.value=n.goalValue),this.dispatchEvent({type:"update/"+t[i],deltaTime:e,value:n.value})}n.time=s}for(;0!=this.dispatchEvents.length;){let e=this.dispatchEvents.pop();e&&e()}this.dispatchEvent({type:"update",deltaTime:e}),this._isAnimating&&this.dispatchEvent({type:"animate",deltaTime:e})}wait(e){return new Promise((t=>{setTimeout((()=>{t()}),1e3*e)}))}}class p extends e.Mesh{constructor(t){let i=new e.BufferGeometry,n=[],s=[],r=[];n.push(-1,1,0),n.push(1,1,0),n.push(1,-1,0),n.push(-1,-1,0),r.push(0,1),r.push(1,1),r.push(1,0),r.push(0,0),s.push(0,2,1,0,3,2);let o=new Float32Array(n),a=new Uint32Array(s),l=new Float32Array(r);i.setAttribute("position",new e.BufferAttribute(o,3)),i.setAttribute("uv",new e.BufferAttribute(l,2)),i.setIndex(new e.BufferAttribute(a,1)),t.vertexShader=t.vertexShader||"#define GLSLIFY 1\nvarying vec2 vUv;\nvarying vec4 vColor;\n\nvoid main( void ) {\n    \n    vec3 pos = position;\n\n    pos.z = 1.0;\n    \n    gl_Position = vec4( pos, 1.0 );\n    \n    vUv = uv;\n    vColor = vec4( 1.0 );\n\n}",t.transparent=null==t.transparent||t.transparent,t.depthFunc=null!=t.depthFunc?t.depthFunc:e.NeverDepth,super(i,new e.ShaderMaterial(t)),this.uniforms=t.uniforms||{},this.frustumCulled=!1}resize(e){this.uniforms.resolution={value:e.canvasSize},this.uniforms.aspectRatio={value:e.canvasAspectRatio}}}var d,m=n(795),f=n.n(m);class v extends(f()){constructor(e){super(),this.curves={},this.name=e||"",this.uniforms={}}addFcurveGroup(e,t){this.curves[e]=t}removeFCurve(e){delete this.curves[e]}getFCurveGroup(e){return this.curves[e]||null}assignUniforms(e,t){void 0!==this.uniforms[e]?console.warn("AnimationAction: uniform "+e+" is alraedy exist"):this.uniforms[e]=t}getUniforms(e){let t=e;return this.uniforms[t]||(this.uniforms[t]={value:null}),this.uniforms[t]}updateFrame(e){let t=Object.keys(this.curves);for(let i=0;i<t.length;i++){let n=this.curves[t[i]],s=this.uniforms[t[i]];n&&s&&(n.curve.x&&(s.value.x=n.curve.x.getValue(e)),n.curve.y&&(s.value.y=n.curve.y.getValue(e)),n.curve.z&&(s.value.z=n.curve.z.getValue(e)),n.curve.w&&(s.value.w=n.curve.w.getValue(e)))}}}class g extends(f()){constructor(e){super(),this.keyframes=[],this.cache={frame:NaN,value:NaN},this.set(e)}set(e){e&&(this.keyframes.length=0,e.forEach((e=>{this.addKeyFrame(e)})))}addKeyFrame(e){let t=0;for(let i=0;i<this.keyframes.length&&this.keyframes[i].coordinate.x<e.coordinate.x;i++)t++;this.keyframes.splice(t,0,e)}getValue(e){if(e==this.cache.frame)return this.cache.value;let t=null;for(let i=0;i<this.keyframes.length;i++){let n=this.keyframes[i];if(e<=n.coordinate.x){let s=this.keyframes[i-1];t=s?s.to(n,e):n.coordinate.y;break}}return null===t&&this.keyframes.length>0&&(t=this.keyframes[this.keyframes.length-1].coordinate.y),null!==t?(this.cache={frame:e,value:t},t):0}}class y extends(f()){constructor(e,t,i,n,s,r){super(),this.name="",this.type="scalar",this.curve={x:t||null,y:i||null,z:n||null,w:s||null,scalar:r||null},this.calcType()}setFCurve(e,t){this.curve[t]=e,this.calcType()}calcType(){this.curve.scalar&&(this.type="scalar"),this.curve.w?this.type="vec4":this.curve.z?this.type="vec3":this.curve.y?this.type="vec2":this.curve.x&&(this.type="scalar")}createInitValue(){return"vec2"==this.type?new e.Vector2:"vec3"==this.type?new e.Vector3:"vec4"==this.type?new e.Vector4:0}}class w extends(f()){constructor(e,t,i,n){super(),this.coordinate={x:0,y:0},this.handleLeft={x:0,y:0},this.handleRight={x:0,y:0},this.interpolation="BEZIER",this.easing=null,this.nextFrame=null,this.set(e,t,i,n)}set(e,t,i,n){this.coordinate=e,this.handleLeft=t||e,this.handleRight=i||e,this.interpolation=n||"BEZIER"}getEasing(e,t){return"BEZIER"==e?h.bezier(this.coordinate,this.handleRight,t.handleLeft,t.coordinate):e=>{let i=t.coordinate.y-this.coordinate.y;return e=(e-this.coordinate.x)/(t.coordinate.x-this.coordinate.x),this.coordinate.y+e*i}}to(e,t){return null!=this.nextFrame&&this.nextFrame.coordinate.x==e.coordinate.x&&this.nextFrame.coordinate.y==e.coordinate.y||(this.easing=this.getEasing(this.interpolation,e),this.nextFrame=e),this.easing?this.easing(t):0}}class E extends(f()){constructor(e){super(),this.connected=!1,this.frameCurrent=0,this.frameStart=0,this.frameEnd=0,this.objects=[],this.actions=[],this.fcurveGroupList={},this.uniforms={},this.url=e,this.connect(this.url)}connect(e){this.url=e,this.ws=new WebSocket(this.url),this.ws.onopen=this.onOpen.bind(this),this.ws.onmessage=this.onMessage.bind(this),this.ws.onclose=this.onClose.bind(this),this.ws.onerror=e=>{console.error(e)}}syncJsonScene(e){let t=new XMLHttpRequest;t.onreadystatechange=()=>{4==t.readyState&&200==t.status&&this.onSyncScene(JSON.parse(t.response))},t.open("GET",e),t.send()}onSyncScene(e){this.actions.length=0,this.objects.length=0,e.fcurves.forEach((e=>{let t=new g;t.set(e.keyframes.map((e=>new w(e.c,e.h_l,e.h_r,e.i))));let i=this.fcurveGroupList[e.name];i||(i=new y(e.name),this.fcurveGroupList[e.name]=i),i.setFCurve(t,e.axis)})),e.actions.forEach((e=>{let t=new v(e.name);e.fcurves.forEach((e=>{let i=this.fcurveGroupList[e];if(i){t.addFcurveGroup(e,i);let n=this.uniforms[e];n?t.assignUniforms(e,n):(this.uniforms[e]=t.getUniforms(e),this.uniforms[e].value=i.createInitValue())}})),this.actions.push(t)})),e.objects.forEach((e=>{this.objects.push(e)}))}onSyncFrame(e){this.setFrame(e.current,e.start,e.end)}onOpen(e){this.connected=!0}onMessage(e){let t=JSON.parse(e.data);console.log(t.data),"sync/scene"==t.type?this.onSyncScene(t.data):"sync/timeline"==t.type&&this.onSyncFrame(t.data)}onClose(e){this.disposeWS()}getActionNameList(e){for(let t=0;t<this.objects.length;t++)if(this.objects[t].name==e)return this.objects[t].actions;return[]}getAction(e){for(let t=0;t<this.actions.length;t++)if(this.actions[t].name==e)return this.actions[t];return null}getActionList(e){let t=[];return this.getActionNameList(e).forEach((e=>{let i=this.getAction(e);i&&t.push(i)})),t}getValue(e){let t=this.uniforms[e];if(t)return t.value;let i=this.fcurveGroupList[e];if(i){let t=i.createInitValue();return this.getUniform(e,t).value}return console.warn("not fount: ",e),null}getValueAsScalar(e){let t=this.getValue(e);return t?"number"==typeof t?t:t.x:0}getValueAsVector2(t){let i=this.getValue(t);return i?"number"==typeof i?new e.Vector2(i,0):"isVector2"in i?i:new e.Vector2(i.x,i.y):new e.Vector2}getValueAsVector3(t){let i=this.getValue(t);if(i){if(i.isVector3)return i;if("number"==typeof i)return new e.Vector3(i,i,i);{let t=new e.Vector3(i.x,i.y);return"isVector4"in i&&(t.z=i.z),t}}return new e.Vector3}getValueAsVector4(t){let i=this.getValue(t);if(!i)return new e.Vector4;if(i.isVector4)return i;if("number"==typeof i)return new e.Vector4(i,i,i,i);{let t=new e.Vector4(i.x,i.y);"isVector3"in i&&(t.z=i.z)}}getValueAsEuler(t){let i=this.getValue(t),n=new e.Euler;return n.order="YXZ",i&&("number"==typeof i?n.x=i:(n.x=i.x,n.y=i.y,("isVector3"in i||"isVector4"in i)&&(n.z=i.z))),n}getUniform(e,t){return this.uniforms[e]||(this.uniforms[e]={value:t}),this.uniforms[e]}setFrame(e,t,i){this.frameCurrent=e,this.frameStart=t||this.frameStart,this.frameEnd=i||this.frameEnd;for(let e=0;e<this.actions.length;e++)this.actions[e].updateFrame(this.frameCurrent);this.emitEvent("sync/timeline",[this.frameCurrent,this.frameStart,this.frameEnd])}dispose(){this.disposeWS()}disposeWS(){this.ws&&(this.ws.close(),this.ws.onmessage=null,this.ws.onclose=null,this.ws.onopen=null,this.connected=!1)}}!function(e){e.mergeUniforms=function(...e){let t={};for(let i=0;i<e.length;i++)null!=e[i]&&Object.assign(t,e[i]);return t}}(d||(d={}));class S extends e.Mesh{constructor(t,i){let n=new e.PlaneBufferGeometry(2,2);i.vertexShader="#define GLSLIFY 1\nvarying vec2 vUv;\nuniform vec2 domPos;\nuniform vec2 domSize;\nuniform vec2 windowSize;\nuniform float aspectRatio;\n\nvoid main(  )\n{\n  float width = domSize.x / windowSize.x;\n\n  //左上( 0,0 )に\n  vec3 pos = position + vec3( 1.0,-1.0,0.0 );\n\n  //size\n  pos.x *= width;\n  pos.y *= ( width * aspectRatio ) * ( domSize.y / domSize.x );\n\n  pos += vec3( -1.0, 1.0, 0.0 );\n\n  pos += vec3( domPos.x / windowSize.x * 2.0, -domPos.y / windowSize.y * 2.0, 0.0 );\n\n  gl_Position = vec4( pos, 1.0 );\n  vUv = uv;\n}\n";let s=d.mergeUniforms(i.uniforms,{domPos:{value:new e.Vector2},domSize:{value:new e.Vector2},windowSize:{value:new e.Vector2},aspectRatio:{value:1}});i.uniforms=s,super(n,new e.ShaderMaterial(i)),this.frustumCulled=!1,this._uniforms=s,this.element=t,this.update()}get uniforms(){return this._uniforms}update(){let e=this.element.getBoundingClientRect();this._uniforms.windowSize.value.set(window.innerWidth,window.innerHeight),this._uniforms.aspectRatio.value=window.innerWidth/window.innerHeight,this._uniforms.domSize.value.set(e.width,e.height),this._uniforms.domPos.value.set(e.left,e.top)}}class b{constructor(){this.events=[]}addEventListener(e,t){this.events.push({type:e,listener:t})}dispatchEvent(e){e.target=this;for(let t=0;t<this.events.length;t++)e.type==this.events[t].type&&this.events[t].listener(e)}removeEventListener(e,t){for(let i=this.events.length;i>=0;i--)e==this.events[i].type&&t==this.events[i].listener&&this.events.splice(i,1)}}class x{constructor(t,i){this.renderTargets=[],this.renderer=t,this.dataSize=i.clone(),this.uniforms={dataSize:{value:this.dataSize}},this.tempDataLinear=this.createData({minFilter:e.LinearFilter,magFilter:e.LinearFilter}),this.tempDataNear=this.createData({minFilter:e.NearestFilter,magFilter:e.NearestFilter}),this.scene=new e.Scene,this.camera=new e.Camera,this.materials=[],this.mesh=new e.Mesh(new e.PlaneBufferGeometry(2,2)),this.scene.add(this.mesh)}get isSupported(){return this.renderer.extensions.get("OES_texture_float")}createInitializeTexture(){let t=new Float32Array(this.uniforms.dataSize.value.x*this.uniforms.dataSize.value.y*4),i=new e.DataTexture(t,this.uniforms.dataSize.value.x,this.uniforms.dataSize.value.y,e.RGBAFormat,e.FloatType);return i.needsUpdate=!0,i}createData(t,i){let n=navigator.userAgent,s=n.indexOf("iPhone")>=0||n.indexOf("iPad")>=0||"iPad"==navigator.platform||"MacIntel"==navigator.platform&&-1!=navigator.userAgent.indexOf("Safari")&&-1==navigator.userAgent.indexOf("Chrome")&&void 0!==navigator.standalone,r={wrapS:e.ClampToEdgeWrapping,wrapT:e.ClampToEdgeWrapping,minFilter:e.NearestFilter,magFilter:e.NearestFilter,format:e.RGBAFormat,type:s?e.HalfFloatType:e.FloatType,stencilBuffer:!1,depthBuffer:!1},o=null,a=null;t&&(t.isDataTexture?(o=t,i&&(a=i)):a=t),a&&(r.wrapS=a.wrapS||r.wrapS,r.wrapT=a.wrapT||r.wrapT,r.minFilter=a.minFilter||r.minFilter,r.magFilter=a.magFilter||r.magFilter,r.format=a.format||r.format,r.type=a.type||r.type,r.stencilBuffer=a.stencilBuffer||r.stencilBuffer,r.depthBuffer=a.depthBuffer||r.depthBuffer);let l=new e.WebGLRenderTarget(this.uniforms.dataSize.value.x,this.uniforms.dataSize.value.y,r),h={buffer:l};if(this.renderTargets.push(l),o){let e=this.createKernel({fragmentShader:"#define GLSLIFY 1\nuniform sampler2D tex;\nvarying vec2 vUv;\n\nvoid main() {\n    gl_FragColor = texture2D(tex,vUv);\n}",uniforms:{tex:{value:o}}});this.compute(e,h)}return h}createKernel(t){let i=d.mergeUniforms(t.uniforms,{});i=d.mergeUniforms(this.uniforms,i),t.vertexShader=t.vertexShader||"#define GLSLIFY 1\nvarying vec2 vUv;\n\nvoid main() {\n    gl_Position = vec4( position, 1.0 );\n    vUv = uv;\n}";let n=new e.ShaderMaterial(t);return this.materials.push(n),{material:n,uniforms:i}}compute(t,i,n){let s;s=i.buffer.texture.magFilter==e.LinearFilter?this.tempDataLinear:this.tempDataNear,this.mesh.material=t.material;let r=this.renderer.getRenderTarget();this.renderer.setRenderTarget(s.buffer),this.renderer.render(this.scene,n||this.camera),this.swapBuffers(i,s),this.renderer.setRenderTarget(r)}swapBuffers(e,t){let i=e.buffer;e.buffer=t.buffer,t.buffer=i}dispose(){this.mesh.geometry.dispose();for(let e=0;e<this.materials.length;e++)this.materials[e].dispose();this.scene.remove(this.mesh),this.tempDataLinear.buffer.dispose(),this.tempDataNear.buffer.dispose()}resizeData(e){this.dataSize.copy(e);for(let t=0;t<this.renderTargets.length;t++)this.renderTargets[t].setSize(e.x,e.y)}}class P{constructor(t){this.target=t,this.scrollVel=new e.Vector2}update(){this.scrollVel.multiplyScalar(.96);let t=new e.Vector3(this.scrollVel.y,this.scrollVel.x,0).normalize(),i=(new e.Quaternion).setFromAxisAngle(t,this.scrollVel.length());i.multiply(this.target.quaternion),this.target.quaternion.copy(i)}addVelocity(e){this.scrollVel.addVectors(this.scrollVel,e.multiplyScalar(.001))}}class A{constructor(t,i,n){this.renderer=t,this.scene=new e.Scene,this.camera=new e.OrthographicCamera(-1,1,1,-1),this.screen=new e.Mesh(n||new e.PlaneBufferGeometry(2,2)),this.scene.add(this.screen),i.vertexShader=i.vertexShader||"#define GLSLIFY 1\nvarying vec2 vUv;\nvoid main() {\n    vUv = uv;\n    gl_Position = vec4( position, 1.0 );\n}   ",i.uniforms=i.uniforms||{},i.uniforms.resolution={value:new e.Vector2},this.effect={material:new e.ShaderMaterial(i)}}render(e,t=null){let i=this.renderer.getRenderTarget(),n=this.effect,s=n.material,r=s.uniforms;if(e){let t=Object.keys(e);for(let i=0;i<t.length;i++)r[t[i]]?r[t[i]].value=e[t[i]]:(r[t[i]]={value:e[t[i]]},n.material.needsUpdate=!0,n.material.uniforms=r)}t?r.resolution.value.set(t.width,t.height):this.renderer.getSize(r.resolution.value),this.screen.material=s,this.renderer.setRenderTarget(t),this.renderer.render(this.scene,this.camera),this.renderer.setRenderTarget(i)}}class T{constructor(e){this.isAutoMove=!1,this.delaySpeed=.1,this.dragDelaySpeed=.4,this.isTouching=!1,this.deltaMem=0,this.scrollReady=!1,this.sumDelta=0,this._scrollPos=0,this._scrollPosMem=0,this._scrollPercentage=0,this._scrollPosDelay=0,this._scrollPercentageDelay=0,this.dragStop=!1,this.dragUnlockReady=!0,this.parentElement=e,this.parentElementHeight=e.getBoundingClientRect().height,this.sections=[],this.caughtSection=null,this.animator=new u,this.animator.add({name:"scrollPos",initValue:0,easing:h.sigmoid()})}get scrollPos(){return this._scrollPos}get scrollPosDelay(){return this._scrollPosDelay}get scrollPercentage(){return this._scrollPercentage}get scrollPercentageDelay(){return this._scrollPercentageDelay}get scrollTimelinePercentage(){let e=0;for(let t=0;t<this.sections.length;t++){let i=this.sections[t],n=this.sections[t-1],s=1-Math.max(0,i.element.offsetTop-this.scrollPosDelay+(i.bottom?i.rect.height-window.innerHeight:0))/((n?n.rect.height-(n.bottom?window.innerHeight:0):0)+(i.bottom?i.rect.height-window.innerHeight:0)||1);if(s=Math.max(0,s),e+=s,s<1)break}return e/this.sections.length}add(e){return this.sections.push(e),this.sortSections(),e}sortSections(){this.sections.sort(((e,t)=>e.rect.y>t.rect.y?1:-1));for(let e=0;e<this.sections.length;e++)this.sections[e].timelinePercentage=(e+1)/this.sections.length}get(e){for(let t=0;t<this.sections.length;t++)if(this.sections[t].name==e)return this.sections[t];return console.warn('section "'+e+'" is not exist.'),null}update(e){this.updateParentElement(),this.updateScrollPos(e),this.applyParentElementTransform(),this.sumDelta=0}updateScrollPos(e){this.updateAutoMove(e),this.addScrollPos(),this.calcScrollProperties(e)}updateAutoMove(e){if(this.animator.update(e),this.isAutoMove){let e=this.animator.get("scrollPos");e&&(this.sumDelta=e-this.scrollPos)}}addScrollPos(){if(this.checkUnlockStopScroll(this.sumDelta)){let e=this.checkThrow(this.sumDelta);null!==e?this._scrollPos=e:this._scrollPos+=this.sumDelta,this._scrollPos=Math.max(Math.min(this._scrollPos,this.parentElementHeight-window.innerHeight),0)}}checkUnlockStopScroll(e){let t=0,i=!1;if(this.caughtSection){let n=this.scrollPos-this.scrollPosDelay;if((e*n<0||Math.abs(n)<10||this.isAutoMove)&&(e<0?(-e>(this.caughtSection.startScrollUp||0)||this.isAutoMove)&&(t=-1):e>0&&(e>(this.caughtSection.startScrollDown||0)||this.isAutoMove)&&(t=1)),0!=t&&this.caughtSection.events&&this.caughtSection.events.onStartScroll){let i,n={scroller:this,section:this.caughtSection,scrollMode:this.isAutoMove?"auto":"manual",scrollDelta:e,scrollPower:Math.abs(e)},s=this.caughtSection.events.onStartScroll.common&&this.caughtSection.events.onStartScroll.common(n);-1==t&&(i=this.caughtSection.events.onStartScroll.up&&this.caughtSection.events.onStartScroll.up(n)),1==t&&(i=this.caughtSection.events.onStartScroll.down&&this.caughtSection.events.onStartScroll.down(n)),!1!==s&&!1!==i||(t=0)}i=0!=t}else i=!0;return t&&(this.caughtSection=null),i}checkThrow(e){for(let t=0;t<this.sections.length;t++){let i=this.sections[t];i.updateRect(this._scrollPos);let n=this.checkThrowSectionEvents(i,e);if(null!==n)return this.caughtSection=i,this.isAutoMove?null:n}return null}checkThrowSectionEvents(e,t){let i=e.getScrollPercentage(),n=e.getScrollPercentage(t);if(e.events){let s={scroller:this,section:e,scrollMode:this.isAutoMove?"auto":"manual",scrollDelta:t,scrollPower:Math.abs(t)};if(e.events.onArrivals)for(let t=0;t<e.events.onArrivals.length;t++){let r=e.events.onArrivals[t],o=this.checkThrowLine(i,n,r.percentage);0!=o&&(r.event.common&&r.event.common(s),o<0?r.event.up&&r.event.up(s):r.event.down&&r.event.down(s))}}return e.stop&&this.checkThrowLine(i,n,1)?(this.dragUnlockReady=!1,e.element.offsetTop+(e.bottom?e.rect.height-window.innerHeight:0)):null}checkThrowLine(e,t,i){return e<i&&i<=t?1:e>i&&i>=t?-1:e==i&&i==t?2:0}calcScrollProperties(e){this._scrollPosDelay+=(this._scrollPos-this._scrollPosDelay)*(this.isTouching&&!this.caughtSection?this.dragDelaySpeed:this.delaySpeed)*Math.min(1,60*e),this._scrollPercentage=this.scrollPosToPerecntage(this.scrollPos),this._scrollPercentageDelay=this.scrollPosToPerecntage(this.scrollPosDelay)}scrollPosToPerecntage(e){return e/(this.parentElementHeight-window.innerHeight)}updateParentElement(){this.parentElementHeight=this.parentElement.getBoundingClientRect().height}applyParentElementTransform(){this.parentElement.style.transform="translate3d( 0,"+-this.scrollPosDelay.toString()+"px, 0 )"}scroll(e){this.deltaMem=(this.deltaMem+e)/2,this.sumDelta+=e}catch(){this.isAutoMove||(this.isTouching=!0,this.deltaMem=0,this.caughtSection||(this._scrollPos=this._scrollPosDelay))}drag(e){this.isTouching&&this.scroll(e)}release(e=10){this.isTouching&&(this.isTouching=!1,this.caughtSection||this.scroll(this.deltaMem*e))}autoMove(e){let t=0;if(e.target.isPageScrollerSection){let i=e.target,n=e.bottom?i.rect.height-window.innerHeight:0;t=i.element.offsetTop+n}else if("string"==typeof e.target){let i=this.get(e.target);if(i){let n=e.bottom?i.rect.height-window.innerHeight:0;t=i.element.offsetTop+n}}else"number"==typeof e.target&&(t=e.target);this.animator.setValue("scrollPos",this._scrollPos),this.animator.animate("scrollPos",t,e.duration,(()=>{e.callBack&&e.callBack(),this.isAutoMove=!1}),e.easing),this.sumDelta=(t-this.sumDelta)/Math.abs(t-this.sumDelta)*1e-5,this.isAutoMove=!0}}class L{constructor(e){this.timelinePercentage=0,this.name=e.name,this.element=e.element,this.rect=this.element.getBoundingClientRect(),this.stop=e.stop,this.events=e.events,this.bottom=e.bottom,this.startScrollDown=e.startScrollDown||0,this.startScrollUp=e.startScrollUp||0,this.updateRect(0)}get isPageScrollerSection(){return!0}updateRect(e){this.rect={x:this.element.offsetLeft,y:this.element.offsetTop-e,width:this.element.offsetWidth,height:this.element.offsetHeight}}getScrollPercentage(e){let t=this.bottom?this.rect.height-window.innerHeight:0,i=this.rect.y+t-(e||0),n=this.bottom?this.rect.height:window.innerHeight,s=Math.min(1,1-i/n),r=this.bottom?window.innerHeight:this.rect.height;return s+Math.max(0,-i/r)}}class V{constructor(e,t,i){this.obj=e,this.baseTransform={position:this.obj.position.clone(),rotation:this.obj.quaternion.clone(),scale:this.obj.scale.clone()},this.transform=t,i||(this.transform.position&&this.transform.position.add(this.obj.position),this.transform.rotation&&this.transform.rotation.multiply(this.obj.quaternion))}updateTransform(e){this.transform.position&&this.obj.position.copy(this.baseTransform.position.clone().lerp(this.transform.position,e)),this.transform.rotation&&this.obj.quaternion.copy(this.baseTransform.rotation.clone().slerp(this.transform.rotation,e)),this.transform.scale&&this.obj.scale.copy(this.baseTransform.scale.clone().multiplyScalar(this.transform.scale*e+1-e))}}class _{constructor(){this.variables={},this.time=0}add(e){if(0!=e.keyframes.length)return this.variables[e.name]={keyframes:e.keyframes,lerpFunc:e.customLerp,easing:e.easing,value:null},this.variables[e.name].keyframes.sort(((e,t)=>e.time<t.time?-1:1)),this.variables[e.name].lerpFunc||(this.variables[e.name].lerpFunc=c.getLerpFunc(e.keyframes[0].value)),this.calc(),e.name;console.warn('"'+e.name+'"',"Keyframe length is 0!!")}get(e){return this.variables[e]?this.variables[e].value:(console.warn('"'+e+'" is not exist'),null)}getVariableObject(e){return this.variables[e]?this.variables[e]:(console.warn('"'+e+'" is not exist'),null)}update(e){this.time=e,this.calc()}calc(){let e=Object.keys(this.variables);for(let t=0;t<e.length;t++){let i=this.variables[e[t]],n=i.keyframes,s=null,r=null,o=Math.max(n[0].time,Math.min(n[n.length-1].time,this.time)),a=null;if(1==n.length)o=n[0].time,s=r=n[0];else{for(let e=0;e<n.length-1&&(s=n[e],r=n[e+1],a=s.easing,!(s.time<=o&&o<=r.time));e++);null!=s&&null!=r&&(o=(o-s.time)/(r.time-s.time))}a?o=a(o):i.easing?o=i.easing(o):this.defaultEasing&&(o=this.defaultEasing(o)),i.lerpFunc?(null!=s&&null!=r&&(i.value=i.lerpFunc(s.value,r.value,o)),!1===i.value&&console.log('error at "'+e[t]+'"')):console.warn('"'+e[t]+'"',"lerp function is not set.")}}}class R extends e.EventDispatcher{constructor(){super()}goHome(){this.dispatchEvent({type:"gohome"})}wait(e){return new Promise(((t,i)=>{const n=()=>{i(),this.removeEventListener("gohome",n)};this.addEventListener("gohome",n),setTimeout((()=>{this.removeEventListener("gohome",n),t()}),1e3*e)}))}}})(),s})()}));