{"version":3,"sources":["webpack://ORE/webpack/universalModuleDefinition","webpack://ORE/./node_modules/lethargy/lethargy.js","webpack://ORE/./node_modules/parse-unit/index.js","webpack://ORE/./node_modules/to-px/browser.js","webpack://ORE/./src/utils/Easings.ts","webpack://ORE/./src/utils/Lerps.ts","webpack://ORE/./src/core/BaseLayer.ts","webpack://ORE/./src/utils/Pointer.ts","webpack://ORE/./src/core/Controller.ts","webpack://ORE/./src/utils/Uniforms.ts","webpack://ORE/./src/utils/Animator.ts","webpack://ORE/./src/utils/Background/index.ts","webpack://ORE/./src/utils/Background/shaders/background.vs","webpack://ORE/./src/utils/DOMMesh/index.ts","webpack://ORE/./src/utils/DOMMesh/domMesh.vs","webpack://ORE/./src/utils/EventDispatcher.ts","webpack://ORE/./src/utils/GPUComputationController/index.ts","webpack://ORE/./src/utils/GPUComputationController/shaders/passThrough.fs","webpack://ORE/./src/utils/GPUComputationController/shaders/passThrough.vs","webpack://ORE/./src/utils/MouseRotator.ts","webpack://ORE/./src/utils/PostProcessing/index.ts","webpack://ORE/./src/utils/PostProcessing/shaders/passThrow.vs","webpack://ORE/./src/utils/PageScroller/index.ts","webpack://ORE/./src/utils/PageScroller/PageScrollerSection.ts","webpack://ORE/./src/utils/LayoutController.ts","webpack://ORE/./src/utils/TimelineAnimator.ts","webpack://ORE/external {\"commonjs\":\"three\",\"commonjs2\":\"three\",\"amd\":\"three\",\"root\":\"THREE\"}","webpack://ORE/webpack/bootstrap","webpack://ORE/webpack/startup","webpack://ORE/webpack/runtime/compat get default export","webpack://ORE/webpack/runtime/define property getters","webpack://ORE/webpack/runtime/hasOwnProperty shorthand","webpack://ORE/webpack/runtime/make namespace object"],"names":["root","factory","exports","module","require","define","amd","self","__WEBPACK_EXTERNAL_MODULE__807__","this","Lethargy","stability","sensitivity","tolerance","delay","Math","abs","lastUpDeltas","i","ref","results","push","call","lastDownDeltas","deltasTimestamp","prototype","check","e","lastDelta","originalEvent","wheelDelta","deltaY","detail","Date","now","shift","isInertia","direction","lastDeltas","lastDeltasNew","lastDeltasOld","newAverage","newSum","oldAverage","oldSum","slice","reduce","t","s","length","showLastUpDeltas","showLastDownDeltas","str","out","String","num","parseFloat","match","parseUnit","toPX","PIXELS_PER_INCH","getSizeBrutal","document","body","getPropertyInPX","element","prop","parts","getComputedStyle","getPropertyValue","unit","testDIV","createElement","style","appendChild","size","removeChild","trim","toLowerCase","window","clientHeight","innerWidth","innerHeight","min","max","isNaN","px","Easings","Lerps","readyAnimate","time","info","name","canvas","wrapperElement","wrapperElementRect","aspect","mainAspect","wideAspect","portraitAspect","portraitWeight","wideWeight","windowSize","windowAspectRatio","canvasSize","canvasPixelSize","canvasAspectRatio","commonUniforms","value","scene","camera","tick","deltaTime","animate","onBind","layerInfo","getBoundingClientRect","renderer","setPixelRatio","devicePixelRatio","debug","checkShaderErrors","setTimeout","onResize","onUnbind","removeChildrens","object","children","geo","mat","isMesh","geometry","material","remove","dispose","newWindowSize","newCanvasSize","set","clientWidth","copy","x","y","clone","multiplyScalar","getPixelRatio","setSize","updateProjectionMatrix","pointerEvent","canvasPosition","position","normalizedPosition","divide","subScalar","args","event","delta","windowPosition","pointerEventType","onHover","onTouchStart","onTouchMove","onTouchEnd","onWheel","trackpadDelta","trackpadMemDelta","trackpadMax","lethargy","NaN","userAgent","navigator","isSP","indexOf","platform","undefined","standalone","addEventListener","onTouch","bind","passive","onPointer","wheel","isTouching","getNormalizePosition","p","getRelativePosition","elm","normalize","pos","rect","getClientRects","left","top","width","height","setPos","type","touch","touches","touchEventHandler","pageX","pageY","pointerType","button","posX","posY","dispatch","pageXOffset","pageYOffset","dispatchEvent","update","deltaMode","DOM_DELTA_LINE","DOM_DELTA_PAGE","wheelEvent","parameter","layers","silent","console","log","clock","pointer","Pointer","onOrientationDevice","onWindowResize","getDelta","requestAnimationFrame","getLayer","layerName","addLayer","layer","removeLayer","layerNmae","splice","sigmoid","weight","variables","e1","exp","e2","smoothstep","lerpNumber","a","b","linear","easeInQuad","easeOutQuad","easeInOutQuad","easeInCubic","easeOutCubic","easeInOutCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint","number","numberArray","c","THREEVectors","lerp","THREEQuaternion","slerp","THREEEuler","ac","bc","z","getLerpFunc","Array","isVector2","isVector3","isVector4","isColor","isQuaternion","isEuler","UniformsLib","_isAnimating","animatingCount","dispatchEvents","add","params","lerpFunc","customLerpFunc","initValue","variable","startValue","goalValue","easing","func","setEasing","warn","duration","callback","Promise","resolve","setValue","onAnimationFinished","cancelAnimate","get","getVariableObject","mute","isAnimatingVariable","applyToUniforms","uniforms","keys","Object","pop","param","posArray","indexArray","uvArray","Float32Array","indices","Uint32Array","uv","setAttribute","setIndex","vertexShader","transparent","depthFunc","frustumCulled","resize","resolution","aspectRatio","mergeUniforms","res","assign","uni","domPos","domSize","_uniforms","events","listener","target","removeEventListener","dataSize","renderTargets","tempDataLinear","createData","minFilter","magFilter","tempDataNear","materials","mesh","extensions","createInitializeTexture","texture","needsUpdate","initTex_texParam","textureParam","initTex","customParam","isiOS","wrapS","wrapT","format","stencilBuffer","depthBuffer","isDataTexture","buf","data","buffer","initKernel","createKernel","fragmentShader","tex","compute","kernel","temp","currentRenderTarget","getRenderTarget","setRenderTarget","render","swapBuffers","b1","b2","tmp","resizeData","objs","scrollVel","axis","q","setFromAxisAngle","multiply","quaternion","addVelocity","scrollDelta","addVectors","screen","createMaterials","effect","inputRenderTargets","renderTarget","renderTargetMem","j","getSize","parentElement","delaySpeed","dragDelaySpeed","deltaMem","scrollReady","sumDelta","_scrollPos","_scrollPercentage","_scrollPosDelay","_scrollPercentageDelay","dragStop","dragUnlockReady","sections","initAnimator","animator","Animator","sum","sec","secBef","d","offsetTop","scrollPosDelay","bottom","section","sortSections","sort","timelinePercentage","updateParentElement","updateScrollPos","applyParentElementTransform","updateAutoMove","addScrollPos","calcScrollProperties","isAutoMove","scrollPos","checkUnlockStopScroll","stopPos","checkThrow","parentElementHeight","unlockDir","unlock","caughtSection","distance","startScrollUp","startScrollDown","onStartScroll","scroller","scrollMode","scrollPower","commonUnlock","common","up","down","updateRect","checkThrowSectionEvents","percentage","getScrollPercentage","movedPercentage","arrivalEvents","onArrivals","arrivalEvent","isThrow","checkThrowLine","stop","line","scrollPosToPerecntage","transform","toString","scroll","catch","drag","release","snap","autoMove","targetPos","isPageScrollerSection","bottomOffset","callBack","offsetLeft","offsetWidth","offsetHeight","offsetPos","firstHalfHeight","firstHalf","secondHalfHeight","isAbsolutePosition","obj","baseTransform","rotation","baseScale","scale","updateTransform","keyframes","customLerp","calc","valiable","kfs","defaultEasing","__webpack_module_cache__","__webpack_require__","moduleId","__webpack_modules__","n","getter","__esModule","definition","key","o","defineProperty","enumerable","hasOwnProperty","r","Symbol","toStringTag"],"mappings":"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","file":"ore-three-ts.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"three\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"three\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"ORE\"] = factory(require(\"three\"));\n\telse\n\t\troot[\"ORE\"] = factory(root[\"THREE\"]);\n})(self, function(__WEBPACK_EXTERNAL_MODULE__807__) {\nreturn ","// Generated by CoffeeScript 1.9.2\n(function() {\n  var root;\n\n  root = typeof exports !== \"undefined\" && exports !== null ? exports : this;\n\n  root.Lethargy = (function() {\n    function Lethargy(stability, sensitivity, tolerance, delay) {\n      this.stability = stability != null ? Math.abs(stability) : 8;\n      this.sensitivity = sensitivity != null ? 1 + Math.abs(sensitivity) : 100;\n      this.tolerance = tolerance != null ? 1 + Math.abs(tolerance) : 1.1;\n      this.delay = delay != null ? delay : 150;\n      this.lastUpDeltas = (function() {\n        var i, ref, results;\n        results = [];\n        for (i = 1, ref = this.stability * 2; 1 <= ref ? i <= ref : i >= ref; 1 <= ref ? i++ : i--) {\n          results.push(null);\n        }\n        return results;\n      }).call(this);\n      this.lastDownDeltas = (function() {\n        var i, ref, results;\n        results = [];\n        for (i = 1, ref = this.stability * 2; 1 <= ref ? i <= ref : i >= ref; 1 <= ref ? i++ : i--) {\n          results.push(null);\n        }\n        return results;\n      }).call(this);\n      this.deltasTimestamp = (function() {\n        var i, ref, results;\n        results = [];\n        for (i = 1, ref = this.stability * 2; 1 <= ref ? i <= ref : i >= ref; 1 <= ref ? i++ : i--) {\n          results.push(null);\n        }\n        return results;\n      }).call(this);\n    }\n\n    Lethargy.prototype.check = function(e) {\n      var lastDelta;\n      e = e.originalEvent || e;\n      if (e.wheelDelta != null) {\n        lastDelta = e.wheelDelta;\n      } else if (e.deltaY != null) {\n        lastDelta = e.deltaY * -40;\n      } else if ((e.detail != null) || e.detail === 0) {\n        lastDelta = e.detail * -40;\n      }\n      this.deltasTimestamp.push(Date.now());\n      this.deltasTimestamp.shift();\n      if (lastDelta > 0) {\n        this.lastUpDeltas.push(lastDelta);\n        this.lastUpDeltas.shift();\n        return this.isInertia(1);\n      } else {\n        this.lastDownDeltas.push(lastDelta);\n        this.lastDownDeltas.shift();\n        return this.isInertia(-1);\n      }\n      return false;\n    };\n\n    Lethargy.prototype.isInertia = function(direction) {\n      var lastDeltas, lastDeltasNew, lastDeltasOld, newAverage, newSum, oldAverage, oldSum;\n      lastDeltas = direction === -1 ? this.lastDownDeltas : this.lastUpDeltas;\n      if (lastDeltas[0] === null) {\n        return direction;\n      }\n      if (this.deltasTimestamp[(this.stability * 2) - 2] + this.delay > Date.now() && lastDeltas[0] === lastDeltas[(this.stability * 2) - 1]) {\n        return false;\n      }\n      lastDeltasOld = lastDeltas.slice(0, this.stability);\n      lastDeltasNew = lastDeltas.slice(this.stability, this.stability * 2);\n      oldSum = lastDeltasOld.reduce(function(t, s) {\n        return t + s;\n      });\n      newSum = lastDeltasNew.reduce(function(t, s) {\n        return t + s;\n      });\n      oldAverage = oldSum / lastDeltasOld.length;\n      newAverage = newSum / lastDeltasNew.length;\n      if (Math.abs(oldAverage) < Math.abs(newAverage * this.tolerance) && (this.sensitivity < Math.abs(newAverage))) {\n        return direction;\n      } else {\n        return false;\n      }\n    };\n\n    Lethargy.prototype.showLastUpDeltas = function() {\n      return this.lastUpDeltas;\n    };\n\n    Lethargy.prototype.showLastDownDeltas = function() {\n      return this.lastDownDeltas;\n    };\n\n    return Lethargy;\n\n  })();\n\n}).call(this);\n","module.exports = function parseUnit(str, out) {\n    if (!out)\n        out = [ 0, '' ]\n\n    str = String(str)\n    var num = parseFloat(str, 10)\n    out[0] = num\n    out[1] = str.match(/[\\d.\\-\\+]*\\s*(.*)/)[1] || ''\n    return out\n}","'use strict'\n\nvar parseUnit = require('parse-unit')\n\nmodule.exports = toPX\n\nvar PIXELS_PER_INCH = getSizeBrutal('in', document.body) // 96\n\n\nfunction getPropertyInPX(element, prop) {\n  var parts = parseUnit(getComputedStyle(element).getPropertyValue(prop))\n  return parts[0] * toPX(parts[1], element)\n}\n\n//This brutal hack is needed\nfunction getSizeBrutal(unit, element) {\n  var testDIV = document.createElement('div')\n  testDIV.style['height'] = '128' + unit\n  element.appendChild(testDIV)\n  var size = getPropertyInPX(testDIV, 'height') / 128\n  element.removeChild(testDIV)\n  return size\n}\n\nfunction toPX(str, element) {\n  if (!str) return null\n\n  element = element || document.body\n  str = (str + '' || 'px').trim().toLowerCase()\n  if(element === window || element === document) {\n    element = document.body\n  }\n\n  switch(str) {\n    case '%':  //Ambiguous, not sure if we should use width or height\n      return element.clientHeight / 100.0\n    case 'ch':\n    case 'ex':\n      return getSizeBrutal(str, element)\n    case 'em':\n      return getPropertyInPX(element, 'font-size')\n    case 'rem':\n      return getPropertyInPX(document.body, 'font-size')\n    case 'vw':\n      return window.innerWidth/100\n    case 'vh':\n      return window.innerHeight/100\n    case 'vmin':\n      return Math.min(window.innerWidth, window.innerHeight) / 100\n    case 'vmax':\n      return Math.max(window.innerWidth, window.innerHeight) / 100\n    case 'in':\n      return PIXELS_PER_INCH\n    case 'cm':\n      return PIXELS_PER_INCH / 2.54\n    case 'mm':\n      return PIXELS_PER_INCH / 25.4\n    case 'pt':\n      return PIXELS_PER_INCH / 72\n    case 'pc':\n      return PIXELS_PER_INCH / 6\n    case 'px':\n      return 1\n  }\n\n  // detect number of units\n  var parts = parseUnit(str)\n  if (!isNaN(parts[0]) && parts[1]) {\n    var px = toPX(parts[1], element)\n    return typeof px === 'number' ? parts[0] * px : null\n  }\n\n  return null\n}\n","export declare interface EasingSet{\n\tfunc: Function;\n\targs?: number | number[];\n}\n\nexport namespace Easings {\n\n\texport function sigmoid( x: number, ...variables: number[] ): number {\n\n\t\tlet weight = 6;\n\n\t\tif ( variables[ 0 ] ) {\n\n\t\t\tweight = variables[ 0 ];\n\n\t\t}\n\n\t\tvar e1 = Math.exp( - weight * ( 2 * x - 1 ) );\n\t\tvar e2 = Math.exp( - weight );\n\n\t\treturn ( 1 + ( 1 - e1 ) / ( 1 + e1 ) * ( 1 + e2 ) / ( 1 - e2 ) ) / 2;\n\n\t}\n\n\texport function smoothstep( min: number, max: number, value: number ): number {\n\n\t\tlet x = Math.max( 0, Math.min( 1, value - min / ( max - min ) ) );\n\n\t\treturn x * x * ( 3 - 2 * x );\n\n\t}\n\n\texport function lerpNumber( a: number, b: number, t: number ): number {\n\n\t\treturn ( 1.0 - t ) * a + t * b;\n\n\t}\n\n\t/*\n\t@auther https://gist.github.com/gre/1650294\n\t*/\n\n\texport function linear( t: number ) {\n\n\t\treturn t;\n\n\t}\n\n\t// accelerating from zero velocity\n\texport function easeInQuad( t: number ) {\n\n\t\treturn t * t;\n\n\t}\n\n\t// decelerating to zero velocity\n\texport function easeOutQuad( t: number ) {\n\n\t\treturn t * ( 2 - t );\n\n\t}\n\n\t// acceleration until halfway, then deceleration\n\texport function easeInOutQuad( t: number ) {\n\n\t\treturn t < .5 ? 2 * t * t : - 1 + ( 4 - 2 * t ) * t;\n\n\t}\n\n\t// accelerating from zero velocity\n\texport function easeInCubic( t: number ) {\n\n\t\treturn t * t * t;\n\n\t}\n\n\t// decelerating to zero velocity\n\texport function easeOutCubic( t: number ) {\n\n\t\treturn ( -- t ) * t * t + 1;\n\n\t}\n\n\t// acceleration until halfway, then deceleration\n\texport function easeInOutCubic( t: number ) {\n\n\t\treturn t < .5 ? 4 * t * t * t : ( t - 1 ) * ( 2 * t - 2 ) * ( 2 * t - 2 ) + 1;\n\n\t}\n\n\t// accelerating from zero velocity\n\texport function easeInQuart( t: number ) {\n\n\t\treturn t * t * t * t;\n\n\t}\n\n\t// decelerating to zero velocity\n\texport function easeOutQuart( t: number ) {\n\n\t\treturn 1 - ( -- t ) * t * t * t;\n\n\t}\n\n\t// acceleration until halfway, then deceleration\n\texport function easeInOutQuart( t: number ) {\n\n\t\treturn t < .5 ? 8 * t * t * t * t : 1 - 8 * ( -- t ) * t * t * t;\n\n\t}\n\n\t// accelerating from zero velocity\n\texport function easeInQuint( t: number ) {\n\n\t\treturn t * t * t * t * t;\n\n\t}\n\n\t// decelerating to zero velocity\n\texport function easeOutQuint( t: number ) {\n\n\t\treturn 1 + ( -- t ) * t * t * t * t;\n\n\t}\n\n\t// acceleration until halfway, then deceleration\n  \texport function easeInOutQuint( t: number ) {\n\n  \t\treturn t < .5 ? 16 * t * t * t * t * t : 1 + 16 * ( -- t ) * t * t * t * t;\n\n  \t}\n\n}\n","export declare interface LerpFunc<T>{\n\t( a: T, b: T, t: number ): T;\n}\n\nexport namespace Lerps {\n\n\texport function number( a: number, b: number, t: number ) {\n\n\t\treturn a + ( b - a ) * t;\n\n\t}\n\n\texport function numberArray( a: number[], b: number[], t: number ) {\n\n\t\tif ( a.length == b.length ) {\n\n\t\t\tlet c = [];\n\n\t\t\tfor ( let i = 0; i < a.length; i ++ ) {\n\n\t\t\t\tc.push( a[ i ] + ( b[ i ] - a[ i ] ) * t );\n\n\t\t\t}\n\n\t\t\treturn c;\n\n\t\t} else {\n\n\t\t\tconsole.log( 'Different length Arrays!!!' );\n\n\t\t\treturn false;\n\n\t\t}\n\n\t}\n\n\texport function THREEVectors( a: THREE.Vector2 & THREE.Vector3 & THREE.Vector4 & THREE.Color, b: THREE.Vector2 & THREE.Vector3 & THREE.Vector4 & THREE.Color, t: number ) {\n\n\t\treturn a.clone().lerp( b, t );\n\n\t}\n\n\texport function THREEQuaternion( a: THREE.Quaternion, b: THREE.Quaternion, t: number ) {\n\n\t\treturn a.clone().slerp( b, t );\n\n\t}\n\n\texport function THREEEuler( a: THREE.Euler, b: THREE.Euler, t: number ) {\n\n\t\tlet ac = a.clone();\n\t\tlet bc = b.clone();\n\n\t\tac.x = ac.x + ( bc.x - ac.x ) * t;\n\t\tac.y = ac.y + ( bc.y - ac.y ) * t;\n\t\tac.z = ac.z + ( bc.z - ac.z ) * t;\n\n\t\treturn ac;\n\n\t}\n\n\texport function getLerpFunc( value: any ) {\n\n\t\tif ( typeof ( value ) == 'number' ) {\n\n\t\t\treturn Lerps.number;\n\n\t\t} else if ( value instanceof Array && typeof ( value[ 0 ] ) == 'number' ) {\n\n\t\t\treturn Lerps.numberArray;\n\n\t\t} else if ( value.isVector2 | value.isVector3 | value.isVector4 | value.isColor ) {\n\n\t\t\treturn Lerps.THREEVectors;\n\n\t\t} else if ( value.isQuaternion ) {\n\n\t\t\treturn Lerps.THREEQuaternion;\n\n\t\t} else if ( value.isEuler ) {\n\n\t\t\treturn Lerps.THREEEuler;\n\n\t\t}\n\n\t}\n\n}\n","import * as THREE from 'three';\n\nimport { Uniforms } from '../utils/Uniforms';\nimport { PointerEventArgs } from './Controller';\n\nexport declare interface LayerBindParam extends THREE.WebGLRendererParameters {\n\tname: string;\n\tcanvas: HTMLCanvasElement;\n\taspect?: AspectInfo;\n\twrapperElement?: HTMLElement;\n\twrapperElementRect?: DOMRect;\n}\n\nexport declare interface LayerInfo extends LayerBindParam {\n\tsize?: LayerSize;\n}\n\nexport declare interface LayerSize {\n\tcanvasAspectRatio: number;\n\twindowSize: THREE.Vector2;\n\twindowAspectRatio: number;\n\tcanvasSize: THREE.Vector2;\n\tcanvasPixelSize: THREE.Vector2;\n}\n\nexport declare interface AspectInfo {\n\tmainAspect: number;\n\tportraitAspect: number;\n\twideAspect: number;\n\tportraitWeight: number;\n\twideWeight: number;\n}\n\nexport declare interface TouchEventArgs {\n\tevent?: PointerEvent;\n\tposition: THREE.Vector2;\n\tdelta: THREE.Vector2;\n\tnormalizedPosition: THREE.Vector2;\n\twindowPosition: THREE.Vector2;\n}\n\nexport class BaseLayer extends THREE.EventDispatcher {\n\n\tpublic info: LayerInfo;\n\n\tpublic renderer: THREE.WebGLRenderer;\n\n\tpublic scene: THREE.Scene;\n\tpublic camera: THREE.PerspectiveCamera;\n\n\tprotected readyAnimate: boolean = false;\n\tpublic time: number = 0;\n\tpublic commonUniforms: Uniforms;\n\n\tconstructor() {\n\n\t\tsuper();\n\n\t\tthis.info = {\n\t\t\tname: '',\n\t\t\tcanvas: null,\n\t\t\twrapperElement: null,\n\t\t\twrapperElementRect: null,\n\t\t\taspect: {\n\t\t\t\tmainAspect: 16 / 9,\n\t\t\t\twideAspect: 10 / 1,\n\t\t\t\tportraitAspect: 1 / 2,\n\t\t\t\tportraitWeight: 0.0,\n\t\t\t\twideWeight: 0.0\n\t\t\t},\n\t\t\tsize: {\n\t\t\t\twindowSize: new THREE.Vector2(),\n\t\t\t\twindowAspectRatio: 1.0,\n\t\t\t\tcanvasSize: new THREE.Vector2(),\n\t\t\t\tcanvasPixelSize: new THREE.Vector2(),\n\t\t\t\tcanvasAspectRatio: 1.0\n\t\t\t}\n\t\t};\n\n\t\tthis.commonUniforms = {\n\t\t\ttime: {\n\t\t\t\tvalue: 0\n\t\t\t}\n\t\t};\n\n\t\tthis.scene = new THREE.Scene();\n\t\tthis.camera = new THREE.PerspectiveCamera( 50, 1, 0.1, 1000 );\n\n\t}\n\n\tpublic tick( deltaTime: number ) {\n\n\t\tthis.time += deltaTime;\n\n\t\tthis.commonUniforms.time.value = this.time;\n\n\t\tif ( this.readyAnimate ) {\n\n\t\t\tthis.animate( deltaTime );\n\n\t\t}\n\n\t}\n\n\tpublic animate( deltaTime: number ) {}\n\n\tpublic onBind( layerInfo: LayerBindParam ) {\n\n\t\tthis.info.name = layerInfo.name;\n\t\tthis.info.canvas = layerInfo.canvas;\n\t\tthis.info.wrapperElement = layerInfo.wrapperElement;\n\t\tthis.info.wrapperElementRect = layerInfo.wrapperElement && layerInfo.wrapperElement.getBoundingClientRect(),\n\t\tthis.info.aspect = layerInfo.aspect || this.info.aspect;\n\n\t\tthis.renderer = new THREE.WebGLRenderer( this.info );\n\t\tthis.renderer.setPixelRatio( window.devicePixelRatio );\n    \tthis.renderer.debug.checkShaderErrors = true;\n\n\t\tsetTimeout( () => {\n\n\t\t\tthis.onResize();\n\t\t\tthis.readyAnimate = true;\n\n\t\t}, 0 );\n\n\t}\n\n\tpublic onUnbind() {\n\n\t\tthis.removeChildrens( this.scene );\n\n\t\tthis.readyAnimate = false;\n\n\t}\n\n\tprotected removeChildrens( object: THREE.Object3D ) {\n\n\t\tconst length = object.children.length;\n\n\t\tfor ( let i = length - 1; i >= 0; i -- ) {\n\n\t\t\tthis.removeChildrens( object.children[ i ] );\n\n\t\t\tlet geo: THREE.Geometry | THREE.BufferGeometry;\n\t\t\tlet mat: THREE.Material;\n\n\t\t\tif ( ( object.children[ i ] as THREE.Mesh ).isMesh ) {\n\n\t\t\t\tgeo = ( object.children[ i ] as THREE.Mesh ).geometry;\n\t\t\t\tmat = ( ( object.children[ i ] as THREE.Mesh ).material as THREE.Material );\n\n\t\t\t}\n\n\t\t\tobject.remove( ( object.children[ i ] ) );\n\n\t\t\tif ( geo ) {\n\n\t\t\t\tgeo.dispose();\n\n\t\t\t}\n\n\t\t\tif ( mat ) {\n\n\t\t\t\tmat.dispose();\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tpublic onResize() {\n\n\t\tlet newWindowSize = new THREE.Vector2( window.innerWidth, window.innerHeight );\n\t\tlet newCanvasSize = new THREE.Vector2();\n\n\t\tif ( this.info.wrapperElement ) {\n\n\t\t\tnewCanvasSize.set( this.info.wrapperElement.clientWidth, this.info.wrapperElement.clientHeight );\n\n\t\t} else {\n\n\t\t\tnewCanvasSize.copy( newWindowSize );\n\n\t\t}\n\n\t\tlet portraitWeight = 1.0 - ( ( newCanvasSize.x / newCanvasSize.y ) - this.info.aspect.portraitAspect ) / ( this.info.aspect.mainAspect - this.info.aspect.portraitAspect );\n\t\tportraitWeight = Math.min( 1.0, Math.max( 0.0, portraitWeight ) );\n\n\t\tlet wideWeight = 1.0 - ( ( newCanvasSize.x / newCanvasSize.y ) - this.info.aspect.wideAspect ) / ( this.info.aspect.mainAspect - this.info.aspect.wideAspect );\n\t\twideWeight = Math.min( 1.0, Math.max( 0.0, wideWeight ) );\n\n\t\tthis.info.size.windowSize.copy( newWindowSize );\n\t\tthis.info.size.windowAspectRatio = newWindowSize.x / newWindowSize.y;\n\t\tthis.info.size.canvasSize.copy( newCanvasSize );\n\t\tthis.info.size.canvasPixelSize.copy( newCanvasSize.clone().multiplyScalar( this.renderer.getPixelRatio() ) );\n\t\tthis.info.size.canvasAspectRatio = newCanvasSize.x / newCanvasSize.y,\n\t\tthis.info.aspect.portraitWeight = portraitWeight,\n\t\tthis.info.aspect.wideWeight = wideWeight,\n\n\t\tthis.renderer.setSize( this.info.size.canvasSize.x, this.info.size.canvasSize.y );\n\t\tthis.camera.aspect = this.info.size.canvasAspectRatio;\n\t\tthis.camera.updateProjectionMatrix();\n\n\t\tif ( this.info.wrapperElement ) {\n\n\t\t\tthis.info.wrapperElementRect = this.info.wrapperElement.getBoundingClientRect();\n\n\t\t}\n\n\t}\n\n\tpublic pointerEvent( e: PointerEventArgs ) {\n\n\t\tlet canvasPosition = e.position.clone();\n\n\t\tif ( this.info.wrapperElementRect ) {\n\n\t\t\tcanvasPosition.x -= this.info.wrapperElementRect.x;\n\t\t\tcanvasPosition.y -= this.info.wrapperElementRect.y;\n\n\t\t}\n\n\t\tlet normalizedPosition = canvasPosition.clone();\n\t\tnormalizedPosition.divide( this.info.size.canvasSize );\n\t\tnormalizedPosition.y = 1.0 - normalizedPosition.y;\n\t\tnormalizedPosition.multiplyScalar( 2.0 ).subScalar( 1.0 );\n\n\t\tlet args: TouchEventArgs = {\n\t\t\tevent: e.pointerEvent,\n\t\t\tposition: canvasPosition.clone(),\n\t\t\tdelta: e.delta.clone(),\n\t\t\tnormalizedPosition: normalizedPosition.clone(),\n\t\t\twindowPosition: e.position.clone()\n\t\t};\n\n\t\tif ( e.pointerEventType == 'hover' ) {\n\n\t\t\tthis.onHover( args );\n\n\t\t} else if ( e.pointerEventType == 'start' ) {\n\n\t\t\tthis.onTouchStart( args );\n\n\t\t} else if ( e.pointerEventType == 'move' ) {\n\n\t\t\tthis.onTouchMove( args );\n\n\t\t} else if ( e.pointerEventType == 'end' ) {\n\n\t\t\tthis.onTouchEnd( args );\n\n\t\t}\n\n\t}\n\n\tpublic onTouchStart( args: TouchEventArgs ) { }\n\n\tpublic onTouchMove( args: TouchEventArgs ) { }\n\n\tpublic onTouchEnd( args: TouchEventArgs ) { }\n\n\tpublic onHover( args: TouchEventArgs ) { }\n\n\tpublic onWheel( event: WheelEvent, trackpadDelta: number ) { }\n\n}\n","import * as THREE from \"three\";\n\nimport { Lethargy } from 'lethargy';\nimport toPx from 'to-px';\nexport class Pointer extends THREE.EventDispatcher {\n\n\tprotected isSP: boolean;\n\tprotected isTouching: boolean;\n\n\tpublic position: THREE.Vector2;\n\tpublic delta: THREE.Vector2;\n\n\tconstructor() {\n\n\t\tsuper();\n\n\t\tthis.position = new THREE.Vector2( NaN, NaN );\n\t\tthis.delta = new THREE.Vector2( NaN, NaN );\n\n\t\tlet userAgent = navigator.userAgent;\n\t\tthis.isSP = userAgent.indexOf( 'iPhone' ) >= 0 || userAgent.indexOf( 'iPad' ) >= 0 || userAgent.indexOf( 'Android' ) >= 0 || navigator.platform == \"iPad\" || ( navigator.platform == \"MacIntel\" && navigator.userAgent.indexOf( \"Safari\" ) != - 1 && navigator.userAgent.indexOf( \"Chrome\" ) == - 1 && ( navigator as any ).standalone !== undefined );\n\n\t\twindow.addEventListener( 'touchstart', this.onTouch.bind( this, \"start\" ), { passive: false } );\n\t\twindow.addEventListener( 'touchmove', this.onTouch.bind( this, \"move\" ), { passive: false } );\n\t\twindow.addEventListener( 'touchend', this.onTouch.bind( this, \"end\" ), { passive: false } );\n\n\t\twindow.addEventListener( 'pointerdown', this.onPointer.bind( this, \"start\" ) );\n\t\twindow.addEventListener( 'pointermove', this.onPointer.bind( this, \"move\" ) );\n\t\twindow.addEventListener( 'pointerup', this.onPointer.bind( this, \"end\" ) );\n\t\twindow.addEventListener( \"dragend\", this.onPointer.bind( this, \"end\" ) );\n\t\twindow.addEventListener( \"wheel\", this.wheel.bind( this ), { passive: false } );\n\n\t\tthis.position.set( NaN, NaN );\n\t\tthis.isTouching = false;\n\n\t}\n\n\tpublic getNormalizePosition( windowSize: THREE.Vector2 ) {\n\n\t\tif ( this.position.x != this.position.x ) return new THREE.Vector2( NaN, NaN );\n\n\t\tlet p = this.position.clone()\n\t\t\t.divide( windowSize )\n\t\t\t.multiplyScalar( 2.0 )\n\t\t\t.subScalar( 1.0 );\n\t\tp.y *= - 1;\n\n\t\treturn p;\n\n\t}\n\n\tpublic getRelativePosition( elm: HTMLElement, normalize?: boolean ) {\n\n\t\tlet rect: DOMRect = elm.getClientRects()[ 0 ] as DOMRect;\n\n\t\tlet pos: THREE.Vector2;\n\n\t\tlet x = pos.x - rect.left;\n\t\tlet y = pos.y - rect.top;\n\n\t\tif ( normalize ) {\n\n\t\t\tx /= rect.width;\n\t\t\ty /= rect.height;\n\n\t\t}\n\n\t\tlet p = new THREE.Vector2( x, y );\n\n\t\treturn p;\n\n\t}\n\n\tprotected setPos( x: number, y: number ) {\n\n\t\tif (\n\t\t\tthis.position.x !== this.position.x ||\n\t\t\tthis.position.y !== this.position.y\n\t\t) {\n\n\t\t\tthis.delta.set( 0, 0 );\n\n\t\t} else {\n\n\t\t\tthis.delta.set( x - this.position.x, y - this.position.y );\n\n\t\t}\n\n\t\tthis.position.set( x, y );\n\n\t}\n\n\tprotected onTouch( type: string, e: TouchEvent ) {\n\n\t\tlet touch = e.touches[ 0 ];\n\n\t\tif ( touch ) {\n\n\t\t\tthis.touchEventHandler( touch.pageX, touch.pageY, type, e );\n\n\t\t} else {\n\n\t\t\tif ( type == 'end' ) {\n\n\t\t\t\tthis.touchEventHandler( NaN, NaN, type, e );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tprotected onPointer( type: string, e: PointerEvent ) {\n\n\t\tif ( e.pointerType == 'mouse' && ( e.button == - 1 || e.button == 0 ) ) {\n\n\t\t\tthis.touchEventHandler( e.pageX, e.pageY, type, e );\n\n\t\t}\n\n\t}\n\n\tprotected touchEventHandler( posX: number, posY: number, type: string, e: Event ) {\n\n\t\tlet dispatch = false;\n\n\t\tlet x = posX - window.pageXOffset;\n\t\tlet y = posY - window.pageYOffset;\n\n\t\tif ( type == \"start\" ) {\n\n\t\t\tthis.isTouching = true;\n\n\t\t\tthis.setPos( x, y );\n\n\t\t\tthis.delta.set( 0, 0 );\n\n\t\t\tdispatch = true;\n\n\t\t} else if ( type == \"move\" ) {\n\n\t\t\tthis.setPos( x, y );\n\n\t\t\tif ( this.isTouching ) {\n\n\t\t\t\tdispatch = true;\n\n\t\t\t}\n\n\t\t} else if ( type == \"end\" ) {\n\n\t\t\tthis.isTouching = false;\n\n\t\t\tdispatch = true;\n\n\t\t}\n\n\t\tif ( dispatch ) {\n\n\t\t\tthis.dispatchEvent( {\n\t\t\t\ttype: 'update',\n\t\t\t\tpointerEvent: e,\n\t\t\t\tpointerEventType: type,\n\t\t\t\tposition: this.position.clone(),\n\t\t\t\tdelta: this.delta.clone()\n\t\t\t} );\n\n\t\t}\n\n\t}\n\n\tpublic update() {\n\n\t\tif ( ! this.isSP ) {\n\n\t\t\tthis.dispatchEvent( {\n\t\t\t\ttype: 'update',\n\t\t\t\tpointerEvent: null,\n\t\t\t\tpointerEventType: 'hover',\n\t\t\t\tposition: this.position.clone(),\n\t\t\t\tdelta: this.delta.clone()\n\t\t\t} );\n\n\t\t}\n\n\t}\n\n\tprotected trackpadMemDelta = 0;\n\tprotected trackpadMax: boolean = false;\n\tprotected lethargy = new Lethargy( 7, 0, 0.05 );\n\n\tprotected wheel( e: WheelEvent ) {\n\n\t\tlet delta = e.deltaY;\n\t\tlet trackpadDelta = 0;\n\n\t\tswitch ( e.deltaMode ) {\n\n\t\t\tcase e.DOM_DELTA_LINE:\n\t\t\t\tdelta *= toPx( 'ex', window ) * 2.5;\n\t\t\t\tbreak;\n\n\t\t\tcase e.DOM_DELTA_PAGE:\n\t\t\t\tdelta *= window.innerHeight;\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\tif ( this.lethargy.check( e ) ) {\n\n\t\t\ttrackpadDelta = delta;\n\n\t\t}\n\n\t\tthis.dispatchEvent( {\n\t\t\ttype: 'wheel',\n\t\t\twheelEvent: e,\n\t\t\ttrackpadDelta: trackpadDelta\n\t\t} );\n\n\t}\n\n}\n","import * as THREE from 'three';\nimport { Pointer } from '../utils/Pointer';\nimport { BaseLayer, LayerInfo } from './BaseLayer';\n\nexport declare interface PointerEventArgs {\n\tpointerEvent: PointerEvent;\n\tpointerEventType: string;\n\tposition: THREE.Vector2;\n\tdelta: THREE.Vector2;\n}\n\nexport declare interface ControllerParam {\n\tsilent?: boolean;\n}\n\nexport class Controller extends THREE.EventDispatcher {\n\n    public pointer: Pointer;\n\tpublic clock: THREE.Clock;\n\tprotected layers: BaseLayer[] = [];\n\n\tconstructor( parameter?: ControllerParam ) {\n\n    \tsuper();\n\n    \tif ( ! ( parameter && parameter.silent ) ) {\n\n    \t\tconsole.log( \"%c- ore-three \" + require( \"../../package.json\" ).version + \" -\", 'padding: 5px 10px ;background-color: black; color: white;font-size:11px' );\n\n    \t}\n\n    \tthis.clock = new THREE.Clock();\n\n    \tthis.pointer = new Pointer();\n    \tthis.pointer.addEventListener( 'update', this.pointerEvent.bind( this ) );\n    \tthis.pointer.addEventListener( 'wheel', this.onWheel.bind( this ) );\n\n    \twindow.addEventListener( 'orientationchange', this.onOrientationDevice.bind( this ) );\n    \twindow.addEventListener( 'resize', this.onWindowResize.bind( this ) );\n\n    \tthis.tick();\n\n\t}\n\n\tprotected tick() {\n\n    \tlet deltaTime = this.clock.getDelta();\n\n    \tthis.pointer.update();\n\n    \tfor ( let i = 0; i < this.layers.length; i ++ ) {\n\n    \t\tthis.layers[ i ].tick( deltaTime );\n\n    \t}\n\n    \trequestAnimationFrame( this.tick.bind( this ) );\n\n\t}\n\n\tpublic getLayer( layerName: string ) {\n\n    \tfor ( let i = 0; i < this.layers.length; i ++ ) {\n\n    \t\tif ( this.layers[ i ].info.name == layerName ) return this.layers[ i ];\n\n    \t}\n\n    \treturn null;\n\n\t}\n\n\tpublic addLayer( layer: BaseLayer, layerInfo: LayerInfo ) {\n\n    \twhile ( this.getLayer( layerInfo.name ) ) {\n\n    \t\tlayerInfo.name += '_';\n\n    \t}\n\n    \tlayer.onBind( layerInfo );\n    \tthis.layers.push( layer );\n\n\t}\n\n\tpublic removeLayer( layerNmae: string ) {\n\n    \tfor ( let i = this.layers.length; i >= 0; i -- ) {\n\n    \t\tlet layer = this.layers[ i ];\n\n    \t\tif ( layer.info.name == layerNmae ) {\n\n    \t\t\tthis.layers.splice( i, 1 );\n\n    \t\t}\n\n    \t}\n\n\t}\n\n\tprotected onWindowResize() {\n\n    \tfor ( let i = 0; i < this.layers.length; i ++ ) {\n\n    \t\tthis.layers[ i ].onResize();\n\n    \t}\n\n\t}\n\n\tprotected onOrientationDevice() {\n\n    \tthis.onWindowResize();\n\n\t}\n\n\tprotected pointerEvent( e: PointerEventArgs ) {\n\n    \tfor ( let i = 0; i < this.layers.length; i ++ ) {\n\n    \t\tthis.layers[ i ].pointerEvent( e );\n\n    \t}\n\n\t}\n\n\tprotected onWheel( e: { wheelEvent: WheelEvent, trackpadDelta: number } ) {\n\n    \tfor ( let i = 0; i < this.layers.length; i ++ ) {\n\n    \t\tthis.layers[ i ].onWheel( e.wheelEvent, e.trackpadDelta );\n\n    \t}\n\n\t}\n\n}\n","import * as THREE from 'three';\r\n\r\nexport interface Uniforms{ [ key: string ] : THREE.IUniform }\r\n\r\nexport namespace UniformsLib {\r\n\r\n\texport function mergeUniforms( ...uniforms: Uniforms[] ) : Uniforms {\r\n\r\n\t\tlet res = {};\r\n\r\n\t\tfor ( let i = 0; i < uniforms.length; i ++ ) {\r\n\r\n\t\t\tObject.assign( res, uniforms[ i ] );\r\n\r\n\t\t}\r\n\r\n\t\treturn res;\r\n\r\n\t}\r\n\r\n}\r\n","import * as THREE from 'three';\nimport { Easings, EasingSet } from \"./Easings\";\nimport { LerpFunc, Lerps } from \"./Lerps\";\nimport { Uniforms } from \"./Uniforms\";\n\nexport declare interface AnimatorVariable<T>{\n\ttime: number;\n\tduration?: number;\n\tvalue: T;\n\tstartValue: T;\n\tgoalValue: T;\n\tonAnimationFinished?: Function;\n\tlerpFunc: LerpFunc<T>;\n\teasing: EasingSet;\n}\n\nexport declare interface AnimatorValiableParams<T> {\n\tname: string;\n\tinitValue: T;\n\teasing?: EasingSet;\n\tcustomLerpFunc?: LerpFunc<T>;\n}\n\nexport class Animator extends THREE.EventDispatcher {\n\n\tprotected variables: { [ key: string ]: AnimatorVariable<any> };\n\tprotected _isAnimating: boolean = false;\n\tprotected animatingCount: number = 0;\n\tprotected dispatchEvents: Function[] = [];\n\n\tconstructor() {\n\n\t\tsuper();\n\n\t\tthis.variables = {};\n\n\t}\n\n\tpublic get isAnimating() {\n\n\t\treturn this._isAnimating;\n\n\t}\n\n\tpublic add<T>( params: AnimatorValiableParams<T> ) {\n\n\t\tlet lerpFunc = params.customLerpFunc || Lerps.getLerpFunc( params.initValue );\n\n\t\tlet variable = {\n\t\t\ttime: - 1,\n\t\t\tvalue: params.initValue,\n\t\t\tstartValue: params.initValue,\n\t\t\tgoalValue: null,\n\t\t\teasing: params.easing || { func: Easings.sigmoid, args: 6 },\n\t\t\tlerpFunc: lerpFunc,\n\t\t};\n\n\t\tthis.variables[ params.name ] = variable;\n\n\t\treturn variable;\n\n\t}\n\n\tpublic setEasing( name: string, easing: EasingSet ) {\n\n\t\tlet variable = this.variables[ name ];\n\n\t\tif ( variable ) {\n\n\t\t\tvariable.easing = easing;\n\n\t\t} else {\n\n\t\t\tconsole.warn( '\"' + name + '\"' + ' is not exist' );\n\n\t\t}\n\n\t}\n\n\tpublic animate<T>( name: string, goalValue: T, duration: number = 1, callback?: Function, easing?: EasingSet ) {\n\n\t\tlet variable = this.variables[ name ];\n\t\tlet promise = new Promise( resolve => {\n\n\t\t\tif ( variable ) {\n\n\t\t\t\tif ( duration <= 0 ) {\n\n\t\t\t\t\tthis.setValue( name, goalValue );\n\n\t\t\t\t\tvariable.time = 1.0;\n\t\t\t\t\tvariable.onAnimationFinished = () => {\n\n\t\t\t\t\t\tcallback && callback();\n\t\t\t\t\t\tresolve( null );\n\n\t\t\t\t\t};\n\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t\tif ( variable.time == - 1 ) {\n\n\t\t\t\t\tthis._isAnimating = true;\n\t\t\t\t\tthis.animatingCount ++;\n\n\t\t\t\t}\n\n\t\t\t\tvariable.time = 0;\n\t\t\t\tvariable.duration = duration;\n\t\t\t\tvariable.startValue = variable.value;\n\t\t\t\tvariable.goalValue = goalValue;\n\t\t\t\tvariable.onAnimationFinished = () => {\n\n\t\t\t\t\tcallback && callback();\n\t\t\t\t\tresolve( null );\n\n\t\t\t\t};\n\n\t\t\t\tif ( easing ) {\n\n\t\t\t\t\tthis.setEasing( name, easing );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( '\"' + name + '\"' + ' is not exist' );\n\n\t\t\t}\n\n\t\t} );\n\n\t\treturn promise;\n\n\t}\n\n\tpublic cancelAnimate( name: string ) {\n\n\t\tlet variable = this.variables[ name ];\n\n\t\tif ( variable ) {\n\n\t\t\tvariable.time = 1.0;\n\t\t\tvariable.onAnimationFinished = null;\n\n\t\t} else {\n\n\t\t\tconsole.warn( '\"' + name + '\"' + ' is not exist' );\n\n\t\t}\n\n\t}\n\n\tpublic setValue<T>( name: string, value: T ) {\n\n\t\tif ( this.variables[ name ] ) {\n\n\t\t\tthis.variables[ name ].value = value;\n\t\t\tthis.cancelAnimate( name );\n\n\t\t} else {\n\n\t\t\tconsole.warn( '\"' + name + '\"' + ' is not exist' );\n\n\t\t\treturn null;\n\n\t\t}\n\n\t}\n\n\tpublic get<T>( name: string ): T {\n\n\t\tif ( this.variables[ name ] ) {\n\n\t\t\treturn this.variables[ name ].value;\n\n\t\t} else {\n\n\t\t\tconsole.warn( '\"' + name + '\"' + ' is not exist' );\n\n\t\t\treturn null;\n\n\t\t}\n\n\t}\n\n\tpublic getVariableObject<T>( name: string, mute: boolean = false ): AnimatorVariable<T> {\n\n\t\tif ( this.variables[ name ] ) {\n\n\t\t\treturn this.variables[ name ];\n\n\t\t} else {\n\n\t\t\tif ( ! mute ) {\n\n\t\t\t\tconsole.warn( '\"' + name + '\"' + ' is not exist' );\n\n\t\t\t}\n\n\t\t\treturn null;\n\n\t\t}\n\n\t}\n\n\tpublic isAnimatingVariable( name: string, mute: boolean = false ) {\n\n\t\tif ( this.variables[ name ] ) {\n\n\t\t\tlet time = this.variables[ name ].time;\n\n\t\t\treturn time != - 1.0;\n\n\t\t} else {\n\n\t\t\tif ( ! mute ) {\n\n\t\t\t\tconsole.warn( '\"' + name + '\"' + ' is not exist' );\n\n\t\t\t}\n\n\t\t\treturn null;\n\n\t\t}\n\n\t}\n\n\tpublic applyToUniforms( uniforms: Uniforms ) {\n\n\t\tlet keys = Object.keys( this.variables );\n\n\t\tfor ( let i = 0; i < keys.length; i ++ ) {\n\n\t\t\tuniforms[ keys[ i ] ] = this.getVariableObject( keys[ i ] );\n\n\t\t}\n\n\t}\n\n\tpublic update( deltaTime?: number ) {\n\n\t\tif ( this.animatingCount == 0 ) {\n\n\t\t\tthis._isAnimating = false;\n\n\t\t}\n\n\t\tlet keys = Object.keys( this.variables );\n\n\t\tfor ( let i = 0; i < keys.length; i ++ ) {\n\n\t\t\tlet variable = this.variables[ keys[ i ] ];\n\n\t\t\tif ( variable.time == 1.0 ) {\n\n\t\t\t\tthis.animatingCount --;\n\t\t\t\tvariable.time = - 1;\n\n\t\t\t\tif ( variable.onAnimationFinished ) {\n\n\t\t\t\t\tthis.dispatchEvents.push( variable.onAnimationFinished );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( variable.time >= 0.0 && variable.time < 1.0 ) {\n\n\t\t\t\tvariable.time += ( deltaTime || 0.016 ) / variable.duration;\n\n\t\t\t\tif ( variable.duration == 0 || variable.time >= 1.0 ) {\n\n\t\t\t\t\tvariable.time = 1.0;\n\n\t\t\t\t}\n\n\t\t\t\tlet t = variable.time;\n\n\t\t\t\tif ( variable.easing ) {\n\n\t\t\t\t\tt = variable.easing.func( t, variable.easing.args );\n\n\t\t\t\t}\n\n\t\t\t\tvariable.value = variable.lerpFunc( variable.startValue, variable.goalValue, t );\n\n\t\t\t\tthis.dispatchEvent( {\n\t\t\t\t\ttype: 'update/' + keys[ i ],\n\t\t\t\t\tdeltaTime: deltaTime\n\t\t\t\t} );\n\n\t\t\t\tif ( variable.time == 1.0 ) {\n\n\t\t\t\t\tvariable.value = variable.goalValue;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\twhile ( this.dispatchEvents.length != 0 ) {\n\n\t\t\tthis.dispatchEvents.pop()();\n\n\t\t}\n\n\t\tif ( this._isAnimating ) {\n\n\t\t\tthis.dispatchEvent( {\n\t\t\t\ttype: 'update',\n\t\t\t\tdeltaTime: deltaTime\n\t\t\t} );\n\n\t\t}\n\n\t}\n\n}\n","import * as ORE from '../../';\nimport * as THREE from 'three';\n\nimport vert from './shaders/background.vs';\nimport { LayerSize as LayerSizeInfo } from '../../core/BaseLayer';\n\nexport class Background extends THREE.Mesh {\n\n\tprotected uniforms: ORE.Uniforms;\n\n\tconstructor( param: THREE.ShaderMaterialParameters ) {\n\n\t\tlet geo = new THREE.BufferGeometry();\n\n\t\tlet posArray = [];\n\t\tlet indexArray = [];\n\t\tlet uvArray = [];\n\n\t\tposArray.push( - 1, 1, 0 );\n\t\tposArray.push( 1, 1, 0 );\n\t\tposArray.push( 1, - 1, 0 );\n\t\tposArray.push( - 1, - 1, 0 );\n\n\t\tuvArray.push( 0, 1 );\n\t\tuvArray.push( 1, 1 );\n\t\tuvArray.push( 1, 0 );\n\t\tuvArray.push( 0, 0 );\n\n\t\tindexArray.push( 0, 2, 1, 0, 3, 2 );\n\n\t\tlet pos = new Float32Array( posArray );\n\t\tlet indices = new Uint32Array( indexArray );\n\t\tlet uv = new Float32Array( uvArray );\n\n\t\tgeo.setAttribute( 'position', new THREE.BufferAttribute( pos, 3 ) );\n\t\tgeo.setAttribute( 'uv', new THREE.BufferAttribute( uv, 2 ) );\n\t\tgeo.setIndex( new THREE.BufferAttribute( indices, 1 ) );\n\n\t\tparam.vertexShader = param.vertexShader || vert;\n\t\tparam.transparent = param.transparent != undefined ? param.transparent : true;\n\t\tparam.depthFunc = param.depthFunc != undefined ? param.depthFunc : THREE.NeverDepth;\n\n\t\tlet mat = new THREE.ShaderMaterial( param );\n\n\t\tsuper( geo, mat );\n\n\t\tthis.uniforms = param.uniforms || {};\n\n\t\tthis.frustumCulled = false;\n\n\t}\n\n\tpublic resize( args: LayerSizeInfo ) {\n\n\t\tthis.uniforms.resolution = { value: args.canvasSize };\n\t\tthis.uniforms.aspectRatio = { value: args.canvasAspectRatio };\n\n\t}\n\n}\n","export default \"#define GLSLIFY 1\\nvarying vec2 vUv;\\nvarying vec4 vColor;\\n\\nvoid main( void ) {\\n    \\n    vec3 pos = position;\\n\\n    pos.z = 1.0;\\n    \\n    gl_Position = vec4( pos, 1.0 );\\n    \\n    vUv = uv;\\n    vColor = vec4( 1.0 );\\n\\n}\";","import * as THREE from 'three';\nimport vert from './domMesh.vs';\nimport { Uniforms, UniformsLib } from '../Uniforms';\n\nexport class DOMMesh extends THREE.Mesh {\n\n\tprotected _uniforms: Uniforms;\n\tprotected element: HTMLElement;\n\n\tconstructor( element: HTMLElement, parameter: THREE.ShaderMaterialParameters ) {\n\n\t\tlet geo = new THREE.PlaneBufferGeometry( 2, 2 );\n\n\t\tparameter.vertexShader = vert;\n\n\t\tlet uni = UniformsLib.mergeUniforms( parameter.uniforms, {\n\t\t\tdomPos: {\n\t\t\t\tvalue: new THREE.Vector2()\n\t\t\t},\n\t\t\tdomSize: {\n\t\t\t\tvalue: new THREE.Vector2()\n\t\t\t},\n\t\t\twindowSize: {\n\t\t\t\tvalue: new THREE.Vector2()\n\t\t\t},\n\t\t\taspectRatio: {\n\t\t\t\tvalue: 1.0\n\t\t\t}\n\t\t} );\n\n\t\tparameter.uniforms = uni;\n\n\t\tlet mat = new THREE.ShaderMaterial( parameter );\n\n\t\tsuper( geo, mat );\n\n\t\tthis.frustumCulled = false;\n\n\t\tthis._uniforms = uni;\n\n\t\tthis.element = element;\n\n\t\tthis.update();\n\n\t}\n\n\tpublic get uniforms() {\n\n\t\treturn this._uniforms;\n\n\t}\n\n\tpublic update() {\n\n\t\tlet rect = this.element.getBoundingClientRect();\n\n\t\tthis._uniforms.windowSize.value.set( window.innerWidth, window.innerHeight );\n\t\tthis._uniforms.aspectRatio.value = window.innerWidth / window.innerHeight;\n\t\tthis._uniforms.domSize.value.set( rect.width, rect.height );\n\t\tthis._uniforms.domPos.value.set( rect.left, rect.top );\n\n\t}\n\n}\n","export default \"#define GLSLIFY 1\\nvarying vec2 vUv;\\nuniform vec2 domPos;\\nuniform vec2 domSize;\\nuniform vec2 windowSize;\\nuniform float aspectRatio;\\n\\nvoid main(  )\\n{\\n  float width = domSize.x / windowSize.x;\\n\\n  //( 0,0 )\\n  vec3 pos = position + vec3( 1.0,-1.0,0.0 );\\n\\n  //size\\n  pos.x *= width;\\n  pos.y *= ( width * aspectRatio ) * ( domSize.y / domSize.x );\\n\\n  pos += vec3( -1.0, 1.0, 0.0 );\\n\\n  pos += vec3( domPos.x / windowSize.x * 2.0, -domPos.y / windowSize.y * 2.0, 0.0 );\\n\\n  gl_Position = vec4( pos, 1.0 );\\n  vUv = uv;\\n}\\n\";","export declare interface Event {\n\ttype: string;\n\t[key:string]: any;\n}\n\nexport declare interface EventListener {\n\ttype: string,\n\tlistener: ( e: Event ) => void,\n}\n\nexport class EventDispatcher {\n\n\tprivate events: EventListener[] = [];\n\n\tconstructor() {\n\n\t}\n\n\tpublic addEventListener( type: string, listener: ( e: Event ) => void ) {\n\n\t\tthis.events.push( {\n\t\t\ttype: type,\n\t\t\tlistener: listener\n\t\t} );\n\n\t}\n\n\tpublic dispatchEvent( event: Event ) {\n\n\t\tevent.target = this;\n\n\t\tfor ( let i = 0; i < this.events.length; i ++ ) {\n\n\t\t\tif ( event.type == this.events[ i ].type ) {\n\n\t\t\t\tthis.events[ i ].listener( event );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tpublic removeEventListener( type: string, listener: Function ) {\n\n\t\tfor ( let i = this.events.length; i >= 0; i -- ) {\n\n\t\t\tif ( type == this.events[ i ].type && listener == this.events[ i ].listener ) {\n\n\t\t\t\tthis.events.splice( i, 1 );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n}\n","import * as THREE from 'three';\n\nimport vert from './shaders/passThrough.vs';\nimport passThroughFrag from './shaders/passThrough.fs';\nimport { Uniforms, UniformsLib } from '../Uniforms';\n\nexport interface GPUComputationKernel{\n    material: THREE.RawShaderMaterial,\n    uniforms: any,\n}\n\nexport interface GPUcomputationData{\n    buffer: THREE.WebGLRenderTarget\n}\n\nexport class GPUComputationController {\n\n\tprotected renderer: THREE.WebGLRenderer;\n\tpublic dataSize: THREE.Vector2;\n\tprotected uniforms: any;\n\n    protected scene: THREE.Scene;\n    protected camera: THREE.Camera;\n\n    protected mesh: THREE.Mesh;\n    protected materials: THREE.ShaderMaterial[];\n\n    protected tempDataLinear: GPUcomputationData;\n    protected tempDataNear: GPUcomputationData;\n\n\tprivate renderTargets: THREE.WebGLRenderTarget[] = [];\n\n\tpublic get isSupported() : boolean {\n\n    \treturn this.renderer.extensions.get( \"OES_texture_float\" );\n\n\t}\n\n\tconstructor( renderer: THREE.WebGLRenderer, dataSize: THREE.Vector2 ) {\n\n    \tthis.renderer = renderer;\n    \tthis.dataSize = dataSize.clone();\n\n    \tthis.uniforms = {\n    \t\tdataSize: {\n    \t\t\tvalue: this.dataSize\n    \t\t}\n    \t};\n\n    \tthis.tempDataLinear = this.createData( {\n    \t\tminFilter: THREE.LinearFilter,\n    \t\tmagFilter: THREE.LinearFilter\n    \t} );\n\n    \tthis.tempDataNear = this.createData( {\n    \t\tminFilter: THREE.NearestFilter,\n    \t\tmagFilter: THREE.NearestFilter\n    \t} );\n\n    \tthis.scene = new THREE.Scene();\n    \tthis.camera = new THREE.Camera();\n\n    \tthis.materials = [];\n    \tthis.mesh = new THREE.Mesh( new THREE.PlaneBufferGeometry( 2, 2 ) );\n    \tthis.scene.add( this.mesh );\n\n\t}\n\n\tpublic createInitializeTexture() {\n\n    \tlet a = new Float32Array( this.uniforms.dataSize.value.x * this.uniforms.dataSize.value.y * 4 );\n    \tlet texture = new THREE.DataTexture( a, this.uniforms.dataSize.value.x, this.uniforms.dataSize.value.y, THREE.RGBAFormat, THREE.FloatType );\n    \ttexture.needsUpdate = true;\n\n    \treturn texture;\n\n\t}\n\n\tpublic createData(): GPUcomputationData;\n\n\tpublic createData( initializeTexture: THREE.DataTexture ): GPUcomputationData;\n\n\tpublic createData( textureParam: THREE.WebGLRenderTargetOptions ): GPUcomputationData;\n\n\tpublic createData( initializeTexture: THREE.DataTexture, textureParam: THREE.WebGLRenderTargetOptions ): GPUcomputationData;\n\n\tpublic createData( initTex_texParam?: any, textureParam? : THREE.WebGLRenderTargetOptions ): GPUcomputationData {\n\n    \tlet userAgent = navigator.userAgent;\n    \tlet isiOS = userAgent.indexOf( 'iPhone' ) >= 0 || userAgent.indexOf( 'iPad' ) >= 0 || navigator.platform == \"iPad\" || ( navigator.platform == \"MacIntel\" && navigator.userAgent.indexOf( \"Safari\" ) != - 1 && navigator.userAgent.indexOf( \"Chrome\" ) == - 1 && ( navigator as any ).standalone !== undefined );\n\n    \tlet param: THREE.WebGLRenderTargetOptions = {\n    \t\twrapS: THREE.ClampToEdgeWrapping,\n    \t\twrapT: THREE.ClampToEdgeWrapping,\n    \t\tminFilter: THREE.NearestFilter,\n    \t\tmagFilter: THREE.NearestFilter,\n    \t\tformat: THREE.RGBAFormat,\n    \t\ttype: isiOS ? THREE.HalfFloatType : THREE.FloatType,\n    \t\tstencilBuffer: false,\n    \t\tdepthBuffer: false\n    \t};\n    \tlet initTex: THREE.DataTexture;\n    \tlet customParam: THREE.WebGLRenderTargetOptions;\n\n    \tif ( initTex_texParam ) {\n\n    \t\tif ( initTex_texParam.isDataTexture ) {\n\n    \t\t\tinitTex = initTex_texParam;\n\n    \t\t\tif ( textureParam ) {\n\n    \t\t\t\tcustomParam = textureParam;\n\n    \t\t\t}\n\n    \t\t} else {\n\n    \t\t\tcustomParam = initTex_texParam;\n\n    \t\t}\n\n    \t}\n\n    \tif ( customParam ) {\n\n    \t\tparam.wrapS = customParam.wrapS || param.wrapS;\n    \t\tparam.wrapT = customParam.wrapT || param.wrapT;\n    \t\tparam.minFilter = customParam.minFilter || param.minFilter;\n    \t\tparam.magFilter = customParam.magFilter || param.magFilter;\n    \t\tparam.format = customParam.format || param.format;\n    \t\tparam.type = customParam.type || param.type;\n    \t\tparam.stencilBuffer = customParam.stencilBuffer || param.stencilBuffer;\n    \t\tparam.depthBuffer = customParam.depthBuffer || param.depthBuffer;\n\n    \t}\n\n    \tlet buf = new THREE.WebGLRenderTarget( this.uniforms.dataSize.value.x, this.uniforms.dataSize.value.y, param );\n\n\t\tlet data = { buffer: buf };\n\n\t\tthis.renderTargets.push( buf );\n\n    \tif ( initTex ) {\n\n    \t\tlet initKernel = this.createKernel( {\n\t\t\t\tfragmentShader: passThroughFrag\n\t\t\t} );\n\n    \t\tinitKernel.uniforms.tex = { value: initTex };\n\n    \t\tthis.compute( initKernel, data );\n\n    \t}\n\n    \treturn data;\n\n\t}\n\n\tpublic createKernel( param: THREE.ShaderMaterialParameters ): GPUComputationKernel {\n\n    \tlet uni: Uniforms = UniformsLib.mergeUniforms( param.uniforms, {} );\n    \tuni = UniformsLib.mergeUniforms( this.uniforms, uni );\n\n\t\tparam.vertexShader = param.vertexShader || vert;\n\n    \tlet mat = new THREE.ShaderMaterial( param );\n\n    \tthis.materials.push( mat );\n\n    \tlet kernel: GPUComputationKernel = {\n    \t\tmaterial: mat,\n    \t\tuniforms: uni\n    \t};\n\n    \treturn kernel;\n\n\t}\n\n\tpublic compute( kernel: GPUComputationKernel, data: GPUcomputationData, camera?: THREE.Camera ) {\n\n    \tlet temp: GPUcomputationData;\n\n    \tif ( data.buffer.texture.magFilter == THREE.LinearFilter ) {\n\n    \t\ttemp = this.tempDataLinear;\n\n    \t} else {\n\n    \t\ttemp = this.tempDataNear;\n\n    \t}\n\n    \tthis.mesh.material = kernel.material;\n\n    \tlet currentRenderTarget = this.renderer.getRenderTarget();\n\n    \tthis.renderer.setRenderTarget( temp.buffer );\n\n    \tthis.renderer.render( this.scene, camera || this.camera );\n\n    \tthis.swapBuffers( data, temp );\n\n    \tthis.renderer.setRenderTarget( currentRenderTarget );\n\n\t}\n\n\tprotected swapBuffers( b1: GPUcomputationData, b2: GPUcomputationData ) {\n\n    \tlet tmp = b1.buffer;\n    \tb1.buffer = b2.buffer;\n    \tb2.buffer = tmp;\n\n\t}\n\n\tpublic dispose() {\n\n    \tlet geo = this.mesh.geometry;\n    \tgeo.dispose();\n\n    \tfor ( let i = 0; i < this.materials.length; i ++ ) {\n\n    \t\tthis.materials[ i ].dispose();\n\n    \t}\n\n    \tthis.scene.remove( this.mesh );\n\n    \tthis.tempDataLinear.buffer.dispose();\n    \tthis.tempDataNear.buffer.dispose();\n\n\t}\n\n\tpublic resizeData( dataSize: THREE.Vector2 ) {\n\n\t\tthis.dataSize.copy( dataSize );\n\n\t\tfor ( let i = 0; i < this.renderTargets.length; i ++ ) {\n\n\t\t\tlet target = this.renderTargets[ i ];\n\n\t\t\ttarget.setSize( dataSize.x, dataSize.y );\n\n\t\t}\n\n\t}\n\n}\n","export default \"#define GLSLIFY 1\\nuniform sampler2D tex;\\nvarying vec2 vUv;\\n\\nvoid main() {\\n    gl_FragColor = texture2D(tex,vUv);\\n}\";","export default \"#define GLSLIFY 1\\nvarying vec2 vUv;\\n\\nvoid main() {\\n    gl_Position = vec4( position, 1.0 );\\n    vUv = uv;\\n}\";","import * as THREE from 'three';\n\nexport class MouseRotator {\n\n\tpublic target: THREE.Object3D;\n\tpublic scrollVel: THREE.Vector2;\n\n\tconstructor( objs: THREE.Object3D ) {\n\n\t\tthis.target = objs;\n\n\t\tthis.scrollVel = new THREE.Vector2();\n\n\t}\n\n\tupdate() {\n\n\t\tthis.scrollVel.multiplyScalar( 0.96 );\n\n\t\tlet axis = new THREE.Vector3( this.scrollVel.y, this.scrollVel.x, 0.0 ).normalize();\n\n\t\tlet q = new THREE.Quaternion().setFromAxisAngle( axis, this.scrollVel.length() );\n\t\tq.multiply( this.target.quaternion );\n\n\t\tthis.target.quaternion.copy( q );\n\n\t}\n\n\taddVelocity( scrollDelta: THREE.Vector2 ) {\n\n\t\tthis.scrollVel.addVectors( this.scrollVel, scrollDelta.multiplyScalar( 0.001 ) );\n\n\t}\n\n}\n","import * as THREE from 'three';\n\nimport passThrowVert from './shaders/passThrow.vs';\n\ntype InputRenderTarget = { [key:string]: THREE.Texture | THREE.Texture[] };\n\nexport interface PPParam extends THREE.ShaderMaterialParameters{\n\tinputRenderTargets?: string\n}\n\nexport class PostProcessing {\n\n\tprivate renderer: THREE.WebGLRenderer;\n\tprivate scene: THREE.Scene;\n\tprivate camera: THREE.OrthographicCamera;\n\tprivate screen: THREE.Mesh;\n\n\tpublic effect: {\n\t\tmaterial: THREE.ShaderMaterial,\n\t};\n\n\tconstructor( renderer: THREE.WebGLRenderer, material: PPParam ) {\n\n\t\tthis.renderer = renderer;\n\t\tthis.scene = new THREE.Scene();\n\t\tthis.camera = new THREE.OrthographicCamera( - 1.0, 1.0, 1.0, - 1.0 );\n\n\t\tthis.screen = new THREE.Mesh( new THREE.PlaneBufferGeometry( 2, 2 ) );\n\t\tthis.scene.add( this.screen );\n\n\t\tthis.createMaterials( material );\n\n\t}\n\n\tprivate createMaterials( params: PPParam ) {\n\n\t\tlet param = params;\n\n\t\tparam.vertexShader = param.vertexShader || passThrowVert;\n\t\tparam.uniforms = param.uniforms || {};\n\t\tparam.uniforms.resolution = {\n\t\t\tvalue: new THREE.Vector2()\n\t\t};\n\n\t\tthis.effect = {\n\t\t\tmaterial: new THREE.ShaderMaterial( param ),\n\t\t};\n\n\t}\n\n\tpublic render( inputRenderTargets: InputRenderTarget, renderTarget: THREE.WebGLRenderTarget ) {\n\n\t\tlet renderTargetMem = this.renderer.getRenderTarget();\n\n\t\tlet effect = this.effect;\n\t\tlet material = effect.material;\n\t\tlet uniforms = material.uniforms;\n\n\t\tif ( inputRenderTargets ) {\n\n\t\t\tlet keys = Object.keys( inputRenderTargets );\n\n\t\t\tfor ( let j = 0; j < keys.length; j ++ ) {\n\n\t\t\t\tif ( uniforms[ keys[ j ] ] ) {\n\n\t\t\t\t\tuniforms[ keys[ j ] ].value = inputRenderTargets[ keys[ j ] ];\n\n\t\t\t\t} else {\n\n\t\t\t\t\tuniforms[ keys[ j ] ] = { value: inputRenderTargets[ keys[ j ] ] };\n\n\t\t\t\t\teffect.material.needsUpdate = true;\n\n\t\t\t\t\teffect.material.uniforms = uniforms;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( renderTarget ) {\n\n\t\t\tuniforms.resolution.value.set( renderTarget.width, renderTarget.height );\n\n\t\t} else {\n\n\t\t\tthis.renderer.getSize( uniforms.resolution.value );\n\n\t\t}\n\n\t\tthis.screen.material = material;\n\n\t\tthis.renderer.setRenderTarget( renderTarget );\n\n\t\tthis.renderer.render( this.scene, this.camera );\n\n\t\tthis.renderer.setRenderTarget( renderTargetMem );\n\n\t}\n\n}\n","export default \"#define GLSLIFY 1\\nvarying vec2 vUv;\\nvoid main() {\\n    vUv = uv;\\n    gl_Position = vec4( position, 1.0 );\\n}   \";","import * as THREE from 'three';\r\nimport { PageScrollerSection, PageScrollerSectionParams, PageScrollerEventArgs } from './PageScrollerSection';\r\nimport { EasingSet, Easings } from '../Easings';\r\nimport { Animator } from '../Animator';\r\n\r\nexport declare interface PageScrollerAutoMoveParam {\r\n\ttarget: string | number | PageScrollerSection;\r\n\tduration?: number;\r\n\teasing?: EasingSet;\r\n\tcallBack?: Function;\r\n\tbottom?: boolean;\r\n}\r\n\r\nexport class PageScroller {\r\n\r\n\tprotected animator: Animator;\r\n\tprotected isAutoMove: boolean;\r\n\r\n\tprotected parentElement: HTMLElement;\r\n\tprotected parentElementHeight: number;\r\n\r\n\tprotected sections: PageScrollerSection[];\r\n\r\n\tpublic delaySpeed: number = 0.1;\r\n\tpublic dragDelaySpeed: number = 0.4;\r\n\tprotected isTouching: boolean = false;\r\n\tprotected deltaMem: number = 0;\r\n\r\n\tprotected scrollReady: boolean = false;\r\n\tprotected sumDelta: number = 0;\r\n\r\n\tprotected _scrollPos: number = 0;\r\n\tprotected _scrollPosMem: number;\r\n\tprotected _scrollPercentage: number = 0;\r\n\r\n\tprotected _scrollPosDelay: number = 0;\r\n\tprotected _scrollPercentageDelay: number = 0;\r\n\r\n\tprotected caughtSection: PageScrollerSection;\r\n\tprotected dragStop: boolean = false;\r\n\tprotected dragUnlockReady: boolean = true;\r\n\r\n\tconstructor( parentElement: HTMLElement ) {\r\n\r\n\t\tthis.parentElement = parentElement;\r\n\r\n\t\tthis.sections = [];\r\n\r\n\t\tthis.initAnimator();\r\n\r\n\t}\r\n\r\n\tprotected initAnimator() {\r\n\r\n\t\tthis.animator = new Animator();\r\n\r\n\t\tthis.animator.add( {\r\n\t\t\tname: 'scrollPos',\r\n\t\t\tinitValue: 0,\r\n\t\t\teasing: {\r\n\t\t\t\tfunc: Easings.sigmoid,\r\n\t\t\t\targs: 4\r\n\t\t\t}\r\n\t\t} );\r\n\r\n\t}\r\n\r\n\tpublic get scrollPos() {\r\n\r\n\t\treturn this._scrollPos;\r\n\r\n\t}\r\n\r\n\tpublic get scrollPosDelay() {\r\n\r\n\t\treturn this._scrollPosDelay;\r\n\r\n\t}\r\n\r\n\tpublic get scrollPercentage() {\r\n\r\n\t\treturn this._scrollPercentage;\r\n\r\n\t}\r\n\r\n\tpublic get scrollPercentageDelay() {\r\n\r\n\t\treturn this._scrollPercentageDelay;\r\n\r\n\t}\r\n\r\n\tpublic get scrollTimelinePercentage() {\r\n\r\n\t\tlet sum = 0;\r\n\r\n\t\tfor ( let i = 0; i < this.sections.length; i ++ ) {\r\n\r\n\t\t\tlet sec = this.sections[ i ];\r\n\t\t\tlet secBef = this.sections[ i - 1 ];\r\n\r\n\t\t\tlet a = Math.max( 0.0, sec.element.offsetTop - this.scrollPosDelay + ( sec.bottom ? sec.rect.height - window.innerHeight : 0 ) );\r\n\t\t\tlet b = ( ( secBef ? secBef.rect.height - ( secBef.bottom ? window.innerHeight : 0 ) : 0 ) + ( sec.bottom ? sec.rect.height - window.innerHeight : 0 ) ) || 1;\r\n\r\n\t\t\tlet d = 1.0 - ( a / b );\r\n\t\t\td = Math.max( 0.0, d );\r\n\r\n\t\t\tsum += d;\r\n\r\n\t\t\tif ( d < 1.0 ) break;\r\n\r\n\t\t}\r\n\r\n\t\treturn sum / this.sections.length;\r\n\r\n\t}\r\n\r\n\tpublic add( section: PageScrollerSection ) {\r\n\r\n\t\tthis.sections.push( section );\r\n\r\n\t\tthis.sortSections();\r\n\r\n\t}\r\n\r\n\tpublic sortSections() {\r\n\r\n\t\tthis.sections.sort( ( a: PageScrollerSection, b: PageScrollerSection ): number => {\r\n\r\n\t\t\treturn a.rect.y > b.rect.y ? 1 : - 1;\r\n\r\n\t\t} );\r\n\r\n\t\tfor ( let i = 0; i < this.sections.length; i ++ ) {\r\n\r\n\t\t\tthis.sections[ i ].timelinePercentage = ( i + 1 ) / this.sections.length;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tpublic get( name: string ) {\r\n\r\n\t\tfor ( let i = 0; i < this.sections.length; i ++ ) {\r\n\r\n\t\t\tif ( this.sections[ i ].name == name ) return this.sections[ i ];\r\n\r\n\t\t}\r\n\r\n\t\tconsole.warn( 'section \"' + name + '\" is not exist.' );\r\n\r\n\t\treturn null;\r\n\r\n\t}\r\n\r\n\tpublic update( deltaTime: number ) {\r\n\r\n\t\tthis.updateParentElement();\r\n\r\n\t\tthis.updateScrollPos( deltaTime );\r\n\r\n\t\tthis.applyParentElementTransform();\r\n\r\n\t\tthis.sumDelta = 0.0;\r\n\r\n\t}\r\n\r\n\tprotected updateScrollPos( deltaTime: number ) {\r\n\r\n\t\tthis.updateAutoMove( deltaTime );\r\n\r\n\t\tthis.addScrollPos();\r\n\r\n\t\tthis.calcScrollProperties( deltaTime );\r\n\r\n\t}\r\n\r\n\tprotected updateAutoMove( deltaTime ) {\r\n\r\n\t\tthis.animator.update( deltaTime );\r\n\r\n\t\tif ( this.isAutoMove ) {\r\n\r\n\t\t\tthis.sumDelta = this.animator.get<number>( 'scrollPos' ) - this.scrollPos;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tprotected addScrollPos() {\r\n\r\n\t\tif ( this.checkUnlockStopScroll( this.sumDelta ) ) {\r\n\r\n\t\t\tlet stopPos = this.checkThrow( this.sumDelta );\r\n\r\n\t\t\tif ( stopPos !== null ) {\r\n\r\n\t\t\t\tthis._scrollPos = stopPos;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthis._scrollPos += this.sumDelta;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis._scrollPos = Math.max( Math.min( this._scrollPos, this.parentElementHeight - window.innerHeight ), 0 );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tprotected checkUnlockStopScroll( scrollDelta: number ) {\r\n\r\n\t\tlet unlockDir: number = 0;\r\n\t\tlet unlock: boolean = false;\r\n\r\n\t\tif ( this.caughtSection ) {\r\n\r\n\t\t\tlet distance = this.scrollPos - this.scrollPosDelay;\r\n\r\n\t\t\tif ( scrollDelta * distance < 0 || Math.abs( distance ) < 10.0 || this.isAutoMove ) {\r\n\r\n\t\t\t\tif ( scrollDelta < 0 ) {\r\n\r\n\t\t\t\t\tif ( - scrollDelta > ( this.caughtSection.startScrollUp || 0 ) || this.isAutoMove ) {\r\n\r\n\t\t\t\t\t\tunlockDir = - 1;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else if ( scrollDelta > 0 ) {\r\n\r\n\t\t\t\t\tif ( scrollDelta > ( this.caughtSection.startScrollDown || 0 ) || this.isAutoMove ) {\r\n\r\n\t\t\t\t\t\tunlockDir = 1;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( unlockDir != 0 && this.caughtSection.events ) {\r\n\r\n\t\t\t\tif ( this.caughtSection.events.onStartScroll ) {\r\n\r\n\t\t\t\t\tlet args: PageScrollerEventArgs = {\r\n\t\t\t\t\t\tscroller: this,\r\n\t\t\t\t\t\tsection: this.caughtSection,\r\n\t\t\t\t\t\tscrollMode: this.isAutoMove ? 'auto' : 'manual',\r\n\t\t\t\t\t\tscrollDelta: scrollDelta,\r\n\t\t\t\t\t\tscrollPower: Math.abs( scrollDelta ),\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\tlet unlock: boolean | void;\r\n\r\n\t\t\t\t\tlet commonUnlock = this.caughtSection.events.onStartScroll.common && this.caughtSection.events.onStartScroll.common( args );\r\n\t\t\t\t\tif ( unlockDir == - 1 ) unlock = this.caughtSection.events.onStartScroll.up && this.caughtSection.events.onStartScroll.up( args );\r\n\t\t\t\t\tif ( unlockDir == 1 ) unlock = this.caughtSection.events.onStartScroll.down && this.caughtSection.events.onStartScroll.down( args );\r\n\r\n\t\t\t\t\tif ( commonUnlock === false || unlock === false ) {\r\n\r\n\t\t\t\t\t\tunlockDir = 0;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tunlock = unlockDir != 0;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tunlock = true;\r\n\r\n\t\t}\r\n\r\n\t\tif ( unlockDir ) {\r\n\r\n\t\t\tthis.caughtSection = null;\r\n\r\n\t\t}\r\n\r\n\t\treturn unlock;\r\n\r\n\t}\r\n\r\n\tprotected checkThrow( scrollDelta: number ) {\r\n\r\n\t\tfor ( let i = 0; i < this.sections.length; i ++ ) {\r\n\r\n\t\t\tlet sec = this.sections[ i ];\r\n\r\n\t\t\tsec.updateRect( this._scrollPos );\r\n\r\n\t\t\tlet stopPos = this.checkThrowSectionEvents( sec, scrollDelta );\r\n\r\n\t\t\tif ( stopPos !== null ) {\r\n\r\n\t\t\t\tthis.caughtSection = sec;\r\n\r\n\t\t\t\treturn this.isAutoMove ? null : stopPos;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\r\n\t}\r\n\r\n\tprotected checkThrowSectionEvents( section: PageScrollerSection, scrollDelta: number ) {\r\n\r\n\t\tlet percentage = section.getScrollPercentage();\r\n\t\tlet movedPercentage = section.getScrollPercentage( scrollDelta );\r\n\r\n\t\tif ( section.events ) {\r\n\r\n\t\t\tlet args: PageScrollerEventArgs = {\r\n\t\t\t\tscroller: this,\r\n\t\t\t\tsection: section,\r\n\t\t\t\tscrollMode: this.isAutoMove ? 'auto' : 'manual',\r\n\t\t\t\tscrollDelta: scrollDelta,\r\n\t\t\t\tscrollPower: Math.abs( scrollDelta ),\r\n\t\t\t};\r\n\r\n\t\t\tlet arrivalEvents = section.events.onArrivals && section.events.onArrivals.length || 0;\r\n\r\n\t\t\tfor ( let i = 0; i < arrivalEvents; i ++ ) {\r\n\r\n\t\t\t\tlet arrivalEvent = section.events.onArrivals[ i ];\r\n\r\n\t\t\t\tlet isThrow = this.checkThrowLine( percentage, movedPercentage, arrivalEvent.percentage );\r\n\r\n\t\t\t\tif ( isThrow != 0 ) {\r\n\r\n\t\t\t\t\tarrivalEvent.event.common && arrivalEvent.event.common( args );\r\n\r\n\t\t\t\t\tif ( isThrow < 0 ) {\r\n\r\n\t\t\t\t\t\tarrivalEvent.event.up && arrivalEvent.event.up( args );\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tarrivalEvent.event.down && arrivalEvent.event.down( args );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( section.stop ) {\r\n\r\n\t\t\tif ( this.checkThrowLine( percentage, movedPercentage, 1 ) ) {\r\n\r\n\t\t\t\tthis.dragUnlockReady = false;\r\n\r\n\t\t\t\treturn section.element.offsetTop + ( section.bottom ? section.rect.height - window.innerHeight : 0 );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\r\n\t}\r\n\r\n\tprotected checkThrowLine( a: number, b :number, line: number ) {\r\n\r\n\t\tif ( a < line && line <= b ) {\r\n\r\n\t\t\treturn 1;\r\n\r\n\t\t} else if ( a > line && line >= b ) {\r\n\r\n\t\t\treturn - 1;\r\n\r\n\t\t} else if ( a == line && line == b ) {\r\n\r\n\t\t\treturn 2;\r\n\r\n\t\t} else {\r\n\r\n\t\t\treturn 0;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tprotected calcScrollProperties( deltaTime ) {\r\n\r\n\t\tthis._scrollPosDelay += ( this._scrollPos - this._scrollPosDelay ) * ( this.isTouching && ! this.caughtSection ? this.dragDelaySpeed : this.delaySpeed ) * Math.min( 1.0, deltaTime * 60 );\r\n\r\n\t\tthis._scrollPercentage = this.scrollPosToPerecntage( this.scrollPos );\r\n\r\n\t\tthis._scrollPercentageDelay = this.scrollPosToPerecntage( this.scrollPosDelay );\r\n\r\n\t}\r\n\r\n\tprotected scrollPosToPerecntage( scrollPos: number ) {\r\n\r\n\t\treturn scrollPos / ( this.parentElementHeight - window.innerHeight );\r\n\r\n\t}\r\n\r\n\r\n\tprotected updateParentElement() {\r\n\r\n\t\tthis.parentElementHeight = this.parentElement.getBoundingClientRect().height;\r\n\r\n\t}\r\n\r\n\tprotected applyParentElementTransform() {\r\n\r\n\t\tthis.parentElement.style.transform = 'translate3d( 0,' + - this.scrollPosDelay.toString() + 'px, 0 )';\r\n\r\n\t}\r\n\r\n\tpublic scroll( delta: number ) {\r\n\r\n\t\tthis.deltaMem = ( this.deltaMem + delta ) / 2;\r\n\t\tthis.sumDelta += delta;\r\n\r\n\t}\r\n\r\n\tpublic catch() {\r\n\r\n\t\tif ( this.isAutoMove ) return;\r\n\r\n\t\tthis.isTouching = true;\r\n\t\tthis.deltaMem = 0;\r\n\r\n\t\tif ( ! this.caughtSection ) {\r\n\r\n\t\t\tthis._scrollPos = this._scrollPosDelay;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tpublic drag( delta: number ) {\r\n\r\n\t\tif ( ! this.isTouching ) return;\r\n\r\n\t\tthis.scroll( delta );\r\n\r\n\t}\r\n\r\n\tpublic release( snap: number = 10.0 ) {\r\n\r\n\t\tif ( ! this.isTouching ) return;\r\n\r\n\t\tthis.isTouching = false;\r\n\r\n\t\tif ( ! this.caughtSection ) {\r\n\r\n\t\t\tthis.scroll( this.deltaMem * snap );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tpublic autoMove( param: PageScrollerAutoMoveParam ) {\r\n\r\n\t\tlet targetPos: number;\r\n\r\n\t\tif ( ( param.target as PageScrollerSection ).isPageScrollerSection ) {\r\n\r\n\t\t\tlet target = param.target as PageScrollerSection;\r\n\t\t\tlet bottomOffset = param.bottom ? target.rect.height - window.innerHeight : 0;\r\n\r\n\t\t\ttargetPos = target.element.offsetTop + bottomOffset;\r\n\r\n\t\t} else if ( typeof param.target == 'string' ) {\r\n\r\n\t\t\tlet target = this.get( param.target );\r\n\t\t\tlet bottomOffset = param.bottom ? target.rect.height - window.innerHeight : 0;\r\n\r\n\t\t\ttargetPos = target.element.offsetTop + bottomOffset;\r\n\r\n\t\t} else if ( typeof param.target == 'number' ) {\r\n\r\n\t\t\ttargetPos = param.target;\r\n\r\n\t\t}\r\n\r\n\t\tthis.animator.setValue( 'scrollPos', this._scrollPos );\r\n\t\tthis.animator.animate( 'scrollPos', targetPos, param.duration, () => {\r\n\r\n\t\t\tif ( param.callBack ) param.callBack();\r\n\r\n\t\t\tthis.isAutoMove = false;\r\n\r\n\t\t}, param.easing );\r\n\r\n\t\t//onStartScrollAutoMove\r\n\t\tthis.sumDelta = ( targetPos - this.sumDelta ) / Math.abs( targetPos - this.sumDelta ) * 0.00001;\r\n\r\n\t\tthis.isAutoMove = true;\r\n\r\n\t}\r\n\r\n}\r\n","import * as THREE from 'three';\r\nimport { PageScroller } from '.';\r\n\r\nexport declare interface PageScrollerEventArgs {\r\n\tscroller: PageScroller;\r\n\tsection: PageScrollerSection;\r\n\tscrollMode: string;\r\n\tscrollDelta: number;\r\n\tscrollPower: number;\r\n}\r\n\r\ndeclare interface PageScrollerEvent {\r\n\tcommon?: ( args: PageScrollerEventArgs ) => void | boolean;\r\n\tup?: ( args: PageScrollerEventArgs ) => void | boolean;\r\n\tdown?: ( args: PageScrollerEventArgs ) => void | boolean;\r\n}\r\n\r\ndeclare interface PageScrollerEvents {\r\n\tonStartScroll?: PageScrollerEvent\r\n\tonArrivals?: {\r\n\t\tpercentage: number;\r\n\t\tevent: PageScrollerEvent;\r\n\t}[]\r\n}\r\n\r\nexport declare interface PageScrollerSectionParams {\r\n\tname: string;\r\n\telement: HTMLElement;\r\n\tevents?: PageScrollerEvents;\r\n\tstop?: boolean;\r\n\tstartScrollUp?: number;\r\n\tstartScrollDown?: number;\r\n\tbottom?: boolean;\r\n}\r\n\r\ndeclare interface PageScrollerSectionRect {\r\n\tx: number;\r\n\ty: number;\r\n\twidth: number;\r\n\theight: number;\r\n}\r\n\r\nexport class PageScrollerSection {\r\n\r\n\tpublic name: string;\r\n\tpublic element: HTMLElement;\r\n\tpublic rect: PageScrollerSectionRect;\r\n\tpublic stop: boolean;\r\n\tpublic startScrollUp: number;\r\n\tpublic startScrollDown: number;\r\n\tpublic events: PageScrollerEvents;\r\n\tpublic bottom: boolean;\r\n\tpublic timelinePercentage: number = 0;\r\n\r\n\tconstructor( params: PageScrollerSectionParams ) {\r\n\r\n\t\tthis.name = params.name;\r\n\t\tthis.element = params.element;\r\n\t\tthis.stop = params.stop;\r\n\t\tthis.events = params.events;\r\n\t\tthis.bottom = params.bottom;\r\n\t\tthis.startScrollDown = params.startScrollDown || 0;\r\n\t\tthis.startScrollUp = params.startScrollUp || 0;\r\n\r\n\t\tthis.updateRect( 0 );\r\n\r\n\t}\r\n\r\n\tpublic get isPageScrollerSection() {\r\n\r\n\t\treturn true;\r\n\r\n\t}\r\n\r\n\tpublic updateRect( scrollPos: number ) {\r\n\r\n\t\tthis.rect = {\r\n\t\t\tx: this.element.offsetLeft,\r\n\t\t\ty: this.element.offsetTop - scrollPos,\r\n\t\t\twidth: this.element.offsetWidth,\r\n\t\t\theight: this.element.offsetHeight\r\n\t\t};\r\n\r\n\t}\r\n\r\n\tpublic getScrollPercentage( offsetPos?: number ) {\r\n\r\n\t\tlet bottomOffset = ( this.bottom ? this.rect.height - window.innerHeight : 0 );\r\n\t\tlet pos = ( this.rect.y + bottomOffset ) - ( offsetPos || 0 );\r\n\r\n\t\tlet firstHalfHeight = this.bottom ? this.rect.height : window.innerHeight;\r\n\t\tlet firstHalf = Math.min( 1.0, 1.0 - ( pos / firstHalfHeight ) );\r\n\r\n\t\tlet secondHalfHeight = this.bottom ? window.innerHeight : this.rect.height;\r\n\t\tlet secondHalf = Math.max( 0.0, - pos / secondHalfHeight );\r\n\r\n\t\tlet percentage = firstHalf + secondHalf;\r\n\r\n\t\treturn percentage;\r\n\r\n\t}\r\n\r\n}\r\n","import * as THREE from 'three';\n\nexport declare interface Transform {\n\tposition?: THREE.Vector3;\n\trotation?: THREE.Quaternion;\n\tscale?: number;\n}\n\nexport class LayoutController {\n\n\tprotected obj: THREE.Object3D;\n\tprotected baseTransform: Transform;\n\tprotected baseScale: THREE.Vector3;\n\tprotected transform: Transform;\n\n\tconstructor( object: THREE.Object3D, transform: Transform, isAbsolutePosition?: boolean ) {\n\n\t\tthis.obj = object;\n\n\t\tthis.baseTransform = {\n\t\t\tposition: this.obj.position.clone(),\n\t\t\trotation: this.obj.quaternion.clone(),\n\t\t};\n\t\tthis.baseScale = this.obj.scale.clone();\n\n\t\tthis.transform = transform;\n\n\t\tif ( ! isAbsolutePosition ) {\n\n\t\t\tthis.transform.position && this.transform.position.add( this.obj.position );\n\t\t\tthis.transform.rotation && this.transform.rotation.multiply( this.obj.quaternion );\n\n\t\t}\n\n\t}\n\n\tpublic updateTransform( weight: number ) {\n\n\t\tif ( this.transform.position ) {\n\n\t\t\tthis.obj.position.copy( this.baseTransform.position.clone().lerp( this.transform.position, weight ) );\n\n\t\t}\n\n\t\tif ( this.transform.rotation ) {\n\n\t\t\tthis.obj.quaternion.copy( this.baseTransform.rotation.clone().slerp( this.transform.rotation, weight ) );\n\n\t\t}\n\n\t\tif ( this.transform.scale ) {\n\n\t\t\tthis.obj.scale.copy( this.baseScale.clone().multiplyScalar( this.transform.scale * ( weight ) + 1.0 - weight ) );\n\n\t\t}\n\n\t}\n\n}\n","import * as THREE from 'three';\r\nimport { EasingSet } from './Easings';\r\nimport { Lerps, LerpFunc } from './Lerps';\r\n\r\nexport declare interface TimelineAnimatorKeyFrame<T> {\r\n\ttime: number;\r\n\tvalue: T;\r\n\teasing?: EasingSet;\r\n}\r\n\r\nexport declare interface TimelineAnimatorVariable<T> {\r\n\tkeyframes: TimelineAnimatorKeyFrame<T>[];\r\n\tlerpFunc: LerpFunc<T>;\r\n\tvalue: T;\r\n\teasing?: EasingSet;\r\n}\r\n\r\nexport declare interface TimelineAnimatorAddParams<T> {\r\n\tname: string;\r\n\tkeyframes: TimelineAnimatorKeyFrame<T>[];\r\n\tcustomLerp?: LerpFunc<T>,\r\n\teasing?: EasingSet;\r\n}\r\nexport class TimelineAnimator {\r\n\r\n\tprotected variables: { [name: string]: TimelineAnimatorVariable<any> } = {};\r\n\tprotected time: number;\r\n\tpublic defaultEasing: EasingSet;\r\n\r\n\tconstructor( ) {\r\n\r\n\t\tthis.time = 0;\r\n\r\n\t}\r\n\r\n\tpublic add<T>( params: TimelineAnimatorAddParams<T> ) {\r\n\r\n\t\tif ( params.keyframes.length == 0 ) {\r\n\r\n\t\t\tconsole.warn( '\"' + params.name + '\"', 'Keyframe length is 0!!' );\r\n\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tthis.variables[ params.name ] = {\r\n\t\t\tkeyframes: params.keyframes,\r\n\t\t\tlerpFunc: params.customLerp,\r\n\t\t\teasing: params.easing,\r\n\t\t\tvalue: null\r\n\t\t};\r\n\r\n\t\tthis.variables[ params.name ].keyframes.sort( ( a, b ) => {\r\n\r\n\t\t\treturn ( a.time < b.time ) ? - 1 : 1;\r\n\r\n\t\t} );\r\n\r\n\t\tif ( ! this.variables[ params.name ].lerpFunc ) {\r\n\r\n\t\t\tthis.variables[ params.name ].lerpFunc = Lerps.getLerpFunc( params.keyframes[ 0 ].value );\r\n\r\n\t\t}\r\n\r\n\t\tthis.calc();\r\n\r\n\t\treturn params.name;\r\n\r\n\t}\r\n\r\n\tpublic get<T>( name: string ): T {\r\n\r\n\t\tif ( this.variables[ name ] ) {\r\n\r\n\t\t\treturn this.variables[ name ].value;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconsole.warn( '\"' + name + '\"' + ' is not exist' );\r\n\r\n\t\t\treturn null;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tpublic getVariableObject<T>( name: string ): TimelineAnimatorVariable<T> {\r\n\r\n\t\tif ( this.variables[ name ] ) {\r\n\r\n\t\t\treturn this.variables[ name ];\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconsole.warn( '\"' + name + '\"' + ' is not exist' );\r\n\r\n\t\t\treturn null;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tpublic update( time: number ) {\r\n\r\n\t\tthis.time = time;\r\n\r\n\t\tthis.calc();\r\n\r\n\t}\r\n\r\n\tprotected calc() {\r\n\r\n\t\tlet keys = Object.keys( this.variables );\r\n\r\n\t\tfor ( let i = 0; i < keys.length; i ++ ) {\r\n\r\n\t\t\tlet valiable = this.variables[ keys[ i ] ];\r\n\t\t\tlet kfs = valiable.keyframes;\r\n\r\n\t\t\tlet a: TimelineAnimatorKeyFrame<any>;\r\n\t\t\tlet b: TimelineAnimatorKeyFrame<any>;\r\n\r\n\t\t\tlet t = Math.max( kfs[ 0 ].time, Math.min( kfs[ kfs.length - 1 ].time, this.time ) );\r\n\r\n\t\t\tlet easing: EasingSet;\r\n\r\n\t\t\tif ( kfs.length == 1 ) {\r\n\r\n\t\t\t\tt = kfs[ 0 ].time;\r\n\t\t\t\ta = b = kfs[ 0 ];\r\n\r\n\t\t\t} else {\r\n\r\n\r\n\t\t\t\tfor ( let j = 0; j < kfs.length - 1; j ++ ) {\r\n\r\n\t\t\t\t\ta = kfs[ j ];\r\n\t\t\t\t\tb = kfs[ j + 1 ];\r\n\r\n\t\t\t\t\teasing = a.easing;\r\n\r\n\t\t\t\t\tif ( a.time <= t && t <= b.time ) break;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tt = ( t - a.time ) / ( b.time - a.time );\r\n\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( easing ) {\r\n\r\n\t\t\t\tt = easing.func( t, easing.args );\r\n\r\n\t\t\t} else if ( valiable.easing ) {\r\n\r\n\t\t\t\tt = valiable.easing.func( t, valiable.easing.args );\r\n\r\n\t\t\t} else if ( this.defaultEasing ) {\r\n\r\n\t\t\t\tt = this.defaultEasing.func( t, this.defaultEasing.args );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( valiable.lerpFunc ) {\r\n\r\n\t\t\t\tvaliable.value = valiable.lerpFunc( a.value, b.value, t );\r\n\r\n\t\t\t\tif ( valiable.value === false ) {\r\n\r\n\t\t\t\t\tconsole.log( 'error at ' + '\"' + keys[ i ] + '\"' );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tconsole.warn( '\"' + keys[ i ] + '\"', 'lerp function is not set.' );\r\n\r\n\t\t\t}\r\n\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n","module.exports = __WEBPACK_EXTERNAL_MODULE__807__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tif(__webpack_module_cache__[moduleId]) {\n\t\treturn __webpack_module_cache__[moduleId].exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// module exports must be returned from runtime so entry inlining is disabled\n// startup\n// Load entry module and return exports\nreturn __webpack_require__(250);\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => module['default'] :\n\t\t() => module;\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop)","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};"],"sourceRoot":""}