{"version":3,"sources":["webpack://ORE/webpack/universalModuleDefinition","webpack://ORE/./node_modules/lethargy/lethargy.js","webpack://ORE/./node_modules/parse-unit/index.js","webpack://ORE/./node_modules/to-px/browser.js","webpack://ORE/./src/utils/Easings.ts","webpack://ORE/./src/utils/Lerps.ts","webpack://ORE/./src/core/BaseLayer.ts","webpack://ORE/./src/utils/Pointer.ts","webpack://ORE/./src/core/Controller.ts","webpack://ORE/./src/utils/Uniforms.ts","webpack://ORE/./src/utils/Animator.ts","webpack://ORE/./src/utils/Background/index.ts","webpack://ORE/./src/utils/Background/shaders/background.vs","webpack://ORE/./src/utils/DOMMesh/index.ts","webpack://ORE/./src/utils/DOMMesh/domMesh.vs","webpack://ORE/./src/utils/EventDispatcher.ts","webpack://ORE/./src/utils/GPUComputationController/index.ts","webpack://ORE/./src/utils/GPUComputationController/shaders/passThrough.fs","webpack://ORE/./src/utils/GPUComputationController/shaders/passThrough.vs","webpack://ORE/./src/utils/MouseRotator.ts","webpack://ORE/./src/utils/PostProcessing/index.ts","webpack://ORE/./src/utils/PostProcessing/shaders/passThrow.vs","webpack://ORE/./src/utils/PageScroller/index.ts","webpack://ORE/./src/utils/PageScroller/PageScrollerSection.ts","webpack://ORE/./src/utils/LayoutController.ts","webpack://ORE/./src/utils/TimelineAnimator.ts","webpack://ORE/external {\"commonjs\":\"three\",\"commonjs2\":\"three\",\"amd\":\"three\",\"root\":\"THREE\"}","webpack://ORE/webpack/bootstrap","webpack://ORE/webpack/startup","webpack://ORE/webpack/runtime/define property getters","webpack://ORE/webpack/runtime/hasOwnProperty shorthand","webpack://ORE/webpack/runtime/make namespace object"],"names":["root","factory","exports","module","require","define","amd","self","__WEBPACK_EXTERNAL_MODULE__807__","this","Lethargy","stability","sensitivity","tolerance","delay","Math","abs","lastUpDeltas","i","ref","results","push","call","lastDownDeltas","deltasTimestamp","prototype","check","e","lastDelta","originalEvent","wheelDelta","deltaY","detail","Date","now","shift","isInertia","direction","lastDeltas","lastDeltasNew","lastDeltasOld","newAverage","newSum","oldAverage","oldSum","slice","reduce","t","s","length","showLastUpDeltas","showLastDownDeltas","str","out","String","num","parseFloat","match","parseUnit","toPX","PIXELS_PER_INCH","getSizeBrutal","document","body","getPropertyInPX","element","prop","parts","getComputedStyle","getPropertyValue","unit","testDIV","createElement","style","appendChild","size","removeChild","trim","toLowerCase","window","clientHeight","innerWidth","innerHeight","min","max","isNaN","px","Easings","Lerps","readyAnimate","time","info","name","aspect","mainAspect","wideAspect","portraitAspect","portraitWeight","wideWeight","windowSize","windowAspectRatio","canvasSize","canvasPixelSize","canvasAspectRatio","commonUniforms","value","scene","camera","tick","deltaTime","animate","onBind","layerInfo","canvas","wrapperElement","wrapperElementRect","getBoundingClientRect","alpha","renderer","setPixelRatio","devicePixelRatio","debug","checkShaderErrors","setTimeout","onResize","onUnbind","removeChildrens","object","children","geo","undefined","mat","isMesh","geometry","material","remove","dispose","newWindowSize","newCanvasSize","set","clientWidth","copy","x","y","clone","multiplyScalar","getPixelRatio","setSize","updateProjectionMatrix","pointerEvent","canvasPosition","position","normalizedPosition","divide","subScalar","args","event","delta","windowPosition","pointerEventType","onHover","onTouchStart","onTouchMove","onTouchEnd","onWheel","trackpadDelta","toPx","trackpadMemDelta","trackpadMax","lethargy","NaN","userAgent","navigator","isSP","indexOf","platform","standalone","addEventListener","onTouch","bind","passive","onPointer","wheel","isTouching","getNormalizePosition","p","getRelativePosition","elm","normalize","rect","getClientRects","left","top","width","height","setPos","type","touch","touches","touchEventHandler","pageX","pageY","pointerType","button","posX","posY","dispatch","pageXOffset","pageYOffset","dispatchEvent","update","deltaMode","DOM_DELTA_LINE","DOM_DELTA_PAGE","wheelEvent","parameter","layers","silent","console","log","clock","pointer","Pointer","onOrientationDevice","onWindowResize","getDelta","requestAnimationFrame","getLayer","layerName","addLayer","layer","removeLayer","layerNmae","splice","sigmoid","weight","variables","e1","exp","e2","smoothstep","lerpNumber","a","b","linear","easeInQuad","easeOutQuad","easeInOutQuad","easeInCubic","easeOutCubic","easeInOutCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint","number","numberArray","c","THREEVectors","lerp","THREEQuaternion","slerp","THREEEuler","ac","bc","z","getLerpFunc","Array","isVector2","isVector3","isVector4","isColor","isQuaternion","isEuler","UniformsLib","_isAnimating","animatingCount","dispatchEvents","add","params","lerpFunc","customLerpFunc","initValue","variable","startValue","goalValue","easing","func","setEasing","warn","duration","callback","Promise","resolve","setValue","onAnimationFinished","cancelAnimate","get","getVariableObject","mute","isAnimatingVariable","applyToUniforms","uniforms","keys","Object","pop","param","posArray","indexArray","uvArray","pos","Float32Array","indices","Uint32Array","uv","setAttribute","setIndex","vertexShader","transparent","depthFunc","frustumCulled","resize","resolution","aspectRatio","mergeUniforms","res","assign","uni","domPos","domSize","_uniforms","events","listener","target","removeEventListener","dataSize","renderTargets","tempDataLinear","createData","minFilter","magFilter","tempDataNear","materials","mesh","extensions","createInitializeTexture","texture","needsUpdate","initTex_texParam","textureParam","isiOS","wrapS","wrapT","format","stencilBuffer","depthBuffer","initTex","customParam","isDataTexture","buf","data","buffer","initKernel","createKernel","fragmentShader","tex","compute","kernel","temp","currentRenderTarget","getRenderTarget","setRenderTarget","render","swapBuffers","b1","b2","tmp","resizeData","objs","scrollVel","axis","q","setFromAxisAngle","multiply","quaternion","addVelocity","scrollDelta","addVectors","ppParam","screen","effect","inputRenderTargets","renderTarget","renderTargetMem","j","getSize","parentElement","isAutoMove","delaySpeed","dragDelaySpeed","deltaMem","scrollReady","sumDelta","_scrollPos","_scrollPosMem","_scrollPercentage","_scrollPosDelay","_scrollPercentageDelay","dragStop","dragUnlockReady","parentElementHeight","sections","caughtSection","animator","Animator","sum","sec","secBef","d","offsetTop","scrollPosDelay","bottom","section","sortSections","sort","timelinePercentage","updateParentElement","updateScrollPos","applyParentElementTransform","updateAutoMove","addScrollPos","calcScrollProperties","scrollPos","checkUnlockStopScroll","stopPos","checkThrow","unlockDir","unlock","distance","startScrollUp","startScrollDown","onStartScroll","scroller","scrollMode","scrollPower","commonUnlock","common","up","down","updateRect","checkThrowSectionEvents","percentage","getScrollPercentage","movedPercentage","onArrivals","arrivalEvent","isThrow","checkThrowLine","stop","line","scrollPosToPerecntage","transform","toString","scroll","catch","drag","release","snap","autoMove","targetPos","isPageScrollerSection","bottomOffset","callBack","offsetLeft","offsetWidth","offsetHeight","offsetPos","firstHalfHeight","firstHalf","secondHalfHeight","isAbsolutePosition","obj","baseTransform","rotation","scale","updateTransform","keyframes","customLerp","calc","valiable","kfs","defaultEasing","__webpack_module_cache__","__webpack_require__","moduleId","__webpack_modules__","definition","key","o","defineProperty","enumerable","hasOwnProperty","r","Symbol","toStringTag"],"mappings":"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","file":"ore-three-ts.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"three\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"three\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"ORE\"] = factory(require(\"three\"));\n\telse\n\t\troot[\"ORE\"] = factory(root[\"THREE\"]);\n})(self, function(__WEBPACK_EXTERNAL_MODULE__807__) {\nreturn ","// Generated by CoffeeScript 1.9.2\n(function() {\n  var root;\n\n  root = typeof exports !== \"undefined\" && exports !== null ? exports : this;\n\n  root.Lethargy = (function() {\n    function Lethargy(stability, sensitivity, tolerance, delay) {\n      this.stability = stability != null ? Math.abs(stability) : 8;\n      this.sensitivity = sensitivity != null ? 1 + Math.abs(sensitivity) : 100;\n      this.tolerance = tolerance != null ? 1 + Math.abs(tolerance) : 1.1;\n      this.delay = delay != null ? delay : 150;\n      this.lastUpDeltas = (function() {\n        var i, ref, results;\n        results = [];\n        for (i = 1, ref = this.stability * 2; 1 <= ref ? i <= ref : i >= ref; 1 <= ref ? i++ : i--) {\n          results.push(null);\n        }\n        return results;\n      }).call(this);\n      this.lastDownDeltas = (function() {\n        var i, ref, results;\n        results = [];\n        for (i = 1, ref = this.stability * 2; 1 <= ref ? i <= ref : i >= ref; 1 <= ref ? i++ : i--) {\n          results.push(null);\n        }\n        return results;\n      }).call(this);\n      this.deltasTimestamp = (function() {\n        var i, ref, results;\n        results = [];\n        for (i = 1, ref = this.stability * 2; 1 <= ref ? i <= ref : i >= ref; 1 <= ref ? i++ : i--) {\n          results.push(null);\n        }\n        return results;\n      }).call(this);\n    }\n\n    Lethargy.prototype.check = function(e) {\n      var lastDelta;\n      e = e.originalEvent || e;\n      if (e.wheelDelta != null) {\n        lastDelta = e.wheelDelta;\n      } else if (e.deltaY != null) {\n        lastDelta = e.deltaY * -40;\n      } else if ((e.detail != null) || e.detail === 0) {\n        lastDelta = e.detail * -40;\n      }\n      this.deltasTimestamp.push(Date.now());\n      this.deltasTimestamp.shift();\n      if (lastDelta > 0) {\n        this.lastUpDeltas.push(lastDelta);\n        this.lastUpDeltas.shift();\n        return this.isInertia(1);\n      } else {\n        this.lastDownDeltas.push(lastDelta);\n        this.lastDownDeltas.shift();\n        return this.isInertia(-1);\n      }\n      return false;\n    };\n\n    Lethargy.prototype.isInertia = function(direction) {\n      var lastDeltas, lastDeltasNew, lastDeltasOld, newAverage, newSum, oldAverage, oldSum;\n      lastDeltas = direction === -1 ? this.lastDownDeltas : this.lastUpDeltas;\n      if (lastDeltas[0] === null) {\n        return direction;\n      }\n      if (this.deltasTimestamp[(this.stability * 2) - 2] + this.delay > Date.now() && lastDeltas[0] === lastDeltas[(this.stability * 2) - 1]) {\n        return false;\n      }\n      lastDeltasOld = lastDeltas.slice(0, this.stability);\n      lastDeltasNew = lastDeltas.slice(this.stability, this.stability * 2);\n      oldSum = lastDeltasOld.reduce(function(t, s) {\n        return t + s;\n      });\n      newSum = lastDeltasNew.reduce(function(t, s) {\n        return t + s;\n      });\n      oldAverage = oldSum / lastDeltasOld.length;\n      newAverage = newSum / lastDeltasNew.length;\n      if (Math.abs(oldAverage) < Math.abs(newAverage * this.tolerance) && (this.sensitivity < Math.abs(newAverage))) {\n        return direction;\n      } else {\n        return false;\n      }\n    };\n\n    Lethargy.prototype.showLastUpDeltas = function() {\n      return this.lastUpDeltas;\n    };\n\n    Lethargy.prototype.showLastDownDeltas = function() {\n      return this.lastDownDeltas;\n    };\n\n    return Lethargy;\n\n  })();\n\n}).call(this);\n","module.exports = function parseUnit(str, out) {\n    if (!out)\n        out = [ 0, '' ]\n\n    str = String(str)\n    var num = parseFloat(str, 10)\n    out[0] = num\n    out[1] = str.match(/[\\d.\\-\\+]*\\s*(.*)/)[1] || ''\n    return out\n}","'use strict'\n\nvar parseUnit = require('parse-unit')\n\nmodule.exports = toPX\n\nvar PIXELS_PER_INCH = getSizeBrutal('in', document.body) // 96\n\n\nfunction getPropertyInPX(element, prop) {\n  var parts = parseUnit(getComputedStyle(element).getPropertyValue(prop))\n  return parts[0] * toPX(parts[1], element)\n}\n\n//This brutal hack is needed\nfunction getSizeBrutal(unit, element) {\n  var testDIV = document.createElement('div')\n  testDIV.style['height'] = '128' + unit\n  element.appendChild(testDIV)\n  var size = getPropertyInPX(testDIV, 'height') / 128\n  element.removeChild(testDIV)\n  return size\n}\n\nfunction toPX(str, element) {\n  if (!str) return null\n\n  element = element || document.body\n  str = (str + '' || 'px').trim().toLowerCase()\n  if(element === window || element === document) {\n    element = document.body\n  }\n\n  switch(str) {\n    case '%':  //Ambiguous, not sure if we should use width or height\n      return element.clientHeight / 100.0\n    case 'ch':\n    case 'ex':\n      return getSizeBrutal(str, element)\n    case 'em':\n      return getPropertyInPX(element, 'font-size')\n    case 'rem':\n      return getPropertyInPX(document.body, 'font-size')\n    case 'vw':\n      return window.innerWidth/100\n    case 'vh':\n      return window.innerHeight/100\n    case 'vmin':\n      return Math.min(window.innerWidth, window.innerHeight) / 100\n    case 'vmax':\n      return Math.max(window.innerWidth, window.innerHeight) / 100\n    case 'in':\n      return PIXELS_PER_INCH\n    case 'cm':\n      return PIXELS_PER_INCH / 2.54\n    case 'mm':\n      return PIXELS_PER_INCH / 25.4\n    case 'pt':\n      return PIXELS_PER_INCH / 72\n    case 'pc':\n      return PIXELS_PER_INCH / 6\n    case 'px':\n      return 1\n  }\n\n  // detect number of units\n  var parts = parseUnit(str)\n  if (!isNaN(parts[0]) && parts[1]) {\n    var px = toPX(parts[1], element)\n    return typeof px === 'number' ? parts[0] * px : null\n  }\n\n  return null\n}\n","export declare interface EasingSet{\n\tfunc: Function;\n\targs?: number | number[];\n}\n\nexport namespace Easings {\n\n\texport function sigmoid( x: number, ...variables: number[] ): number {\n\n\t\tlet weight = 6;\n\n\t\tif ( variables[ 0 ] ) {\n\n\t\t\tweight = variables[ 0 ];\n\n\t\t}\n\n\t\tvar e1 = Math.exp( - weight * ( 2 * x - 1 ) );\n\t\tvar e2 = Math.exp( - weight );\n\n\t\treturn ( 1 + ( 1 - e1 ) / ( 1 + e1 ) * ( 1 + e2 ) / ( 1 - e2 ) ) / 2;\n\n\t}\n\n\texport function smoothstep( min: number, max: number, value: number ): number {\n\n\t\tlet x = Math.max( 0, Math.min( 1, value - min / ( max - min ) ) );\n\n\t\treturn x * x * ( 3 - 2 * x );\n\n\t}\n\n\texport function lerpNumber( a: number, b: number, t: number ): number {\n\n\t\treturn ( 1.0 - t ) * a + t * b;\n\n\t}\n\n\t/*\n\t@auther https://gist.github.com/gre/1650294\n\t*/\n\n\texport function linear( t: number ) {\n\n\t\treturn t;\n\n\t}\n\n\t// accelerating from zero velocity\n\texport function easeInQuad( t: number ) {\n\n\t\treturn t * t;\n\n\t}\n\n\t// decelerating to zero velocity\n\texport function easeOutQuad( t: number ) {\n\n\t\treturn t * ( 2 - t );\n\n\t}\n\n\t// acceleration until halfway, then deceleration\n\texport function easeInOutQuad( t: number ) {\n\n\t\treturn t < .5 ? 2 * t * t : - 1 + ( 4 - 2 * t ) * t;\n\n\t}\n\n\t// accelerating from zero velocity\n\texport function easeInCubic( t: number ) {\n\n\t\treturn t * t * t;\n\n\t}\n\n\t// decelerating to zero velocity\n\texport function easeOutCubic( t: number ) {\n\n\t\treturn ( -- t ) * t * t + 1;\n\n\t}\n\n\t// acceleration until halfway, then deceleration\n\texport function easeInOutCubic( t: number ) {\n\n\t\treturn t < .5 ? 4 * t * t * t : ( t - 1 ) * ( 2 * t - 2 ) * ( 2 * t - 2 ) + 1;\n\n\t}\n\n\t// accelerating from zero velocity\n\texport function easeInQuart( t: number ) {\n\n\t\treturn t * t * t * t;\n\n\t}\n\n\t// decelerating to zero velocity\n\texport function easeOutQuart( t: number ) {\n\n\t\treturn 1 - ( -- t ) * t * t * t;\n\n\t}\n\n\t// acceleration until halfway, then deceleration\n\texport function easeInOutQuart( t: number ) {\n\n\t\treturn t < .5 ? 8 * t * t * t * t : 1 - 8 * ( -- t ) * t * t * t;\n\n\t}\n\n\t// accelerating from zero velocity\n\texport function easeInQuint( t: number ) {\n\n\t\treturn t * t * t * t * t;\n\n\t}\n\n\t// decelerating to zero velocity\n\texport function easeOutQuint( t: number ) {\n\n\t\treturn 1 + ( -- t ) * t * t * t * t;\n\n\t}\n\n\t// acceleration until halfway, then deceleration\n  \texport function easeInOutQuint( t: number ) {\n\n  \t\treturn t < .5 ? 16 * t * t * t * t * t : 1 + 16 * ( -- t ) * t * t * t * t;\n\n  \t}\n\n}\n","export declare interface LerpFunc<T>{\n\t( a: T, b: T, t: number ): T;\n}\n\nexport namespace Lerps {\n\n\texport function number( a: number, b: number, t: number ) {\n\n\t\treturn a + ( b - a ) * t;\n\n\t}\n\n\texport function numberArray( a: number[], b: number[], t: number ) {\n\n\t\tif ( a.length == b.length ) {\n\n\t\t\tlet c = [];\n\n\t\t\tfor ( let i = 0; i < a.length; i ++ ) {\n\n\t\t\t\tc.push( a[ i ] + ( b[ i ] - a[ i ] ) * t );\n\n\t\t\t}\n\n\t\t\treturn c;\n\n\t\t} else {\n\n\t\t\tconsole.log( 'Different length Arrays!!!' );\n\n\t\t\treturn false;\n\n\t\t}\n\n\t}\n\n\texport function THREEVectors( a: THREE.Vector2 & THREE.Vector3 & THREE.Vector4 & THREE.Color, b: THREE.Vector2 & THREE.Vector3 & THREE.Vector4 & THREE.Color, t: number ) {\n\n\t\treturn a.clone().lerp( b, t );\n\n\t}\n\n\texport function THREEQuaternion( a: THREE.Quaternion, b: THREE.Quaternion, t: number ) {\n\n\t\treturn a.clone().slerp( b, t );\n\n\t}\n\n\texport function THREEEuler( a: THREE.Euler, b: THREE.Euler, t: number ) {\n\n\t\tlet ac = a.clone();\n\t\tlet bc = b.clone();\n\n\t\tac.x = ac.x + ( bc.x - ac.x ) * t;\n\t\tac.y = ac.y + ( bc.y - ac.y ) * t;\n\t\tac.z = ac.z + ( bc.z - ac.z ) * t;\n\n\t\treturn ac;\n\n\t}\n\n\texport function getLerpFunc( value: any ) {\n\n\t\tif ( typeof ( value ) == 'number' ) {\n\n\t\t\treturn Lerps.number;\n\n\t\t} else if ( value instanceof Array && typeof ( value[ 0 ] ) == 'number' ) {\n\n\t\t\treturn Lerps.numberArray;\n\n\t\t} else if ( value.isVector2 | value.isVector3 | value.isVector4 | value.isColor ) {\n\n\t\t\treturn Lerps.THREEVectors;\n\n\t\t} else if ( value.isQuaternion ) {\n\n\t\t\treturn Lerps.THREEQuaternion;\n\n\t\t} else if ( value.isEuler ) {\n\n\t\t\treturn Lerps.THREEEuler;\n\n\t\t}\n\n\t}\n\n}\n","import * as THREE from 'three';\n\nimport { Uniforms } from '../utils/Uniforms';\nimport { PointerEventArgs } from './Controller';\n\nexport declare interface LayerBindParam extends THREE.WebGLRendererParameters {\n\tname: string;\n\tcanvas?: HTMLCanvasElement;\n\taspect?: AspectInfo;\n\twrapperElement?: HTMLElement;\n\twrapperElementRect?: DOMRect;\n}\n\nexport declare interface LayerInfo extends LayerBindParam {\n\tsize: LayerSize;\n\taspect: AspectInfo;\n}\n\nexport declare interface LayerSize {\n\tcanvasAspectRatio: number;\n\twindowSize: THREE.Vector2;\n\twindowAspectRatio: number;\n\tcanvasSize: THREE.Vector2;\n\tcanvasPixelSize: THREE.Vector2;\n}\n\nexport declare interface AspectInfo {\n\tmainAspect: number;\n\tportraitAspect: number;\n\twideAspect: number;\n\tportraitWeight: number;\n\twideWeight: number;\n}\n\nexport declare interface TouchEventArgs {\n\tevent: PointerEvent;\n\tposition: THREE.Vector2;\n\tdelta: THREE.Vector2;\n\tnormalizedPosition: THREE.Vector2;\n\twindowPosition: THREE.Vector2;\n}\n\nexport class BaseLayer extends THREE.EventDispatcher {\n\n\tpublic info: LayerInfo;\n\n\tpublic renderer?: THREE.WebGLRenderer;\n\n\tpublic scene: THREE.Scene;\n\tpublic camera: THREE.PerspectiveCamera;\n\n\tprotected readyAnimate = false;\n\tpublic time = 0;\n\tpublic commonUniforms: Uniforms;\n\n\tconstructor() {\n\n\t\tsuper();\n\n\t\tthis.info = {\n\t\t\tname: '',\n\t\t\taspect: {\n\t\t\t\tmainAspect: 16 / 9,\n\t\t\t\twideAspect: 10 / 1,\n\t\t\t\tportraitAspect: 1 / 2,\n\t\t\t\tportraitWeight: 0.0,\n\t\t\t\twideWeight: 0.0\n\t\t\t},\n\t\t\tsize: {\n\t\t\t\twindowSize: new THREE.Vector2(),\n\t\t\t\twindowAspectRatio: 1.0,\n\t\t\t\tcanvasSize: new THREE.Vector2(),\n\t\t\t\tcanvasPixelSize: new THREE.Vector2(),\n\t\t\t\tcanvasAspectRatio: 1.0\n\t\t\t}\n\t\t};\n\n\t\tthis.commonUniforms = {\n\t\t\ttime: {\n\t\t\t\tvalue: 0\n\t\t\t}\n\t\t};\n\n\t\tthis.scene = new THREE.Scene();\n\t\tthis.camera = new THREE.PerspectiveCamera( 50, 1, 0.1, 1000 );\n\n\t}\n\n\tpublic tick( deltaTime: number ) {\n\n\t\tthis.time += deltaTime;\n\n\t\tthis.commonUniforms.time.value = this.time;\n\n\t\tif ( this.readyAnimate ) {\n\n\t\t\tthis.animate( deltaTime );\n\n\t\t}\n\n\t}\n\n\tpublic animate( deltaTime: number ) {}\n\n\tpublic onBind( layerInfo: LayerBindParam ) {\n\n\t\tthis.info.name = layerInfo.name;\n\t\tthis.info.canvas = layerInfo.canvas;\n\t\tthis.info.wrapperElement = layerInfo.wrapperElement;\n\t\tthis.info.wrapperElementRect = layerInfo.wrapperElement && layerInfo.wrapperElement.getBoundingClientRect(),\n\t\tthis.info.aspect = layerInfo.aspect || this.info.aspect;\n\t\tthis.info.alpha = layerInfo.alpha;\n\n\t\tthis.renderer = new THREE.WebGLRenderer( this.info );\n\t\tthis.renderer.setPixelRatio( window.devicePixelRatio );\n    \tthis.renderer.debug.checkShaderErrors = true;\n\n\t\tsetTimeout( () => {\n\n\t\t\tthis.onResize();\n\t\t\tthis.readyAnimate = true;\n\n\t\t}, 0 );\n\n\t}\n\n\tpublic onUnbind() {\n\n\t\tthis.removeChildrens( this.scene );\n\n\t\tthis.readyAnimate = false;\n\n\t}\n\n\tprotected removeChildrens( object: THREE.Object3D ) {\n\n\t\tconst length = object.children.length;\n\n\t\tfor ( let i = length - 1; i >= 0; i -- ) {\n\n\t\t\tthis.removeChildrens( object.children[ i ] );\n\n\t\t\tlet geo: THREE.Geometry | THREE.BufferGeometry | undefined = undefined;\n\t\t\tlet mat: THREE.Material | undefined = undefined;\n\n\t\t\tif ( ( object.children[ i ] as THREE.Mesh ).isMesh ) {\n\n\t\t\t\tgeo = ( object.children[ i ] as THREE.Mesh ).geometry;\n\t\t\t\tmat = ( ( object.children[ i ] as THREE.Mesh ).material as THREE.Material );\n\n\t\t\t}\n\n\t\t\tobject.remove( ( object.children[ i ] ) );\n\n\t\t\tif ( geo ) {\n\n\t\t\t\tgeo.dispose();\n\n\t\t\t}\n\n\t\t\tif ( mat ) {\n\n\t\t\t\tmat.dispose();\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tpublic onResize() {\n\n\t\tif ( this.renderer == null ) return;\n\n\t\tconst newWindowSize = new THREE.Vector2( window.innerWidth, window.innerHeight );\n\t\tconst newCanvasSize = new THREE.Vector2();\n\n\t\tif ( this.info.wrapperElement ) {\n\n\t\t\tnewCanvasSize.set( this.info.wrapperElement.clientWidth, this.info.wrapperElement.clientHeight );\n\n\t\t} else {\n\n\t\t\tnewCanvasSize.copy( newWindowSize );\n\n\t\t}\n\n\t\tlet portraitWeight = 1.0 - ( ( newCanvasSize.x / newCanvasSize.y ) - this.info.aspect.portraitAspect ) / ( this.info.aspect.mainAspect - this.info.aspect.portraitAspect );\n\t\tportraitWeight = Math.min( 1.0, Math.max( 0.0, portraitWeight ) );\n\n\t\tlet wideWeight = 1.0 - ( ( newCanvasSize.x / newCanvasSize.y ) - this.info.aspect.wideAspect ) / ( this.info.aspect.mainAspect - this.info.aspect.wideAspect );\n\t\twideWeight = Math.min( 1.0, Math.max( 0.0, wideWeight ) );\n\n\t\tthis.info.size.windowSize.copy( newWindowSize );\n\t\tthis.info.size.windowAspectRatio = newWindowSize.x / newWindowSize.y;\n\t\tthis.info.size.canvasSize.copy( newCanvasSize );\n\t\tthis.info.size.canvasPixelSize.copy( newCanvasSize.clone().multiplyScalar( this.renderer.getPixelRatio() ) );\n\t\tthis.info.size.canvasAspectRatio = newCanvasSize.x / newCanvasSize.y;\n\t\tthis.info.aspect.portraitWeight = portraitWeight;\n\t\tthis.info.aspect.wideWeight = wideWeight;\n\n\t\tthis.renderer.setSize( this.info.size.canvasSize.x, this.info.size.canvasSize.y );\n\t\tthis.camera.aspect = this.info.size.canvasAspectRatio;\n\t\tthis.camera.updateProjectionMatrix();\n\n\t\tif ( this.info.wrapperElement ) {\n\n\t\t\tthis.info.wrapperElementRect = this.info.wrapperElement.getBoundingClientRect();\n\n\t\t}\n\n\t}\n\n\tpublic pointerEvent( e: PointerEventArgs ) {\n\n\t\tconst canvasPosition = e.position.clone();\n\n\t\tif ( this.info.wrapperElementRect ) {\n\n\t\t\tcanvasPosition.x -= this.info.wrapperElementRect.x;\n\t\t\tcanvasPosition.y -= this.info.wrapperElementRect.y;\n\n\t\t}\n\n\t\tconst normalizedPosition = canvasPosition.clone();\n\t\tnormalizedPosition.divide( this.info.size.canvasSize );\n\t\tnormalizedPosition.y = 1.0 - normalizedPosition.y;\n\t\tnormalizedPosition.multiplyScalar( 2.0 ).subScalar( 1.0 );\n\n\t\tconst args: TouchEventArgs = {\n\t\t\tevent: e.pointerEvent,\n\t\t\tposition: canvasPosition.clone(),\n\t\t\tdelta: e.delta.clone(),\n\t\t\tnormalizedPosition: normalizedPosition.clone(),\n\t\t\twindowPosition: e.position.clone()\n\t\t};\n\n\t\tif ( e.pointerEventType == 'hover' ) {\n\n\t\t\tthis.onHover( args );\n\n\t\t} else if ( e.pointerEventType == 'start' ) {\n\n\t\t\tthis.onTouchStart( args );\n\n\t\t} else if ( e.pointerEventType == 'move' ) {\n\n\t\t\tthis.onTouchMove( args );\n\n\t\t} else if ( e.pointerEventType == 'end' ) {\n\n\t\t\tthis.onTouchEnd( args );\n\n\t\t}\n\n\t}\n\n\tpublic onTouchStart( args: TouchEventArgs ) { }\n\n\tpublic onTouchMove( args: TouchEventArgs ) { }\n\n\tpublic onTouchEnd( args: TouchEventArgs ) { }\n\n\tpublic onHover( args: TouchEventArgs ) { }\n\n\tpublic onWheel( event: WheelEvent, trackpadDelta: number ) { }\n\n}\n","import * as THREE from \"three\";\n\nconst { Lethargy } = require( 'lethargy' );\nconst toPx = require( 'to-px' );\n\nexport class Pointer extends THREE.EventDispatcher {\n\n\tprotected isSP: boolean;\n\tprotected isTouching: boolean;\n\n\tpublic position: THREE.Vector2;\n\tpublic delta: THREE.Vector2;\n\n\tconstructor() {\n\n\t\tsuper();\n\n\t\tthis.position = new THREE.Vector2( NaN, NaN );\n\t\tthis.delta = new THREE.Vector2( NaN, NaN );\n\n\t\tconst userAgent = navigator.userAgent;\n\t\tthis.isSP = userAgent.indexOf( 'iPhone' ) >= 0 || userAgent.indexOf( 'iPad' ) >= 0 || userAgent.indexOf( 'Android' ) >= 0 || navigator.platform == \"iPad\" || ( navigator.platform == \"MacIntel\" && navigator.userAgent.indexOf( \"Safari\" ) != - 1 && navigator.userAgent.indexOf( \"Chrome\" ) == - 1 && ( navigator as any ).standalone !== undefined );\n\n\t\twindow.addEventListener( 'touchstart', this.onTouch.bind( this, \"start\" ), { passive: false } );\n\t\twindow.addEventListener( 'touchmove', this.onTouch.bind( this, \"move\" ), { passive: false } );\n\t\twindow.addEventListener( 'touchend', this.onTouch.bind( this, \"end\" ), { passive: false } );\n\n\t\twindow.addEventListener( 'pointerdown', this.onPointer.bind( this, \"start\" ) );\n\t\twindow.addEventListener( 'pointermove', this.onPointer.bind( this, \"move\" ) );\n\t\twindow.addEventListener( 'pointerup', this.onPointer.bind( this, \"end\" ) );\n\t\twindow.addEventListener( \"dragend\", this.onPointer.bind( this, \"end\" ) );\n\t\twindow.addEventListener( \"wheel\", this.wheel.bind( this ), { passive: false } );\n\n\t\tthis.position.set( NaN, NaN );\n\t\tthis.isTouching = false;\n\n\t}\n\n\tpublic getNormalizePosition( windowSize: THREE.Vector2 ) {\n\n\t\tif ( this.position.x != this.position.x ) return new THREE.Vector2( NaN, NaN );\n\n\t\tconst p = this.position.clone()\n\t\t\t.divide( windowSize )\n\t\t\t.multiplyScalar( 2.0 )\n\t\t\t.subScalar( 1.0 );\n\t\tp.y *= - 1;\n\n\t\treturn p;\n\n\t}\n\n\tpublic getRelativePosition( elm: HTMLElement, normalize?: boolean ) {\n\n\t\tconst rect: DOMRect = elm.getClientRects()[ 0 ] as DOMRect;\n\n\t\tlet x = this.position.x - rect.left;\n\t\tlet y = this.position.y - rect.top;\n\n\t\tif ( normalize ) {\n\n\t\t\tx /= rect.width;\n\t\t\ty /= rect.height;\n\n\t\t}\n\n\t\tconst p = new THREE.Vector2( x, y );\n\n\t\treturn p;\n\n\t}\n\n\tprotected setPos( x: number, y: number ) {\n\n\t\tif (\n\t\t\tthis.position.x !== this.position.x ||\n\t\t\tthis.position.y !== this.position.y\n\t\t) {\n\n\t\t\tthis.delta.set( 0, 0 );\n\n\t\t} else {\n\n\t\t\tthis.delta.set( x - this.position.x, y - this.position.y );\n\n\t\t}\n\n\t\tthis.position.set( x, y );\n\n\t}\n\n\tprotected onTouch( type: string, e: TouchEvent ) {\n\n\t\tconst touch = e.touches[ 0 ];\n\n\t\tif ( touch ) {\n\n\t\t\tthis.touchEventHandler( touch.pageX, touch.pageY, type, e );\n\n\t\t} else {\n\n\t\t\tif ( type == 'end' ) {\n\n\t\t\t\tthis.touchEventHandler( NaN, NaN, type, e );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tprotected onPointer( type: string, e: PointerEvent | DragEvent ) {\n\n\t\tconst pointerType = ( e as PointerEvent ).pointerType;\n\n\t\tif ( pointerType != null ) {\n\n\t\t\tif ( pointerType == 'mouse' && ( e.button == - 1 || e.button == 0 ) ) {\n\n\t\t\t\tthis.touchEventHandler( e.pageX, e.pageY, type, e as PointerEvent );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tthis.touchEventHandler( e.pageX, e.pageY, type, e );\n\n\t\t}\n\n\n\n\t}\n\n\tprotected touchEventHandler( posX: number, posY: number, type: string, e: Event ) {\n\n\t\tlet dispatch = false;\n\n\t\tconst x = posX - window.pageXOffset;\n\t\tconst y = posY - window.pageYOffset;\n\n\t\tif ( type == \"start\" ) {\n\n\t\t\tthis.isTouching = true;\n\n\t\t\tthis.setPos( x, y );\n\n\t\t\tthis.delta.set( 0, 0 );\n\n\t\t\tdispatch = true;\n\n\t\t} else if ( type == \"move\" ) {\n\n\t\t\tthis.setPos( x, y );\n\n\t\t\tif ( this.isTouching ) {\n\n\t\t\t\tdispatch = true;\n\n\t\t\t}\n\n\t\t} else if ( type == \"end\" ) {\n\n\t\t\tthis.isTouching = false;\n\n\t\t\tdispatch = true;\n\n\t\t}\n\n\t\tif ( dispatch ) {\n\n\t\t\tthis.dispatchEvent( {\n\t\t\t\ttype: 'update',\n\t\t\t\tpointerEvent: e,\n\t\t\t\tpointerEventType: type,\n\t\t\t\tposition: this.position.clone(),\n\t\t\t\tdelta: this.delta.clone()\n\t\t\t} );\n\n\t\t}\n\n\t}\n\n\tpublic update() {\n\n\t\tif ( ! this.isSP ) {\n\n\t\t\tthis.dispatchEvent( {\n\t\t\t\ttype: 'update',\n\t\t\t\tpointerEvent: null,\n\t\t\t\tpointerEventType: 'hover',\n\t\t\t\tposition: this.position.clone(),\n\t\t\t\tdelta: this.delta.clone()\n\t\t\t} );\n\n\t\t}\n\n\t}\n\n\tprotected trackpadMemDelta = 0;\n\tprotected trackpadMax = false;\n\n\tprotected lethargy = new Lethargy( 7, 0, 0.05 );\n\n\tprotected wheel( e: WheelEvent ) {\n\n\t\tlet delta = e.deltaY;\n\t\tlet trackpadDelta = 0;\n\n\t\tswitch ( e.deltaMode ) {\n\n\t\t\tcase e.DOM_DELTA_LINE:\n\t\t\t\tdelta *= toPx( 'ex', window ) * 2.5;\n\t\t\t\tbreak;\n\n\t\t\tcase e.DOM_DELTA_PAGE:\n\t\t\t\tdelta *= window.innerHeight;\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\tif ( this.lethargy.check( e ) ) {\n\n\t\t\ttrackpadDelta = delta;\n\n\t\t}\n\n\t\tthis.dispatchEvent( {\n\t\t\ttype: 'wheel',\n\t\t\twheelEvent: e,\n\t\t\ttrackpadDelta: trackpadDelta\n\t\t} );\n\n\t}\n\n}\n","import * as THREE from 'three';\nimport { Pointer } from '../utils/Pointer';\nimport { BaseLayer, LayerBindParam } from './BaseLayer';\n\nexport declare interface PointerEventArgs {\n\tpointerEvent: PointerEvent;\n\tpointerEventType: string;\n\tposition: THREE.Vector2;\n\tdelta: THREE.Vector2;\n}\n\nexport declare interface ControllerParam {\n\tsilent?: boolean;\n}\n\nexport class Controller extends THREE.EventDispatcher {\n\n    public pointer: Pointer;\n\tpublic clock: THREE.Clock;\n\tprotected layers: BaseLayer[] = [];\n\n\tconstructor( parameter?: ControllerParam ) {\n\n    \tsuper();\n\n    \tif ( ! ( parameter && parameter.silent ) ) {\n\n    \t\tconsole.log( \"%c- ore-three \" + require( \"../../package.json\" ).version + \" -\", 'padding: 5px 10px ;background-color: black; color: white;font-size:11px' );\n\n    \t}\n\n    \tthis.clock = new THREE.Clock();\n\n    \tthis.pointer = new Pointer();\n    \tthis.pointer.addEventListener( 'update', this.pointerEvent.bind( this ) );\n    \tthis.pointer.addEventListener( 'wheel', this.onWheel.bind( this ) );\n\n    \twindow.addEventListener( 'orientationchange', this.onOrientationDevice.bind( this ) );\n    \twindow.addEventListener( 'resize', this.onWindowResize.bind( this ) );\n\n    \tthis.tick();\n\n\t}\n\n\tprotected tick() {\n\n    \tlet deltaTime = this.clock.getDelta();\n\n    \tthis.pointer.update();\n\n    \tfor ( let i = 0; i < this.layers.length; i ++ ) {\n\n    \t\tthis.layers[ i ].tick( deltaTime );\n\n    \t}\n\n    \trequestAnimationFrame( this.tick.bind( this ) );\n\n\t}\n\n\tpublic getLayer( layerName: string ) {\n\n    \tfor ( let i = 0; i < this.layers.length; i ++ ) {\n\n    \t\tif ( this.layers[ i ].info.name == layerName ) return this.layers[ i ];\n\n    \t}\n\n    \treturn null;\n\n\t}\n\n\tpublic addLayer( layer: BaseLayer, layerInfo: LayerBindParam ) {\n\n    \twhile ( this.getLayer( layerInfo.name ) ) {\n\n    \t\tlayerInfo.name += '_';\n\n    \t}\n\n    \tlayer.onBind( layerInfo );\n    \tthis.layers.push( layer );\n\n\t}\n\n\tpublic removeLayer( layerNmae: string ) {\n\n    \tfor ( let i = this.layers.length; i >= 0; i -- ) {\n\n    \t\tlet layer = this.layers[ i ];\n\n    \t\tif ( layer.info.name == layerNmae ) {\n\n    \t\t\tthis.layers.splice( i, 1 );\n\n    \t\t}\n\n    \t}\n\n\t}\n\n\tprotected onWindowResize() {\n\n    \tfor ( let i = 0; i < this.layers.length; i ++ ) {\n\n    \t\tthis.layers[ i ].onResize();\n\n    \t}\n\n\t}\n\n\tprotected onOrientationDevice() {\n\n    \tthis.onWindowResize();\n\n\t}\n\n\tprotected pointerEvent( e: THREE.Event ) {\n\n    \tfor ( let i = 0; i < this.layers.length; i ++ ) {\n\n    \t\tthis.layers[ i ].pointerEvent( e as unknown as PointerEventArgs );\n\n    \t}\n\n\t}\n\n\tprotected onWheel( e: THREE.Event ) {\n\n    \tfor ( let i = 0; i < this.layers.length; i ++ ) {\n\n    \t\tthis.layers[ i ].onWheel( e.wheelEvent, e.trackpadDelta );\n\n    \t}\n\n\t}\n\n}\n","import * as THREE from 'three';\r\n\r\nexport interface Uniforms{ [ key: string ] : THREE.IUniform }\r\n\r\nexport namespace UniformsLib {\r\n\r\n\texport function mergeUniforms( ...uniforms: ( Uniforms|undefined )[] ) : Uniforms {\r\n\r\n\t\tlet res = {};\r\n\r\n\t\tfor ( let i = 0; i < uniforms.length; i ++ ) {\r\n\r\n\t\t\tif ( uniforms[ i ] != undefined ) {\r\n\r\n\t\t\t\tObject.assign( res, uniforms[ i ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn res;\r\n\r\n\t}\r\n\r\n}\r\n","import * as THREE from 'three';\nimport { Easings, EasingSet } from \"./Easings\";\nimport { LerpFunc, Lerps } from \"./Lerps\";\nimport { Uniforms } from \"./Uniforms\";\n\nexport declare interface AnimatorVariable<T>{\n\ttime: number;\n\tduration?: number;\n\tvalue: T;\n\tstartValue: T;\n\tgoalValue: T;\n\tonAnimationFinished?: Function | null;\n\tlerpFunc?: LerpFunc<T>;\n\teasing: EasingSet;\n}\n\nexport declare interface AnimatorValiableParams<T> {\n\tname: string;\n\tinitValue: T;\n\teasing?: EasingSet;\n\tcustomLerpFunc?: LerpFunc<T>;\n}\n\nexport class Animator extends THREE.EventDispatcher {\n\n\tprotected variables: { [ key: string ]: AnimatorVariable<any> };\n\tprotected _isAnimating: boolean = false;\n\tprotected animatingCount: number = 0;\n\tprotected dispatchEvents: Function[] = [];\n\n\tconstructor() {\n\n\t\tsuper();\n\n\t\tthis.variables = {};\n\n\t}\n\n\tpublic get isAnimating() {\n\n\t\treturn this._isAnimating;\n\n\t}\n\n\tpublic add<T>( params: AnimatorValiableParams<T> ) {\n\n\t\tlet lerpFunc = params.customLerpFunc || Lerps.getLerpFunc( params.initValue );\n\n\t\tlet variable = {\n\t\t\ttime: - 1,\n\t\t\tvalue: params.initValue,\n\t\t\tstartValue: params.initValue,\n\t\t\tgoalValue: null,\n\t\t\teasing: params.easing || { func: Easings.sigmoid, args: 6 },\n\t\t\tlerpFunc: lerpFunc,\n\t\t};\n\n\t\tthis.variables[ params.name ] = variable;\n\n\t\treturn variable;\n\n\t}\n\n\tpublic setEasing( name: string, easing: EasingSet ) {\n\n\t\tlet variable = this.variables[ name ];\n\n\t\tif ( variable ) {\n\n\t\t\tvariable.easing = easing;\n\n\t\t} else {\n\n\t\t\tconsole.warn( '\"' + name + '\"' + ' is not exist' );\n\n\t\t}\n\n\t}\n\n\tpublic animate<T>( name: string, goalValue: T, duration: number = 1, callback?: Function, easing?: EasingSet ) {\n\n\t\tlet variable = this.variables[ name ];\n\t\tlet promise = new Promise( resolve => {\n\n\t\t\tif ( variable ) {\n\n\t\t\t\tif ( duration <= 0 ) {\n\n\t\t\t\t\tthis.setValue( name, goalValue );\n\n\t\t\t\t\tvariable.time = 1.0;\n\t\t\t\t\tvariable.onAnimationFinished = () => {\n\n\t\t\t\t\t\tcallback && callback();\n\t\t\t\t\t\tresolve( null );\n\n\t\t\t\t\t};\n\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t\tif ( variable.time == - 1 ) {\n\n\t\t\t\t\tthis._isAnimating = true;\n\t\t\t\t\tthis.animatingCount ++;\n\n\t\t\t\t}\n\n\t\t\t\tvariable.time = 0;\n\t\t\t\tvariable.duration = duration;\n\t\t\t\tvariable.startValue = variable.value;\n\t\t\t\tvariable.goalValue = goalValue;\n\t\t\t\tvariable.onAnimationFinished = () => {\n\n\t\t\t\t\tcallback && callback();\n\t\t\t\t\tresolve( null );\n\n\t\t\t\t};\n\n\t\t\t\tif ( easing ) {\n\n\t\t\t\t\tthis.setEasing( name, easing );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( '\"' + name + '\"' + ' is not exist' );\n\n\t\t\t}\n\n\t\t} );\n\n\t\treturn promise;\n\n\t}\n\n\tpublic cancelAnimate( name: string ) {\n\n\t\tlet variable = this.variables[ name ];\n\n\t\tif ( variable ) {\n\n\t\t\tvariable.time = 1.0;\n\t\t\tvariable.onAnimationFinished = null;\n\n\t\t} else {\n\n\t\t\tconsole.warn( '\"' + name + '\"' + ' is not exist' );\n\n\t\t}\n\n\t}\n\n\tpublic setValue<T>( name: string, value: T ) {\n\n\t\tif ( this.variables[ name ] ) {\n\n\t\t\tthis.variables[ name ].value = value;\n\t\t\tthis.cancelAnimate( name );\n\n\t\t} else {\n\n\t\t\tconsole.warn( '\"' + name + '\"' + ' is not exist' );\n\n\t\t\treturn null;\n\n\t\t}\n\n\t}\n\n\tpublic get<T>( name: string ): T | null {\n\n\t\tif ( this.variables[ name ] ) {\n\n\t\t\treturn this.variables[ name ].value;\n\n\t\t} else {\n\n\t\t\tconsole.warn( '\"' + name + '\"' + ' is not exist' );\n\n\t\t\treturn null;\n\n\t\t}\n\n\t}\n\n\tpublic getVariableObject<T>( name: string, mute: boolean = false ): AnimatorVariable<T> | null {\n\n\t\tif ( this.variables[ name ] ) {\n\n\t\t\treturn this.variables[ name ];\n\n\t\t} else {\n\n\t\t\tif ( ! mute ) {\n\n\t\t\t\tconsole.warn( '\"' + name + '\"' + ' is not exist' );\n\n\t\t\t}\n\n\t\t\treturn null;\n\n\t\t}\n\n\t}\n\n\tpublic isAnimatingVariable( name: string, mute: boolean = false ) {\n\n\t\tif ( this.variables[ name ] ) {\n\n\t\t\tlet time = this.variables[ name ].time;\n\n\t\t\treturn time != - 1.0;\n\n\t\t} else {\n\n\t\t\tif ( ! mute ) {\n\n\t\t\t\tconsole.warn( '\"' + name + '\"' + ' is not exist' );\n\n\t\t\t}\n\n\t\t\treturn null;\n\n\t\t}\n\n\t}\n\n\tpublic applyToUniforms( uniforms: Uniforms ) {\n\n\t\tlet keys = Object.keys( this.variables );\n\n\t\tfor ( let i = 0; i < keys.length; i ++ ) {\n\n\t\t\tlet variable = this.getVariableObject( keys[ i ] );\n\n\t\t\tif ( variable ) {\n\n\t\t\t\tuniforms[ keys[ i ] ] = variable;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tpublic update( deltaTime?: number ) {\n\n\t\tif ( this.animatingCount == 0 ) {\n\n\t\t\tthis._isAnimating = false;\n\n\t\t}\n\n\t\tlet keys = Object.keys( this.variables );\n\n\t\tfor ( let i = 0; i < keys.length; i ++ ) {\n\n\t\t\tlet variable = this.variables[ keys[ i ] ];\n\t\t\tlet time = variable.time;\n\n\t\t\tif ( time == 1.0 ) {\n\n\t\t\t\tthis.animatingCount --;\n\t\t\t\ttime = - 1;\n\n\t\t\t\tif ( variable.onAnimationFinished ) {\n\n\t\t\t\t\tthis.dispatchEvents.push( variable.onAnimationFinished );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( time >= 0.0 && time < 1.0 ) {\n\n\t\t\t\tlet duration = variable.duration;\n\t\t\t\tlet easing = variable.easing;\n\t\t\t\tlet lerpFunc = variable.lerpFunc;\n\n\t\t\t\tif ( duration ) {\n\n\t\t\t\t\ttime += ( deltaTime || 0.016 ) / duration;\n\n\t\t\t\t\tif ( duration == 0 || time >= 1.0 ) {\n\n\t\t\t\t\t\ttime = 1.0;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tlet t = time;\n\t\t\t\tt = easing.func( t, easing.args );\n\n\t\t\t\tif ( lerpFunc ) {\n\n\t\t\t\t\tvariable.value = lerpFunc( variable.startValue, variable.goalValue, t );\n\n\t\t\t\t}\n\n\t\t\t\tthis.dispatchEvent( {\n\t\t\t\t\ttype: 'update/' + keys[ i ],\n\t\t\t\t\tdeltaTime: deltaTime\n\t\t\t\t} );\n\n\t\t\t\tif ( time == 1.0 ) {\n\n\t\t\t\t\tvariable.value = variable.goalValue;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\twhile ( this.dispatchEvents.length != 0 ) {\n\n\t\t\tlet func = this.dispatchEvents.pop();\n\n\t\t\tif ( func ) {\n\n\t\t\t\tfunc();\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( this._isAnimating ) {\n\n\t\t\tthis.dispatchEvent( {\n\t\t\t\ttype: 'update',\n\t\t\t\tdeltaTime: deltaTime\n\t\t\t} );\n\n\t\t}\n\n\t}\n\n}\n","import * as ORE from '../../';\nimport * as THREE from 'three';\n\nimport vert from './shaders/background.vs';\nimport { LayerSize as LayerSizeInfo } from '../../core/BaseLayer';\n\nexport class Background extends THREE.Mesh {\n\n\tprotected uniforms: ORE.Uniforms;\n\n\tconstructor( param: THREE.ShaderMaterialParameters ) {\n\n\t\tlet geo = new THREE.BufferGeometry();\n\n\t\tlet posArray = [];\n\t\tlet indexArray = [];\n\t\tlet uvArray = [];\n\n\t\tposArray.push( - 1, 1, 0 );\n\t\tposArray.push( 1, 1, 0 );\n\t\tposArray.push( 1, - 1, 0 );\n\t\tposArray.push( - 1, - 1, 0 );\n\n\t\tuvArray.push( 0, 1 );\n\t\tuvArray.push( 1, 1 );\n\t\tuvArray.push( 1, 0 );\n\t\tuvArray.push( 0, 0 );\n\n\t\tindexArray.push( 0, 2, 1, 0, 3, 2 );\n\n\t\tlet pos = new Float32Array( posArray );\n\t\tlet indices = new Uint32Array( indexArray );\n\t\tlet uv = new Float32Array( uvArray );\n\n\t\tgeo.setAttribute( 'position', new THREE.BufferAttribute( pos, 3 ) );\n\t\tgeo.setAttribute( 'uv', new THREE.BufferAttribute( uv, 2 ) );\n\t\tgeo.setIndex( new THREE.BufferAttribute( indices, 1 ) );\n\n\t\tparam.vertexShader = param.vertexShader || vert;\n\t\tparam.transparent = param.transparent != undefined ? param.transparent : true;\n\t\tparam.depthFunc = param.depthFunc != undefined ? param.depthFunc : THREE.NeverDepth;\n\n\t\tlet mat = new THREE.ShaderMaterial( param );\n\n\t\tsuper( geo, mat );\n\n\t\tthis.uniforms = param.uniforms || {};\n\n\t\tthis.frustumCulled = false;\n\n\t}\n\n\tpublic resize( args: LayerSizeInfo ) {\n\n\t\tthis.uniforms.resolution = { value: args.canvasSize };\n\t\tthis.uniforms.aspectRatio = { value: args.canvasAspectRatio };\n\n\t}\n\n}\n","export default \"#define GLSLIFY 1\\nvarying vec2 vUv;\\nvarying vec4 vColor;\\n\\nvoid main( void ) {\\n    \\n    vec3 pos = position;\\n\\n    pos.z = 1.0;\\n    \\n    gl_Position = vec4( pos, 1.0 );\\n    \\n    vUv = uv;\\n    vColor = vec4( 1.0 );\\n\\n}\";","import * as THREE from 'three';\nimport vert from './domMesh.vs';\nimport { Uniforms, UniformsLib } from '../Uniforms';\n\nexport class DOMMesh extends THREE.Mesh {\n\n\tprotected _uniforms: Uniforms;\n\tprotected element: HTMLElement;\n\n\tconstructor( element: HTMLElement, parameter: THREE.ShaderMaterialParameters ) {\n\n\t\tlet geo = new THREE.PlaneBufferGeometry( 2, 2 );\n\n\t\tparameter.vertexShader = vert;\n\n\t\tlet uni = UniformsLib.mergeUniforms( parameter.uniforms, {\n\t\t\tdomPos: {\n\t\t\t\tvalue: new THREE.Vector2()\n\t\t\t},\n\t\t\tdomSize: {\n\t\t\t\tvalue: new THREE.Vector2()\n\t\t\t},\n\t\t\twindowSize: {\n\t\t\t\tvalue: new THREE.Vector2()\n\t\t\t},\n\t\t\taspectRatio: {\n\t\t\t\tvalue: 1.0\n\t\t\t}\n\t\t} );\n\n\t\tparameter.uniforms = uni;\n\n\t\tlet mat = new THREE.ShaderMaterial( parameter );\n\n\t\tsuper( geo, mat );\n\n\t\tthis.frustumCulled = false;\n\n\t\tthis._uniforms = uni;\n\n\t\tthis.element = element;\n\n\t\tthis.update();\n\n\t}\n\n\tpublic get uniforms() {\n\n\t\treturn this._uniforms;\n\n\t}\n\n\tpublic update() {\n\n\t\tlet rect = this.element.getBoundingClientRect();\n\n\t\tthis._uniforms.windowSize.value.set( window.innerWidth, window.innerHeight );\n\t\tthis._uniforms.aspectRatio.value = window.innerWidth / window.innerHeight;\n\t\tthis._uniforms.domSize.value.set( rect.width, rect.height );\n\t\tthis._uniforms.domPos.value.set( rect.left, rect.top );\n\n\t}\n\n}\n","export default \"#define GLSLIFY 1\\nvarying vec2 vUv;\\nuniform vec2 domPos;\\nuniform vec2 domSize;\\nuniform vec2 windowSize;\\nuniform float aspectRatio;\\n\\nvoid main(  )\\n{\\n  float width = domSize.x / windowSize.x;\\n\\n  //( 0,0 )\\n  vec3 pos = position + vec3( 1.0,-1.0,0.0 );\\n\\n  //size\\n  pos.x *= width;\\n  pos.y *= ( width * aspectRatio ) * ( domSize.y / domSize.x );\\n\\n  pos += vec3( -1.0, 1.0, 0.0 );\\n\\n  pos += vec3( domPos.x / windowSize.x * 2.0, -domPos.y / windowSize.y * 2.0, 0.0 );\\n\\n  gl_Position = vec4( pos, 1.0 );\\n  vUv = uv;\\n}\\n\";","export declare interface Event {\n\ttype: string;\n\t[key:string]: any;\n}\n\nexport declare interface EventListener {\n\ttype: string,\n\tlistener: ( e: Event ) => void,\n}\n\nexport class EventDispatcher {\n\n\tprivate events: EventListener[] = [];\n\n\tconstructor() {\n\n\t}\n\n\tpublic addEventListener( type: string, listener: ( e: Event ) => void ) {\n\n\t\tthis.events.push( {\n\t\t\ttype: type,\n\t\t\tlistener: listener\n\t\t} );\n\n\t}\n\n\tpublic dispatchEvent( event: Event ) {\n\n\t\tevent.target = this;\n\n\t\tfor ( let i = 0; i < this.events.length; i ++ ) {\n\n\t\t\tif ( event.type == this.events[ i ].type ) {\n\n\t\t\t\tthis.events[ i ].listener( event );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tpublic removeEventListener( type: string, listener: Function ) {\n\n\t\tfor ( let i = this.events.length; i >= 0; i -- ) {\n\n\t\t\tif ( type == this.events[ i ].type && listener == this.events[ i ].listener ) {\n\n\t\t\t\tthis.events.splice( i, 1 );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n}\n","import * as THREE from 'three';\n\nimport vert from './shaders/passThrough.vs';\nimport passThroughFrag from './shaders/passThrough.fs';\nimport { Uniforms, UniformsLib } from '../Uniforms';\n\nexport interface GPUComputationKernel{\n    material: THREE.RawShaderMaterial,\n    uniforms: any,\n}\n\nexport interface GPUcomputationData{\n    buffer: THREE.WebGLRenderTarget\n}\n\nexport class GPUComputationController {\n\n\tprotected renderer: THREE.WebGLRenderer;\n\tpublic dataSize: THREE.Vector2;\n\tprotected uniforms: any;\n\n    protected scene: THREE.Scene;\n    protected camera: THREE.Camera;\n\n    protected mesh: THREE.Mesh;\n    protected materials: THREE.ShaderMaterial[];\n\n    protected tempDataLinear: GPUcomputationData;\n    protected tempDataNear: GPUcomputationData;\n\n\tprivate renderTargets: THREE.WebGLRenderTarget[] = [];\n\n\tpublic get isSupported() : boolean {\n\n    \treturn this.renderer.extensions.get( \"OES_texture_float\" );\n\n\t}\n\n\tconstructor( renderer: THREE.WebGLRenderer, dataSize: THREE.Vector2 ) {\n\n    \tthis.renderer = renderer;\n    \tthis.dataSize = dataSize.clone();\n\n    \tthis.uniforms = {\n    \t\tdataSize: {\n    \t\t\tvalue: this.dataSize\n    \t\t}\n    \t};\n\n    \tthis.tempDataLinear = this.createData( {\n    \t\tminFilter: THREE.LinearFilter,\n    \t\tmagFilter: THREE.LinearFilter\n    \t} );\n\n    \tthis.tempDataNear = this.createData( {\n    \t\tminFilter: THREE.NearestFilter,\n    \t\tmagFilter: THREE.NearestFilter\n    \t} );\n\n    \tthis.scene = new THREE.Scene();\n    \tthis.camera = new THREE.Camera();\n\n    \tthis.materials = [];\n    \tthis.mesh = new THREE.Mesh( new THREE.PlaneBufferGeometry( 2, 2 ) );\n    \tthis.scene.add( this.mesh );\n\n\t}\n\n\tpublic createInitializeTexture() {\n\n    \tlet a = new Float32Array( this.uniforms.dataSize.value.x * this.uniforms.dataSize.value.y * 4 );\n    \tlet texture = new THREE.DataTexture( a, this.uniforms.dataSize.value.x, this.uniforms.dataSize.value.y, THREE.RGBAFormat, THREE.FloatType );\n    \ttexture.needsUpdate = true;\n\n    \treturn texture;\n\n\t}\n\n\tpublic createData(): GPUcomputationData;\n\n\tpublic createData( initializeTexture: THREE.DataTexture ): GPUcomputationData;\n\n\tpublic createData( textureParam: THREE.WebGLRenderTargetOptions ): GPUcomputationData;\n\n\tpublic createData( initializeTexture: THREE.DataTexture, textureParam: THREE.WebGLRenderTargetOptions ): GPUcomputationData;\n\n\tpublic createData( initTex_texParam?: any, textureParam? : THREE.WebGLRenderTargetOptions ): GPUcomputationData {\n\n    \tlet userAgent = navigator.userAgent;\n    \tlet isiOS = userAgent.indexOf( 'iPhone' ) >= 0 || userAgent.indexOf( 'iPad' ) >= 0 || navigator.platform == \"iPad\" || ( navigator.platform == \"MacIntel\" && navigator.userAgent.indexOf( \"Safari\" ) != - 1 && navigator.userAgent.indexOf( \"Chrome\" ) == - 1 && ( navigator as any ).standalone !== undefined );\n\n    \tlet param: THREE.WebGLRenderTargetOptions = {\n    \t\twrapS: THREE.ClampToEdgeWrapping,\n    \t\twrapT: THREE.ClampToEdgeWrapping,\n    \t\tminFilter: THREE.NearestFilter,\n    \t\tmagFilter: THREE.NearestFilter,\n    \t\tformat: THREE.RGBAFormat,\n    \t\ttype: isiOS ? THREE.HalfFloatType : THREE.FloatType,\n    \t\tstencilBuffer: false,\n    \t\tdepthBuffer: false\n    \t};\n    \tlet initTex: THREE.DataTexture | null = null;\n    \tlet customParam: THREE.WebGLRenderTargetOptions | null = null;\n\n    \tif ( initTex_texParam ) {\n\n    \t\tif ( initTex_texParam.isDataTexture ) {\n\n    \t\t\tinitTex = initTex_texParam;\n\n    \t\t\tif ( textureParam ) {\n\n    \t\t\t\tcustomParam = textureParam;\n\n    \t\t\t}\n\n    \t\t} else {\n\n    \t\t\tcustomParam = initTex_texParam;\n\n    \t\t}\n\n    \t}\n\n    \tif ( customParam ) {\n\n    \t\tparam.wrapS = customParam.wrapS || param.wrapS;\n    \t\tparam.wrapT = customParam.wrapT || param.wrapT;\n    \t\tparam.minFilter = customParam.minFilter || param.minFilter;\n    \t\tparam.magFilter = customParam.magFilter || param.magFilter;\n    \t\tparam.format = customParam.format || param.format;\n    \t\tparam.type = customParam.type || param.type;\n    \t\tparam.stencilBuffer = customParam.stencilBuffer || param.stencilBuffer;\n    \t\tparam.depthBuffer = customParam.depthBuffer || param.depthBuffer;\n\n    \t}\n\n    \tlet buf = new THREE.WebGLRenderTarget( this.uniforms.dataSize.value.x, this.uniforms.dataSize.value.y, param );\n\n\t\tlet data = { buffer: buf };\n\n\t\tthis.renderTargets.push( buf );\n\n    \tif ( initTex ) {\n\n    \t\tlet initKernel = this.createKernel( {\n\t\t\t\tfragmentShader: passThroughFrag\n\t\t\t} );\n\n    \t\tinitKernel.uniforms.tex = { value: initTex };\n\n    \t\tthis.compute( initKernel, data );\n\n    \t}\n\n    \treturn data;\n\n\t}\n\n\tpublic createKernel( param: THREE.ShaderMaterialParameters ): GPUComputationKernel {\n\n    \tlet uni: Uniforms = UniformsLib.mergeUniforms( param.uniforms, {} );\n    \tuni = UniformsLib.mergeUniforms( this.uniforms, uni );\n\n\t\tparam.vertexShader = param.vertexShader || vert;\n\n    \tlet mat = new THREE.ShaderMaterial( param );\n\n    \tthis.materials.push( mat );\n\n    \tlet kernel: GPUComputationKernel = {\n    \t\tmaterial: mat,\n    \t\tuniforms: uni\n    \t};\n\n    \treturn kernel;\n\n\t}\n\n\tpublic compute( kernel: GPUComputationKernel, data: GPUcomputationData, camera?: THREE.Camera ) {\n\n    \tlet temp: GPUcomputationData;\n\n    \tif ( data.buffer.texture.magFilter == THREE.LinearFilter ) {\n\n    \t\ttemp = this.tempDataLinear;\n\n    \t} else {\n\n    \t\ttemp = this.tempDataNear;\n\n    \t}\n\n    \tthis.mesh.material = kernel.material;\n\n    \tlet currentRenderTarget = this.renderer.getRenderTarget();\n\n    \tthis.renderer.setRenderTarget( temp.buffer );\n\n    \tthis.renderer.render( this.scene, camera || this.camera );\n\n    \tthis.swapBuffers( data, temp );\n\n    \tthis.renderer.setRenderTarget( currentRenderTarget );\n\n\t}\n\n\tprotected swapBuffers( b1: GPUcomputationData, b2: GPUcomputationData ) {\n\n    \tlet tmp = b1.buffer;\n    \tb1.buffer = b2.buffer;\n    \tb2.buffer = tmp;\n\n\t}\n\n\tpublic dispose() {\n\n    \tlet geo = this.mesh.geometry;\n    \tgeo.dispose();\n\n    \tfor ( let i = 0; i < this.materials.length; i ++ ) {\n\n    \t\tthis.materials[ i ].dispose();\n\n    \t}\n\n    \tthis.scene.remove( this.mesh );\n\n    \tthis.tempDataLinear.buffer.dispose();\n    \tthis.tempDataNear.buffer.dispose();\n\n\t}\n\n\tpublic resizeData( dataSize: THREE.Vector2 ) {\n\n\t\tthis.dataSize.copy( dataSize );\n\n\t\tfor ( let i = 0; i < this.renderTargets.length; i ++ ) {\n\n\t\t\tlet target = this.renderTargets[ i ];\n\n\t\t\ttarget.setSize( dataSize.x, dataSize.y );\n\n\t\t}\n\n\t}\n\n}\n","export default \"#define GLSLIFY 1\\nuniform sampler2D tex;\\nvarying vec2 vUv;\\n\\nvoid main() {\\n    gl_FragColor = texture2D(tex,vUv);\\n}\";","export default \"#define GLSLIFY 1\\nvarying vec2 vUv;\\n\\nvoid main() {\\n    gl_Position = vec4( position, 1.0 );\\n    vUv = uv;\\n}\";","import * as THREE from 'three';\n\nexport class MouseRotator {\n\n\tpublic target: THREE.Object3D;\n\tpublic scrollVel: THREE.Vector2;\n\n\tconstructor( objs: THREE.Object3D ) {\n\n\t\tthis.target = objs;\n\n\t\tthis.scrollVel = new THREE.Vector2();\n\n\t}\n\n\tupdate() {\n\n\t\tthis.scrollVel.multiplyScalar( 0.96 );\n\n\t\tlet axis = new THREE.Vector3( this.scrollVel.y, this.scrollVel.x, 0.0 ).normalize();\n\n\t\tlet q = new THREE.Quaternion().setFromAxisAngle( axis, this.scrollVel.length() );\n\t\tq.multiply( this.target.quaternion );\n\n\t\tthis.target.quaternion.copy( q );\n\n\t}\n\n\taddVelocity( scrollDelta: THREE.Vector2 ) {\n\n\t\tthis.scrollVel.addVectors( this.scrollVel, scrollDelta.multiplyScalar( 0.001 ) );\n\n\t}\n\n}\n","import * as THREE from 'three';\n\nimport passThrowVert from './shaders/passThrow.vs';\n\ntype InputRenderTarget = { [key:string]: THREE.Texture | THREE.Texture[] };\n\nexport interface PPParam extends THREE.ShaderMaterialParameters{\n\tinputRenderTargets?: string\n}\n\nexport class PostProcessing {\n\n\tprivate renderer: THREE.WebGLRenderer;\n\tprivate scene: THREE.Scene;\n\tprivate camera: THREE.OrthographicCamera;\n\tprivate screen: THREE.Mesh;\n\n\tpublic effect: {\n\t\tmaterial: THREE.ShaderMaterial,\n\t};\n\n\tconstructor( renderer: THREE.WebGLRenderer, ppParam: PPParam ) {\n\n\t\tthis.renderer = renderer;\n\t\tthis.scene = new THREE.Scene();\n\t\tthis.camera = new THREE.OrthographicCamera( - 1.0, 1.0, 1.0, - 1.0 );\n\n\t\tthis.screen = new THREE.Mesh( new THREE.PlaneBufferGeometry( 2, 2 ) );\n\t\tthis.scene.add( this.screen );\n\n\t\tppParam.vertexShader = ppParam.vertexShader || passThrowVert;\n\t\tppParam.uniforms = ppParam.uniforms || {};\n\t\tppParam.uniforms.resolution = {\n\t\t\tvalue: new THREE.Vector2()\n\t\t};\n\n\t\tthis.effect = {\n\t\t\tmaterial: new THREE.ShaderMaterial( ppParam ),\n\t\t};\n\n\t}\n\n\tpublic render( inputRenderTargets: InputRenderTarget | null, renderTarget: THREE.WebGLRenderTarget | null = null ) {\n\n\t\tlet renderTargetMem = this.renderer.getRenderTarget();\n\n\t\tlet effect = this.effect;\n\t\tlet material = effect.material;\n\t\tlet uniforms = material.uniforms;\n\n\t\tif ( inputRenderTargets ) {\n\n\t\t\tlet keys = Object.keys( inputRenderTargets );\n\n\t\t\tfor ( let j = 0; j < keys.length; j ++ ) {\n\n\t\t\t\tif ( uniforms[ keys[ j ] ] ) {\n\n\t\t\t\t\tuniforms[ keys[ j ] ].value = inputRenderTargets[ keys[ j ] ];\n\n\t\t\t\t} else {\n\n\t\t\t\t\tuniforms[ keys[ j ] ] = { value: inputRenderTargets[ keys[ j ] ] };\n\n\t\t\t\t\teffect.material.needsUpdate = true;\n\n\t\t\t\t\teffect.material.uniforms = uniforms;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( renderTarget ) {\n\n\t\t\tuniforms.resolution.value.set( renderTarget.width, renderTarget.height );\n\n\t\t} else {\n\n\t\t\tthis.renderer.getSize( uniforms.resolution.value );\n\n\t\t}\n\n\t\tthis.screen.material = material;\n\n\t\tthis.renderer.setRenderTarget( renderTarget );\n\n\t\tthis.renderer.render( this.scene, this.camera );\n\n\t\tthis.renderer.setRenderTarget( renderTargetMem );\n\n\t}\n\n}\n","export default \"#define GLSLIFY 1\\nvarying vec2 vUv;\\nvoid main() {\\n    vUv = uv;\\n    gl_Position = vec4( position, 1.0 );\\n}   \";","import * as THREE from 'three';\r\nimport { PageScrollerSection, PageScrollerSectionParams, PageScrollerEventArgs } from './PageScrollerSection';\r\nimport { EasingSet, Easings } from '../Easings';\r\nimport { Animator } from '../Animator';\r\n\r\nexport declare interface PageScrollerAutoMoveParam {\r\n\ttarget: string | number | PageScrollerSection;\r\n\tduration?: number;\r\n\teasing?: EasingSet;\r\n\tcallBack?: Function;\r\n\tbottom?: boolean;\r\n}\r\n\r\nexport class PageScroller {\r\n\r\n\tprotected animator: Animator;\r\n\tprotected isAutoMove: boolean = false;\r\n\r\n\tprotected parentElement: HTMLElement;\r\n\tprotected parentElementHeight: number;\r\n\r\n\tprotected sections: PageScrollerSection[];\r\n\r\n\tpublic delaySpeed: number = 0.1;\r\n\tpublic dragDelaySpeed: number = 0.4;\r\n\tprotected isTouching: boolean = false;\r\n\tprotected deltaMem: number = 0;\r\n\r\n\tprotected scrollReady: boolean = false;\r\n\tprotected sumDelta: number = 0;\r\n\r\n\tprotected _scrollPos: number = 0;\r\n\tprotected _scrollPosMem: number = 0;\r\n\tprotected _scrollPercentage: number = 0;\r\n\r\n\tprotected _scrollPosDelay: number = 0;\r\n\tprotected _scrollPercentageDelay: number = 0;\r\n\r\n\tprotected caughtSection: PageScrollerSection | null;\r\n\tprotected dragStop: boolean = false;\r\n\tprotected dragUnlockReady: boolean = true;\r\n\r\n\tconstructor( parentElement: HTMLElement ) {\r\n\r\n\t\tthis.parentElement = parentElement;\r\n\t\tthis.parentElementHeight = parentElement.getBoundingClientRect().height;\r\n\r\n\t\tthis.sections = [];\r\n\t\tthis.caughtSection = null;\r\n\r\n\t\t/*------------------------\r\n\t\t\tinit Animator\r\n\t\t------------------------*/\r\n\r\n\t\tthis.animator = new Animator();\r\n\r\n\t\tthis.animator.add( {\r\n\t\t\tname: 'scrollPos',\r\n\t\t\tinitValue: 0,\r\n\t\t\teasing: {\r\n\t\t\t\tfunc: Easings.sigmoid,\r\n\t\t\t\targs: 4\r\n\t\t\t}\r\n\t\t} );\r\n\r\n\t}\r\n\r\n\tpublic get scrollPos() {\r\n\r\n\t\treturn this._scrollPos;\r\n\r\n\t}\r\n\r\n\tpublic get scrollPosDelay() {\r\n\r\n\t\treturn this._scrollPosDelay;\r\n\r\n\t}\r\n\r\n\tpublic get scrollPercentage() {\r\n\r\n\t\treturn this._scrollPercentage;\r\n\r\n\t}\r\n\r\n\tpublic get scrollPercentageDelay() {\r\n\r\n\t\treturn this._scrollPercentageDelay;\r\n\r\n\t}\r\n\r\n\tpublic get scrollTimelinePercentage() {\r\n\r\n\t\tlet sum = 0;\r\n\r\n\t\tfor ( let i = 0; i < this.sections.length; i ++ ) {\r\n\r\n\t\t\tlet sec = this.sections[ i ];\r\n\t\t\tlet secBef = this.sections[ i - 1 ];\r\n\r\n\t\t\tlet a = Math.max( 0.0, sec.element.offsetTop - this.scrollPosDelay + ( sec.bottom ? sec.rect.height - window.innerHeight : 0 ) );\r\n\t\t\tlet b = ( ( secBef ? secBef.rect.height - ( secBef.bottom ? window.innerHeight : 0 ) : 0 ) + ( sec.bottom ? sec.rect.height - window.innerHeight : 0 ) ) || 1;\r\n\r\n\t\t\tlet d = 1.0 - ( a / b );\r\n\t\t\td = Math.max( 0.0, d );\r\n\r\n\t\t\tsum += d;\r\n\r\n\t\t\tif ( d < 1.0 ) break;\r\n\r\n\t\t}\r\n\r\n\t\treturn sum / this.sections.length;\r\n\r\n\t}\r\n\r\n\tpublic add( section: PageScrollerSection ) {\r\n\r\n\t\tthis.sections.push( section );\r\n\r\n\t\tthis.sortSections();\r\n\r\n\t\treturn section;\r\n\r\n\t}\r\n\r\n\tpublic sortSections() {\r\n\r\n\t\tthis.sections.sort( ( a: PageScrollerSection, b: PageScrollerSection ): number => {\r\n\r\n\t\t\treturn a.rect.y > b.rect.y ? 1 : - 1;\r\n\r\n\t\t} );\r\n\r\n\t\tfor ( let i = 0; i < this.sections.length; i ++ ) {\r\n\r\n\t\t\tthis.sections[ i ].timelinePercentage = ( i + 1 ) / this.sections.length;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tpublic get( name: string ) {\r\n\r\n\t\tfor ( let i = 0; i < this.sections.length; i ++ ) {\r\n\r\n\t\t\tif ( this.sections[ i ].name == name ) return this.sections[ i ];\r\n\r\n\t\t}\r\n\r\n\t\tconsole.warn( 'section \"' + name + '\" is not exist.' );\r\n\r\n\t\treturn null;\r\n\r\n\t}\r\n\r\n\tpublic update( deltaTime: number ) {\r\n\r\n\t\tthis.updateParentElement();\r\n\r\n\t\tthis.updateScrollPos( deltaTime );\r\n\r\n\t\tthis.applyParentElementTransform();\r\n\r\n\t\tthis.sumDelta = 0.0;\r\n\r\n\t}\r\n\r\n\tprotected updateScrollPos( deltaTime: number ) {\r\n\r\n\t\tthis.updateAutoMove( deltaTime );\r\n\r\n\t\tthis.addScrollPos();\r\n\r\n\t\tthis.calcScrollProperties( deltaTime );\r\n\r\n\t}\r\n\r\n\tprotected updateAutoMove( deltaTime: number ) {\r\n\r\n\t\tthis.animator.update( deltaTime );\r\n\r\n\t\tif ( this.isAutoMove ) {\r\n\r\n\t\t\tlet pos = this.animator.get<number>( 'scrollPos' );\r\n\r\n\t\t\tif ( pos ) {\r\n\r\n\t\t\t\tthis.sumDelta = pos - this.scrollPos;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tprotected addScrollPos() {\r\n\r\n\t\tif ( this.checkUnlockStopScroll( this.sumDelta ) ) {\r\n\r\n\t\t\tlet stopPos = this.checkThrow( this.sumDelta );\r\n\r\n\t\t\tif ( stopPos !== null ) {\r\n\r\n\t\t\t\tthis._scrollPos = stopPos;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthis._scrollPos += this.sumDelta;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis._scrollPos = Math.max( Math.min( this._scrollPos, this.parentElementHeight - window.innerHeight ), 0 );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tprotected checkUnlockStopScroll( scrollDelta: number ) {\r\n\r\n\t\tlet unlockDir: number = 0;\r\n\t\tlet unlock: boolean = false;\r\n\r\n\t\tif ( this.caughtSection ) {\r\n\r\n\t\t\tlet distance = this.scrollPos - this.scrollPosDelay;\r\n\r\n\t\t\tif ( scrollDelta * distance < 0 || Math.abs( distance ) < 10.0 || this.isAutoMove ) {\r\n\r\n\t\t\t\tif ( scrollDelta < 0 ) {\r\n\r\n\t\t\t\t\tif ( - scrollDelta > ( this.caughtSection.startScrollUp || 0 ) || this.isAutoMove ) {\r\n\r\n\t\t\t\t\t\tunlockDir = - 1;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else if ( scrollDelta > 0 ) {\r\n\r\n\t\t\t\t\tif ( scrollDelta > ( this.caughtSection.startScrollDown || 0 ) || this.isAutoMove ) {\r\n\r\n\t\t\t\t\t\tunlockDir = 1;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( unlockDir != 0 && this.caughtSection.events ) {\r\n\r\n\t\t\t\tif ( this.caughtSection.events.onStartScroll ) {\r\n\r\n\t\t\t\t\tlet args: PageScrollerEventArgs = {\r\n\t\t\t\t\t\tscroller: this,\r\n\t\t\t\t\t\tsection: this.caughtSection,\r\n\t\t\t\t\t\tscrollMode: this.isAutoMove ? 'auto' : 'manual',\r\n\t\t\t\t\t\tscrollDelta: scrollDelta,\r\n\t\t\t\t\t\tscrollPower: Math.abs( scrollDelta ),\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\tlet unlock: boolean | void;\r\n\r\n\t\t\t\t\tlet commonUnlock = this.caughtSection.events.onStartScroll.common && this.caughtSection.events.onStartScroll.common( args );\r\n\t\t\t\t\tif ( unlockDir == - 1 ) unlock = this.caughtSection.events.onStartScroll.up && this.caughtSection.events.onStartScroll.up( args );\r\n\t\t\t\t\tif ( unlockDir == 1 ) unlock = this.caughtSection.events.onStartScroll.down && this.caughtSection.events.onStartScroll.down( args );\r\n\r\n\t\t\t\t\tif ( commonUnlock === false || unlock === false ) {\r\n\r\n\t\t\t\t\t\tunlockDir = 0;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tunlock = unlockDir != 0;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tunlock = true;\r\n\r\n\t\t}\r\n\r\n\t\tif ( unlockDir ) {\r\n\r\n\t\t\tthis.caughtSection = null;\r\n\r\n\t\t}\r\n\r\n\t\treturn unlock;\r\n\r\n\t}\r\n\r\n\tprotected checkThrow( scrollDelta: number ) {\r\n\r\n\t\tfor ( let i = 0; i < this.sections.length; i ++ ) {\r\n\r\n\t\t\tlet sec = this.sections[ i ];\r\n\r\n\t\t\tsec.updateRect( this._scrollPos );\r\n\r\n\t\t\tlet stopPos = this.checkThrowSectionEvents( sec, scrollDelta );\r\n\r\n\t\t\tif ( stopPos !== null ) {\r\n\r\n\t\t\t\tthis.caughtSection = sec;\r\n\r\n\t\t\t\treturn this.isAutoMove ? null : stopPos;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\r\n\t}\r\n\r\n\tprotected checkThrowSectionEvents( section: PageScrollerSection, scrollDelta: number ) {\r\n\r\n\t\tlet percentage = section.getScrollPercentage();\r\n\t\tlet movedPercentage = section.getScrollPercentage( scrollDelta );\r\n\r\n\t\tif ( section.events ) {\r\n\r\n\t\t\tlet args: PageScrollerEventArgs = {\r\n\t\t\t\tscroller: this,\r\n\t\t\t\tsection: section,\r\n\t\t\t\tscrollMode: this.isAutoMove ? 'auto' : 'manual',\r\n\t\t\t\tscrollDelta: scrollDelta,\r\n\t\t\t\tscrollPower: Math.abs( scrollDelta ),\r\n\t\t\t};\r\n\r\n\t\t\tif ( section.events.onArrivals ) {\r\n\r\n\t\t\t\tfor ( let i = 0; i < section.events.onArrivals.length; i ++ ) {\r\n\r\n\t\t\t\t\tlet arrivalEvent = section.events.onArrivals[ i ];\r\n\r\n\t\t\t\t\tlet isThrow = this.checkThrowLine( percentage, movedPercentage, arrivalEvent.percentage );\r\n\r\n\t\t\t\t\tif ( isThrow != 0 ) {\r\n\r\n\t\t\t\t\t\tarrivalEvent.event.common && arrivalEvent.event.common( args );\r\n\r\n\t\t\t\t\t\tif ( isThrow < 0 ) {\r\n\r\n\t\t\t\t\t\t\tarrivalEvent.event.up && arrivalEvent.event.up( args );\r\n\r\n\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\tarrivalEvent.event.down && arrivalEvent.event.down( args );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( section.stop ) {\r\n\r\n\t\t\tif ( this.checkThrowLine( percentage, movedPercentage, 1 ) ) {\r\n\r\n\t\t\t\tthis.dragUnlockReady = false;\r\n\r\n\t\t\t\treturn section.element.offsetTop + ( section.bottom ? section.rect.height - window.innerHeight : 0 );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\r\n\t}\r\n\r\n\tprotected checkThrowLine( a: number, b :number, line: number ) {\r\n\r\n\t\tif ( a < line && line <= b ) {\r\n\r\n\t\t\treturn 1;\r\n\r\n\t\t} else if ( a > line && line >= b ) {\r\n\r\n\t\t\treturn - 1;\r\n\r\n\t\t} else if ( a == line && line == b ) {\r\n\r\n\t\t\treturn 2;\r\n\r\n\t\t} else {\r\n\r\n\t\t\treturn 0;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tprotected calcScrollProperties( deltaTime: number ) {\r\n\r\n\t\tthis._scrollPosDelay += ( this._scrollPos - this._scrollPosDelay ) * ( this.isTouching && ! this.caughtSection ? this.dragDelaySpeed : this.delaySpeed ) * Math.min( 1.0, deltaTime * 60 );\r\n\r\n\t\tthis._scrollPercentage = this.scrollPosToPerecntage( this.scrollPos );\r\n\r\n\t\tthis._scrollPercentageDelay = this.scrollPosToPerecntage( this.scrollPosDelay );\r\n\r\n\t}\r\n\r\n\tprotected scrollPosToPerecntage( scrollPos: number ) {\r\n\r\n\t\treturn scrollPos / ( this.parentElementHeight - window.innerHeight );\r\n\r\n\t}\r\n\r\n\r\n\tprotected updateParentElement() {\r\n\r\n\t\tthis.parentElementHeight = this.parentElement.getBoundingClientRect().height;\r\n\r\n\t}\r\n\r\n\tprotected applyParentElementTransform() {\r\n\r\n\t\tthis.parentElement.style.transform = 'translate3d( 0,' + - this.scrollPosDelay.toString() + 'px, 0 )';\r\n\r\n\t}\r\n\r\n\tpublic scroll( delta: number ) {\r\n\r\n\t\tthis.deltaMem = ( this.deltaMem + delta ) / 2;\r\n\t\tthis.sumDelta += delta;\r\n\r\n\t}\r\n\r\n\tpublic catch() {\r\n\r\n\t\tif ( this.isAutoMove ) return;\r\n\r\n\t\tthis.isTouching = true;\r\n\t\tthis.deltaMem = 0;\r\n\r\n\t\tif ( ! this.caughtSection ) {\r\n\r\n\t\t\tthis._scrollPos = this._scrollPosDelay;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tpublic drag( delta: number ) {\r\n\r\n\t\tif ( ! this.isTouching ) return;\r\n\r\n\t\tthis.scroll( delta );\r\n\r\n\t}\r\n\r\n\tpublic release( snap: number = 10.0 ) {\r\n\r\n\t\tif ( ! this.isTouching ) return;\r\n\r\n\t\tthis.isTouching = false;\r\n\r\n\t\tif ( ! this.caughtSection ) {\r\n\r\n\t\t\tthis.scroll( this.deltaMem * snap );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tpublic autoMove( param: PageScrollerAutoMoveParam ) {\r\n\r\n\t\tlet targetPos: number = 0;\r\n\r\n\t\tif ( ( param.target as PageScrollerSection ).isPageScrollerSection ) {\r\n\r\n\t\t\tlet target = param.target as PageScrollerSection;\r\n\t\t\tlet bottomOffset = param.bottom ? target.rect.height - window.innerHeight : 0;\r\n\r\n\t\t\ttargetPos = target.element.offsetTop + bottomOffset;\r\n\r\n\t\t} else if ( typeof param.target == 'string' ) {\r\n\r\n\t\t\tlet target = this.get( param.target );\r\n\r\n\t\t\tif ( target ) {\r\n\r\n\t\t\t\tlet bottomOffset = param.bottom ? target.rect.height - window.innerHeight : 0;\r\n\r\n\t\t\t\ttargetPos = target.element.offsetTop + bottomOffset;\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if ( typeof param.target == 'number' ) {\r\n\r\n\t\t\ttargetPos = param.target;\r\n\r\n\t\t}\r\n\r\n\t\tthis.animator.setValue( 'scrollPos', this._scrollPos );\r\n\t\tthis.animator.animate( 'scrollPos', targetPos, param.duration, () => {\r\n\r\n\t\t\tif ( param.callBack ) param.callBack();\r\n\r\n\t\t\tthis.isAutoMove = false;\r\n\r\n\t\t}, param.easing );\r\n\r\n\t\t//onStartScrollAutoMove\r\n\t\tthis.sumDelta = ( targetPos - this.sumDelta ) / Math.abs( targetPos - this.sumDelta ) * 0.00001;\r\n\r\n\t\tthis.isAutoMove = true;\r\n\r\n\t}\r\n\r\n}\r\n","import * as THREE from 'three';\r\nimport { PageScroller } from '.';\r\n\r\nexport declare interface PageScrollerEventArgs {\r\n\tscroller: PageScroller;\r\n\tsection: PageScrollerSection;\r\n\tscrollMode: string;\r\n\tscrollDelta: number;\r\n\tscrollPower: number;\r\n}\r\n\r\ndeclare interface PageScrollerEvent {\r\n\tcommon?: ( args: PageScrollerEventArgs ) => void | boolean;\r\n\tup?: ( args: PageScrollerEventArgs ) => void | boolean;\r\n\tdown?: ( args: PageScrollerEventArgs ) => void | boolean;\r\n}\r\n\r\ndeclare interface PageScrollerEvents {\r\n\tonStartScroll?: PageScrollerEvent\r\n\tonArrivals?: {\r\n\t\tpercentage: number;\r\n\t\tevent: PageScrollerEvent;\r\n\t}[]\r\n}\r\n\r\nexport declare interface PageScrollerSectionParams {\r\n\tname: string;\r\n\telement: HTMLElement;\r\n\tevents?: PageScrollerEvents;\r\n\tstop?: boolean;\r\n\tstartScrollUp?: number;\r\n\tstartScrollDown?: number;\r\n\tbottom?: boolean;\r\n}\r\n\r\ndeclare interface PageScrollerSectionRect {\r\n\tx: number;\r\n\ty: number;\r\n\twidth: number;\r\n\theight: number;\r\n}\r\n\r\nexport class PageScrollerSection {\r\n\r\n\tpublic name: string;\r\n\tpublic element: HTMLElement;\r\n\tpublic rect: PageScrollerSectionRect;\r\n\tpublic startScrollUp: number;\r\n\tpublic startScrollDown: number;\r\n\tpublic stop?: boolean;\r\n\tpublic events?: PageScrollerEvents;\r\n\tpublic bottom?: boolean;\r\n\tpublic timelinePercentage: number = 0;\r\n\r\n\tconstructor( params: PageScrollerSectionParams ) {\r\n\r\n\t\tthis.name = params.name;\r\n\t\tthis.element = params.element;\r\n\t\tthis.rect = this.element.getBoundingClientRect();\r\n\t\tthis.stop = params.stop;\r\n\t\tthis.events = params.events;\r\n\t\tthis.bottom = params.bottom;\r\n\t\tthis.startScrollDown = params.startScrollDown || 0;\r\n\t\tthis.startScrollUp = params.startScrollUp || 0;\r\n\r\n\t\tthis.updateRect( 0 );\r\n\r\n\t}\r\n\r\n\tpublic get isPageScrollerSection() {\r\n\r\n\t\treturn true;\r\n\r\n\t}\r\n\r\n\tpublic updateRect( scrollPos: number ) {\r\n\r\n\t\tthis.rect = {\r\n\t\t\tx: this.element.offsetLeft,\r\n\t\t\ty: this.element.offsetTop - scrollPos,\r\n\t\t\twidth: this.element.offsetWidth,\r\n\t\t\theight: this.element.offsetHeight\r\n\t\t};\r\n\r\n\t}\r\n\r\n\tpublic getScrollPercentage( offsetPos?: number ) {\r\n\r\n\t\tlet bottomOffset = ( this.bottom ? this.rect.height - window.innerHeight : 0 );\r\n\t\tlet pos = ( this.rect.y + bottomOffset ) - ( offsetPos || 0 );\r\n\r\n\t\tlet firstHalfHeight = this.bottom ? this.rect.height : window.innerHeight;\r\n\t\tlet firstHalf = Math.min( 1.0, 1.0 - ( pos / firstHalfHeight ) );\r\n\r\n\t\tlet secondHalfHeight = this.bottom ? window.innerHeight : this.rect.height;\r\n\t\tlet secondHalf = Math.max( 0.0, - pos / secondHalfHeight );\r\n\r\n\t\tlet percentage = firstHalf + secondHalf;\r\n\r\n\t\treturn percentage;\r\n\r\n\t}\r\n\r\n}\r\n","import * as THREE from 'three';\n\nexport declare interface Transform {\n\tposition?: THREE.Vector3;\n\trotation?: THREE.Quaternion;\n\tscale?: number;\n}\n\nexport declare interface BaseTransform {\n\tposition: THREE.Vector3;\n\trotation: THREE.Quaternion;\n\tscale: THREE.Vector3\n}\n\nexport class LayoutController {\n\n\tprotected obj: THREE.Object3D;\n\tprotected baseTransform: BaseTransform;\n\tprotected transform: Transform;\n\n\tconstructor( object: THREE.Object3D, transform: Transform, isAbsolutePosition?: boolean ) {\n\n\t\tthis.obj = object;\n\n\t\tthis.baseTransform = {\n\t\t\tposition: this.obj.position.clone(),\n\t\t\trotation: this.obj.quaternion.clone(),\n\t\t\tscale: this.obj.scale.clone()\n\t\t};\n\n\t\tthis.transform = transform;\n\n\t\tif ( ! isAbsolutePosition ) {\n\n\t\t\tthis.transform.position && this.transform.position.add( this.obj.position );\n\t\t\tthis.transform.rotation && this.transform.rotation.multiply( this.obj.quaternion );\n\n\t\t}\n\n\t}\n\n\tpublic updateTransform( weight: number ) {\n\n\t\tif ( this.transform.position ) {\n\n\t\t\tthis.obj.position.copy( this.baseTransform.position.clone().lerp( this.transform.position, weight ) );\n\n\t\t}\n\n\t\tif ( this.transform.rotation ) {\n\n\t\t\tthis.obj.quaternion.copy( this.baseTransform.rotation.clone().slerp( this.transform.rotation, weight ) );\n\n\t\t}\n\n\t\tif ( this.transform.scale ) {\n\n\t\t\tthis.obj.scale.copy( this.baseTransform.scale.clone().multiplyScalar( this.transform.scale * ( weight ) + 1.0 - weight ) );\n\n\t\t}\n\n\t}\n\n}\n","import * as THREE from 'three';\r\nimport { EasingSet } from './Easings';\r\nimport { Lerps, LerpFunc } from './Lerps';\r\n\r\nexport declare interface TimelineAnimatorKeyFrame<T> {\r\n\ttime: number;\r\n\tvalue: T;\r\n\teasing?: EasingSet;\r\n}\r\n\r\nexport declare interface TimelineAnimatorVariable<T> {\r\n\tkeyframes: TimelineAnimatorKeyFrame<T>[];\r\n\tlerpFunc?: LerpFunc<T>;\r\n\tvalue: T;\r\n\teasing?: EasingSet;\r\n}\r\n\r\nexport declare interface TimelineAnimatorAddParams<T> {\r\n\tname: string;\r\n\tkeyframes: TimelineAnimatorKeyFrame<T>[];\r\n\tcustomLerp?: LerpFunc<T>,\r\n\teasing?: EasingSet;\r\n}\r\nexport class TimelineAnimator {\r\n\r\n\tprotected variables: { [name: string]: TimelineAnimatorVariable<any> } = {};\r\n\tprotected time: number;\r\n\tpublic defaultEasing?: EasingSet;\r\n\r\n\tconstructor( ) {\r\n\r\n\t\tthis.time = 0;\r\n\r\n\t}\r\n\r\n\tpublic add<T>( params: TimelineAnimatorAddParams<T> ) {\r\n\r\n\t\tif ( params.keyframes.length == 0 ) {\r\n\r\n\t\t\tconsole.warn( '\"' + params.name + '\"', 'Keyframe length is 0!!' );\r\n\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tthis.variables[ params.name ] = {\r\n\t\t\tkeyframes: params.keyframes,\r\n\t\t\tlerpFunc: params.customLerp,\r\n\t\t\teasing: params.easing,\r\n\t\t\tvalue: null\r\n\t\t};\r\n\r\n\t\tthis.variables[ params.name ].keyframes.sort( ( a, b ) => {\r\n\r\n\t\t\treturn ( a.time < b.time ) ? - 1 : 1;\r\n\r\n\t\t} );\r\n\r\n\t\tif ( ! this.variables[ params.name ].lerpFunc ) {\r\n\r\n\t\t\tthis.variables[ params.name ].lerpFunc = Lerps.getLerpFunc( params.keyframes[ 0 ].value );\r\n\r\n\t\t}\r\n\r\n\t\tthis.calc();\r\n\r\n\t\treturn params.name;\r\n\r\n\t}\r\n\r\n\tpublic get<T>( name: string ): T | null {\r\n\r\n\t\tif ( this.variables[ name ] ) {\r\n\r\n\t\t\treturn this.variables[ name ].value;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconsole.warn( '\"' + name + '\"' + ' is not exist' );\r\n\r\n\t\t\treturn null;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tpublic getVariableObject<T>( name: string ): TimelineAnimatorVariable<T> | null {\r\n\r\n\t\tif ( this.variables[ name ] ) {\r\n\r\n\t\t\treturn this.variables[ name ];\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconsole.warn( '\"' + name + '\"' + ' is not exist' );\r\n\r\n\t\t\treturn null;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tpublic update( time: number ) {\r\n\r\n\t\tthis.time = time;\r\n\r\n\t\tthis.calc();\r\n\r\n\t}\r\n\r\n\tprotected calc() {\r\n\r\n\t\tlet keys = Object.keys( this.variables );\r\n\r\n\t\tfor ( let i = 0; i < keys.length; i ++ ) {\r\n\r\n\t\t\tlet valiable = this.variables[ keys[ i ] ];\r\n\t\t\tlet kfs = valiable.keyframes;\r\n\r\n\t\t\tlet a: TimelineAnimatorKeyFrame<any> | null = null;\r\n\t\t\tlet b: TimelineAnimatorKeyFrame<any> | null = null;\r\n\r\n\t\t\tlet t = Math.max( kfs[ 0 ].time, Math.min( kfs[ kfs.length - 1 ].time, this.time ) );\r\n\r\n\t\t\tlet easing: EasingSet | null | undefined = null;\r\n\r\n\t\t\tif ( kfs.length == 1 ) {\r\n\r\n\t\t\t\tt = kfs[ 0 ].time;\r\n\t\t\t\ta = b = kfs[ 0 ];\r\n\r\n\t\t\t} else {\r\n\r\n\r\n\t\t\t\tfor ( let j = 0; j < kfs.length - 1; j ++ ) {\r\n\r\n\t\t\t\t\ta = kfs[ j ];\r\n\t\t\t\t\tb = kfs[ j + 1 ];\r\n\r\n\t\t\t\t\teasing = a.easing;\r\n\r\n\t\t\t\t\tif ( a.time <= t && t <= b.time ) break;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( a != null && b != null ) {\r\n\r\n\t\t\t\t\tt = ( t - a.time ) / ( b.time - a.time );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( easing ) {\r\n\r\n\t\t\t\tt = easing.func( t, easing.args );\r\n\r\n\t\t\t} else if ( valiable.easing ) {\r\n\r\n\t\t\t\tt = valiable.easing.func( t, valiable.easing.args );\r\n\r\n\t\t\t} else if ( this.defaultEasing ) {\r\n\r\n\t\t\t\tt = this.defaultEasing.func( t, this.defaultEasing.args );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( valiable.lerpFunc ) {\r\n\r\n\t\t\t\tif ( a != null && b != null ) {\r\n\r\n\t\t\t\t\tvaliable.value = valiable.lerpFunc( a.value, b.value, t );\r\n\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\tif ( valiable.value === false ) {\r\n\r\n\t\t\t\t\tconsole.log( 'error at ' + '\"' + keys[ i ] + '\"' );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tconsole.warn( '\"' + keys[ i ] + '\"', 'lerp function is not set.' );\r\n\r\n\t\t\t}\r\n\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n","module.exports = __WEBPACK_EXTERNAL_MODULE__807__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tif(__webpack_module_cache__[moduleId]) {\n\t\treturn __webpack_module_cache__[moduleId].exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// module exports must be returned from runtime so entry inlining is disabled\n// startup\n// Load entry module and return exports\nreturn __webpack_require__(250);\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop)","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};"],"sourceRoot":""}