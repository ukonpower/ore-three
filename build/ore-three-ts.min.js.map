{"version":3,"sources":["webpack://ORE/webpack/universalModuleDefinition","webpack://ORE/./node_modules/lethargy/lethargy.js","webpack://ORE/./node_modules/parse-unit/index.js","webpack://ORE/./node_modules/to-px/browser.js","webpack://ORE/./src/utils/Easings.ts","webpack://ORE/./src/utils/Lerps.ts","webpack://ORE/./src/core/BaseLayer.ts","webpack://ORE/./src/utils/Pointer.ts","webpack://ORE/./src/core/Controller.ts","webpack://ORE/./src/utils/Animator.ts","webpack://ORE/./src/utils/Uniforms.ts","webpack://ORE/./src/utils/Background/index.ts","webpack://ORE/./src/utils/Background/shaders/background.vs","webpack://ORE/./src/utils/DOMMesh/index.ts","webpack://ORE/./src/utils/DOMMesh/domMesh.vs","webpack://ORE/./src/utils/EventDispatcher.ts","webpack://ORE/./src/utils/GPUComputationController/index.ts","webpack://ORE/./src/utils/GPUComputationController/shaders/passThrough.fs","webpack://ORE/./src/utils/GPUComputationController/shaders/passThrough.vs","webpack://ORE/./src/utils/MouseRotator.ts","webpack://ORE/./src/utils/PostProcessing/index.ts","webpack://ORE/./src/utils/PostProcessing/shaders/passThrow.vs","webpack://ORE/./src/utils/PageScroller/index.ts","webpack://ORE/./src/utils/PageScroller/PageScrollerSection.ts","webpack://ORE/./src/utils/LayoutController.ts","webpack://ORE/./src/utils/TimelineAnimator.ts","webpack://ORE/external {\"commonjs\":\"three\",\"commonjs2\":\"three\",\"amd\":\"three\",\"root\":\"THREE\"}","webpack://ORE/webpack/bootstrap","webpack://ORE/webpack/startup","webpack://ORE/webpack/runtime/compat get default export","webpack://ORE/webpack/runtime/define property getters","webpack://ORE/webpack/runtime/hasOwnProperty shorthand","webpack://ORE/webpack/runtime/make namespace object"],"names":["root","factory","exports","module","require","define","amd","self","__WEBPACK_EXTERNAL_MODULE__807__","this","Lethargy","stability","sensitivity","tolerance","delay","Math","abs","lastUpDeltas","i","ref","results","push","call","lastDownDeltas","deltasTimestamp","prototype","check","e","lastDelta","originalEvent","wheelDelta","deltaY","detail","Date","now","shift","isInertia","direction","lastDeltas","lastDeltasNew","lastDeltasOld","newAverage","newSum","oldAverage","oldSum","slice","reduce","t","s","length","showLastUpDeltas","showLastDownDeltas","str","out","String","num","parseFloat","match","parseUnit","toPX","PIXELS_PER_INCH","getSizeBrutal","document","body","getPropertyInPX","element","prop","parts","getComputedStyle","getPropertyValue","unit","testDIV","createElement","style","appendChild","size","removeChild","trim","toLowerCase","window","clientHeight","innerWidth","innerHeight","min","max","isNaN","px","Easings","Lerps","readyAnimate","time","info","name","canvas","wrapperElement","wrapperElementRect","aspect","mainAspect","wideAspect","portraitAspect","portraitWeight","wideWeight","windowSize","windowAspectRatio","canvasSize","canvasPixelSize","canvasAspectRatio","commonUniforms","value","scene","camera","tick","deltaTime","animate","onBind","layerInfo","getBoundingClientRect","renderer","debug","checkShaderErrors","setSize","setTimeout","onResize","onUnbind","removeChildrens","object","children","geo","mat","isMesh","geometry","material","remove","dispose","newWindowSize","newCanvasSize","set","clientWidth","copy","x","y","clone","multiplyScalar","getPixelRatio","updateProjectionMatrix","pointerEvent","canvasPosition","position","normalizedPosition","divide","subScalar","args","event","delta","windowPosition","pointerEventType","onHover","onTouchStart","onTouchMove","onTouchEnd","onWheel","trackpadDelta","trackpadMemDelta","trackpadMax","lethargy","NaN","userAgent","navigator","isSP","indexOf","platform","undefined","standalone","addEventListener","touchEvent","bind","wheel","passive","isTouching","getNormalizePosition","p","getRelativePosition","elm","normalize","pos","rect","getClientRects","left","top","width","height","setPos","type","dispatch","pageX","pageXOffset","pageY","pageYOffset","dispatchEvent","update","deltaMode","DOM_DELTA_LINE","DOM_DELTA_PAGE","d","wheelEvent","parameter","layers","silent","console","log","clock","pointer","Pointer","onOrientationDevice","onWindowResize","getDelta","requestAnimationFrame","getLayer","layerName","addLayer","layer","removeLayer","layerNmae","splice","sigmoid","weight","variables","e1","exp","e2","smoothstep","lerpNumber","a","b","linear","easeInQuad","easeOutQuad","easeInOutQuad","easeInCubic","easeOutCubic","easeInOutCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint","number","numberArray","c","THREEVectors","lerp","THREEQuaternion","slerp","THREEEuler","ac","bc","z","getLerpFunc","Array","isVector2","isVector3","isVector4","isColor","isQuaternion","isEuler","UniformsLib","_isAnimating","animatingCount","dispatchEvents","add","params","lerpFunc","customLerpFunc","initValue","variable","startValue","goalValue","easing","func","setEasing","warn","duration","callback","Promise","resolve","setValue","onAnimationFinished","cancelAnimate","get","getVariableObject","mute","applyToUniforms","uniforms","keys","Object","pop","param","posArray","indexArray","uvArray","Float32Array","indices","Uint32Array","uv","setAttribute","setIndex","vertexShader","transparent","depthFunc","frustumCulled","resize","resolution","aspectRatio","mergeUniforms","res","assign","uni","domPos","domSize","_uniforms","events","listener","target","removeEventListener","dataSize","renderTargets","tempDataLinear","createData","minFilter","magFilter","tempDataNear","materials","mesh","extensions","createInitializeTexture","texture","needsUpdate","initTex_texParam","textureParam","initTex","customParam","isiOS","wrapS","wrapT","format","stencilBuffer","depthBuffer","isDataTexture","buf","data","buffer","initKernel","createKernel","fragmentShader","tex","compute","kernel","temp","currentRenderTarget","getRenderTarget","setRenderTarget","render","swapBuffers","b1","b2","tmp","resizeData","objs","scrollVel","axis","q","setFromAxisAngle","multiply","quaternion","addVelocity","scrollDelta","addVectors","screen","createMaterials","effect","inputRenderTargets","renderTarget","renderTargetMem","j","getSize","parentElement","delaySpeed","dragDelaySpeed","deltaMem","scrollReady","sumDelta","_scrollPos","_scrollPercentage","_scrollPosDelay","_scrollPercentageDelay","dragStop","dragUnlockReady","sections","initAnimator","animator","Animator","sum","sec","secBef","offsetTop","scrollPosDelay","bottom","section","sortSections","sort","timelinePercentage","updateParentElement","updateScrollPos","applyParentElementTransform","updateAutoMove","addScrollPos","calcScrollProperties","isAutoMove","scrollPos","checkUnlockStopScroll","stopPos","checkThrow","parentElementHeight","unlockDir","unlock","caughtSection","distance","startScrollUp","startScrollDown","onStartScroll","scroller","scrollMode","scrollPower","commonUnlock","common","up","down","updateRect","checkThrowSectionEvents","percentage","getScrollPercentage","movedPercentage","arrivalEvents","onArrivals","arrivalEvent","isThrow","checkThrowLine","stop","line","scrollPosToPerecntage","transform","toString","scroll","catch","drag","release","snap","autoMove","targetPos","isPageScrollerSection","bottomOffset","callBack","offsetLeft","offsetWidth","offsetHeight","offsetPos","firstHalfHeight","firstHalf","secondHalfHeight","isAbsolutePosition","obj","baseTransform","rotation","baseScale","scale","updateTransform","keyframes","customLerp","calc","valiable","kfs","defaultEasing","__webpack_module_cache__","__webpack_require__","moduleId","__webpack_modules__","n","getter","__esModule","definition","key","o","defineProperty","enumerable","hasOwnProperty","r","Symbol","toStringTag"],"mappings":"CAAA,SAA2CA,EAAMC,GAC1B,iBAAZC,SAA0C,iBAAXC,OACxCA,OAAOD,QAAUD,EAAQG,QAAQ,UACR,mBAAXC,QAAyBA,OAAOC,IAC9CD,OAAO,CAAC,SAAUJ,GACQ,iBAAZC,QACdA,QAAa,IAAID,EAAQG,QAAQ,UAEjCJ,EAAU,IAAIC,EAAQD,EAAY,OARpC,CASGO,MAAM,SAASC,GAClB,M,gCCTA,YAGuD,OAAZN,EAAmBA,EAAUO,MAEjEC,SAAW,WACd,SAASA,EAASC,EAAWC,EAAaC,EAAWC,GACnDL,KAAKE,UAAyB,MAAbA,EAAoBI,KAAKC,IAAIL,GAAa,EAC3DF,KAAKG,YAA6B,MAAfA,EAAsB,EAAIG,KAAKC,IAAIJ,GAAe,IACrEH,KAAKI,UAAyB,MAAbA,EAAoB,EAAIE,KAAKC,IAAIH,GAAa,IAC/DJ,KAAKK,MAAiB,MAATA,EAAgBA,EAAQ,IACrCL,KAAKQ,aAAe,WAClB,IAAIC,EAAGC,EAAKC,EAEZ,IADAA,EAAU,GACLF,EAAI,EAAGC,EAAuB,EAAjBV,KAAKE,UAAe,GAAKQ,EAAMD,GAAKC,EAAMD,GAAKC,EAAK,GAAKA,EAAMD,IAAMA,IACrFE,EAAQC,KAAK,MAEf,OAAOD,GACNE,KAAKb,MACRA,KAAKc,eAAiB,WACpB,IAAIL,EAAGC,EAAKC,EAEZ,IADAA,EAAU,GACLF,EAAI,EAAGC,EAAuB,EAAjBV,KAAKE,UAAe,GAAKQ,EAAMD,GAAKC,EAAMD,GAAKC,EAAK,GAAKA,EAAMD,IAAMA,IACrFE,EAAQC,KAAK,MAEf,OAAOD,GACNE,KAAKb,MACRA,KAAKe,gBAAkB,WACrB,IAAIN,EAAGC,EAAKC,EAEZ,IADAA,EAAU,GACLF,EAAI,EAAGC,EAAuB,EAAjBV,KAAKE,UAAe,GAAKQ,EAAMD,GAAKC,EAAMD,GAAKC,EAAK,GAAKA,EAAMD,IAAMA,IACrFE,EAAQC,KAAK,MAEf,OAAOD,GACNE,KAAKb,MA6DV,OA1DAC,EAASe,UAAUC,MAAQ,SAASC,GAClC,IAAIC,EAWJ,OAToB,OADpBD,EAAIA,EAAEE,eAAiBF,GACjBG,WACJF,EAAYD,EAAEG,WACO,MAAZH,EAAEI,OACXH,GAAwB,GAAZD,EAAEI,OACQ,MAAZJ,EAAEK,QAAgC,IAAbL,EAAEK,SACjCJ,GAAwB,GAAZD,EAAEK,QAEhBvB,KAAKe,gBAAgBH,KAAKY,KAAKC,OAC/BzB,KAAKe,gBAAgBW,QACjBP,EAAY,GACdnB,KAAKQ,aAAaI,KAAKO,GACvBnB,KAAKQ,aAAakB,QACX1B,KAAK2B,UAAU,KAEtB3B,KAAKc,eAAeF,KAAKO,GACzBnB,KAAKc,eAAeY,QACb1B,KAAK2B,WAAW,KAK3B1B,EAASe,UAAUW,UAAY,SAASC,GACtC,IAAIC,EAAYC,EAAeC,EAAeC,EAAYC,EAAQC,EAAYC,EAE9E,OAAsB,QADtBN,GAA4B,IAAfD,EAAmB5B,KAAKc,eAAiBd,KAAKQ,cAC5C,GACNoB,IAEL5B,KAAKe,gBAAkC,EAAjBf,KAAKE,UAAiB,GAAKF,KAAKK,MAAQmB,KAAKC,OAASI,EAAW,KAAOA,EAA6B,EAAjB7B,KAAKE,UAAiB,MAGpI6B,EAAgBF,EAAWO,MAAM,EAAGpC,KAAKE,WACzC4B,EAAgBD,EAAWO,MAAMpC,KAAKE,UAA4B,EAAjBF,KAAKE,WACtDiC,EAASJ,EAAcM,QAAO,SAASC,EAAGC,GACxC,OAAOD,EAAIC,KAEbN,EAASH,EAAcO,QAAO,SAASC,EAAGC,GACxC,OAAOD,EAAIC,KAEbL,EAAaC,EAASJ,EAAcS,OACpCR,EAAaC,EAASH,EAAcU,OAChClC,KAAKC,IAAI2B,GAAc5B,KAAKC,IAAIyB,EAAahC,KAAKI,YAAeJ,KAAKG,YAAcG,KAAKC,IAAIyB,IACxFJ,IAMX3B,EAASe,UAAUyB,iBAAmB,WACpC,OAAOzC,KAAKQ,cAGdP,EAASe,UAAU0B,mBAAqB,WACtC,OAAO1C,KAAKc,gBAGPb,EA1FO,KA8FfY,KAAKb,O,QCpGRN,EAAOD,QAAU,SAAmBkD,EAAKC,GAChCA,IACDA,EAAM,CAAE,EAAG,KAEfD,EAAME,OAAOF,GACb,IAAIG,EAAMC,WAAWJ,EAAK,IAG1B,OAFAC,EAAI,GAAKE,EACTF,EAAI,GAAKD,EAAIK,MAAM,qBAAqB,IAAM,GACvCJ,I,2BCNX,IAAIK,EAAY,EAAQ,KAExBvD,EAAOD,QAAUyD,EAEjB,IAAIC,EAAkBC,EAAc,KAAMC,SAASC,MAGnD,SAASC,EAAgBC,EAASC,GAChC,IAAIC,EAAQT,EAAUU,iBAAiBH,GAASI,iBAAiBH,IACjE,OAAOC,EAAM,GAAKR,EAAKQ,EAAM,GAAIF,GAInC,SAASJ,EAAcS,EAAML,GAC3B,IAAIM,EAAUT,SAASU,cAAc,OACrCD,EAAQE,MAAc,OAAI,MAAQH,EAClCL,EAAQS,YAAYH,GACpB,IAAII,EAAOX,EAAgBO,EAAS,UAAY,IAEhD,OADAN,EAAQW,YAAYL,GACbI,EAGT,SAAShB,EAAKP,EAAKa,GACjB,IAAKb,EAAK,OAAO,KAQjB,OANAa,EAAUA,GAAWH,SAASC,KAC9BX,GAAOA,EAAM,IAAM,MAAMyB,OAAOC,cAC7Bb,IAAYc,QAAUd,IAAYH,WACnCG,EAAUH,SAASC,MAGdX,GACL,IAAK,IACH,OAAOa,EAAQe,aAAe,IAChC,IAAK,KACL,IAAK,KACH,OAAOnB,EAAcT,EAAKa,GAC5B,IAAK,KACH,OAAOD,EAAgBC,EAAS,aAClC,IAAK,MACH,OAAOD,EAAgBF,SAASC,KAAM,aACxC,IAAK,KACH,OAAOgB,OAAOE,WAAW,IAC3B,IAAK,KACH,OAAOF,OAAOG,YAAY,IAC5B,IAAK,OACH,OAAOnE,KAAKoE,IAAIJ,OAAOE,WAAYF,OAAOG,aAAe,IAC3D,IAAK,OACH,OAAOnE,KAAKqE,IAAIL,OAAOE,WAAYF,OAAOG,aAAe,IAC3D,IAAK,KACH,OAAOtB,EACT,IAAK,KACH,OAAOA,EAAkB,KAC3B,IAAK,KACH,OAAOA,EAAkB,KAC3B,IAAK,KACH,OAAOA,EAAkB,GAC3B,IAAK,KACH,OAAOA,EAAkB,EAC3B,IAAK,KACH,OAAO,EAIX,IAAIO,EAAQT,EAAUN,GACtB,IAAKiC,MAAMlB,EAAM,KAAOA,EAAM,GAAI,CAChC,IAAImB,EAAK3B,EAAKQ,EAAM,GAAIF,GACxB,MAAqB,iBAAPqB,EAAkBnB,EAAM,GAAKmB,EAAK,KAGlD,OAAO,O,kXCnEQC,ECDAC,E,mVCqCjB,cAaC,mBAEC,cAAO,K,OANE,EAAAC,cAAwB,EAC3B,EAAAC,KAAe,EAOrB,EAAKC,KAAO,CACXC,KAAM,GACNC,OAAQ,KACRC,eAAgB,KAChBC,mBAAoB,KACpBC,OAAQ,CACPC,WAAY,GAAK,EACjBC,WAAY,GACZC,eAAgB,GAChBC,eAAgB,EAChBC,WAAY,GAEb1B,KAAM,CACL2B,WAAY,IAAI,UAChBC,kBAAmB,EACnBC,WAAY,IAAI,UAChBC,gBAAiB,IAAI,UACrBC,kBAAmB,IAIrB,EAAKC,eAAiB,CACrBjB,KAAM,CACLkB,MAAO,IAIT,EAAKC,MAAQ,IAAI,QACjB,EAAKC,OAAS,IAAI,oBAAyB,GAAI,EAAG,GAAK,K,EAoLzD,OAjO+B,OAiDvB,YAAAC,KAAP,SAAaC,GAEZvG,KAAKiF,MAAQsB,EAEbvG,KAAKkG,eAAejB,KAAKkB,MAAQnG,KAAKiF,KAEjCjF,KAAKgF,cAEThF,KAAKwG,QAASD,IAMT,YAAAC,QAAP,SAAgBD,KAET,YAAAE,OAAP,SAAeC,GAAf,WAEC1G,KAAKkF,KAAKC,KAAOuB,EAAUvB,KAC3BnF,KAAKkF,KAAKE,OAASsB,EAAUtB,OAC7BpF,KAAKkF,KAAKG,eAAiBqB,EAAUrB,eACrCrF,KAAKkF,KAAKI,mBAAqBoB,EAAUrB,gBAAkBqB,EAAUrB,eAAesB,wBACpF3G,KAAKkF,KAAKK,OAASmB,EAAUnB,QAAUvF,KAAKkF,KAAKK,OAEjDvF,KAAK4G,SAAW,IAAI,gBAAqB5G,KAAKkF,MAC3ClF,KAAK4G,SAASC,MAAMC,mBAAoB,EAC3C9G,KAAK4G,SAASG,QAASzC,OAAOE,WAAYF,OAAOG,aAEjDuC,YAAY,WAEX,EAAKC,WACL,EAAKjC,cAAe,IAElB,IAIG,YAAAkC,SAAP,WAEClH,KAAKmH,gBAAiBnH,KAAKoG,OAE3BpG,KAAKgF,cAAe,GAIX,YAAAmC,gBAAV,SAA2BC,GAI1B,IAFA,IAEU3G,EAFK2G,EAAOC,SAAS7E,OAER,EAAG/B,GAAK,EAAGA,IAAO,CAExCT,KAAKmH,gBAAiBC,EAAOC,SAAU5G,IAEvC,IAAI6G,OAAG,EACHC,OAAG,EAEAH,EAAOC,SAAU5G,GAAoB+G,SAE3CF,EAAQF,EAAOC,SAAU5G,GAAoBgH,SAC7CF,EAAUH,EAAOC,SAAU5G,GAAoBiH,UAIhDN,EAAOO,OAAUP,EAAOC,SAAU5G,IAE7B6G,GAEJA,EAAIM,UAIAL,GAEJA,EAAIK,YAQA,YAAAX,SAAP,WAEC,IAAIY,EAAgB,IAAI,UAAevD,OAAOE,WAAYF,OAAOG,aAC7DqD,EAAgB,IAAI,UAEnB9H,KAAKkF,KAAKG,eAEdyC,EAAcC,IAAK/H,KAAKkF,KAAKG,eAAe2C,YAAahI,KAAKkF,KAAKG,eAAed,cAIlFuD,EAAcG,KAAMJ,GAIrB,IAAIlC,EAAiB,GAAUmC,EAAcI,EAAIJ,EAAcK,EAAMnI,KAAKkF,KAAKK,OAAOG,iBAAqB1F,KAAKkF,KAAKK,OAAOC,WAAaxF,KAAKkF,KAAKK,OAAOG,gBAC1JC,EAAiBrF,KAAKoE,IAAK,EAAKpE,KAAKqE,IAAK,EAAKgB,IAE/C,IAAIC,EAAa,GAAUkC,EAAcI,EAAIJ,EAAcK,EAAMnI,KAAKkF,KAAKK,OAAOE,aAAiBzF,KAAKkF,KAAKK,OAAOC,WAAaxF,KAAKkF,KAAKK,OAAOE,YAClJG,EAAatF,KAAKoE,IAAK,EAAKpE,KAAKqE,IAAK,EAAKiB,IAE3C5F,KAAKkF,KAAKhB,KAAK2B,WAAWoC,KAAMJ,GAChC7H,KAAKkF,KAAKhB,KAAK4B,kBAAoB+B,EAAcK,EAAIL,EAAcM,EACnEnI,KAAKkF,KAAKhB,KAAK6B,WAAWkC,KAAMH,GAChC9H,KAAKkF,KAAKhB,KAAK8B,gBAAgBiC,KAAMH,EAAcM,QAAQC,eAAgBrI,KAAK4G,SAAS0B,kBACzFtI,KAAKkF,KAAKhB,KAAK+B,kBAAoB6B,EAAcI,EAAIJ,EAAcK,EACnEnI,KAAKkF,KAAKK,OAAOI,eAAiBA,EAClC3F,KAAKkF,KAAKK,OAAOK,WAAaA,EAE9B5F,KAAK4G,SAASG,QAAS/G,KAAKkF,KAAKhB,KAAK6B,WAAWmC,EAAGlI,KAAKkF,KAAKhB,KAAK6B,WAAWoC,GAC9EnI,KAAKqG,OAAOd,OAASvF,KAAKkF,KAAKhB,KAAK+B,kBACpCjG,KAAKqG,OAAOkC,yBAEPvI,KAAKkF,KAAKG,iBAEdrF,KAAKkF,KAAKI,mBAAqBtF,KAAKkF,KAAKG,eAAesB,0BAMnD,YAAA6B,aAAP,SAAqBtH,GAEpB,IAAIuH,EAAiBvH,EAAEwH,SAASN,QAE3BpI,KAAKkF,KAAKI,qBAEdmD,EAAeP,GAAKlI,KAAKkF,KAAKI,mBAAmB4C,EACjDO,EAAeN,GAAKnI,KAAKkF,KAAKI,mBAAmB6C,GAIlD,IAAIQ,EAAqBF,EAAeL,QACxCO,EAAmBC,OAAQ5I,KAAKkF,KAAKhB,KAAK6B,YAC1C4C,EAAmBR,EAAI,EAAMQ,EAAmBR,EAChDQ,EAAmBN,eAAgB,GAAMQ,UAAW,GAEpD,IAAIC,EAAuB,CAC1BC,MAAO7H,EAAEsH,aACTE,SAAUD,EAAeL,QACzBY,MAAO9H,EAAE8H,MAAMZ,QACfO,mBAAoBA,EAAmBP,QACvCa,eAAgB/H,EAAEwH,SAASN,SAGD,SAAtBlH,EAAEgI,iBAENlJ,KAAKmJ,QAASL,GAEmB,SAAtB5H,EAAEgI,iBAEblJ,KAAKoJ,aAAcN,GAEc,QAAtB5H,EAAEgI,iBAEblJ,KAAKqJ,YAAaP,GAEe,OAAtB5H,EAAEgI,kBAEblJ,KAAKsJ,WAAYR,IAMZ,YAAAM,aAAP,SAAqBN,KAEd,YAAAO,YAAP,SAAoBP,KAEb,YAAAQ,WAAP,SAAmBR,KAEZ,YAAAK,QAAP,SAAgBL,KAET,YAAAS,QAAP,SAAgBR,EAAmBS,KAEpC,EAjOA,CAA+B,mB,4XCrC/B,cAQC,mBAEC,cAAO,KAyIE,EAAAC,iBAAmB,EACnB,EAAAC,aAAuB,EACvB,EAAAC,SAAW,IAAI,EAAA1J,SAAU,EAAG,EAAG,KAzIxC,EAAKyI,SAAW,IAAI,UAAekB,IAAKA,KACxC,EAAKZ,MAAQ,IAAI,UAAeY,IAAKA,KAErC,IAAIC,EAAYC,UAAUD,U,OAC1B,EAAKE,KAAOF,EAAUG,QAAS,WAAc,GAAKH,EAAUG,QAAS,SAAY,GAAKH,EAAUG,QAAS,YAAe,GAA2B,QAAtBF,UAAUG,UAA8C,YAAtBH,UAAUG,WAAuE,GAA7CH,UAAUD,UAAUG,QAAS,YAAkE,GAA7CF,UAAUD,UAAUG,QAAS,gBAAyDE,IAAlCJ,UAAmBK,WAE5T7F,OAAO8F,iBAAkB,cAAe,EAAKC,WAAWC,KAAM,EAAM,UACpEhG,OAAO8F,iBAAkB,cAAe,EAAKC,WAAWC,KAAM,EAAM,SACpEhG,OAAO8F,iBAAkB,YAAa,EAAKC,WAAWC,KAAM,EAAM,QAClEhG,OAAO8F,iBAAkB,UAAW,EAAKC,WAAWC,KAAM,EAAM,QAChEhG,OAAO8F,iBAAkB,QAAS,EAAKG,MAAMD,KAAM,GAAQ,CAAEE,SAAS,IAEtE,EAAK9B,SAASX,IAAK6B,IAAKA,KACxB,EAAKa,YAAa,E,EAwLpB,OAjN6B,OA6BrB,YAAAC,qBAAP,SAA6B7E,GAE5B,GAAK7F,KAAK0I,SAASR,GAAKlI,KAAK0I,SAASR,EAAI,OAAO,IAAI,UAAe0B,IAAKA,KAEzE,IAAIe,EAAI3K,KAAK0I,SAASN,QACpBQ,OAAQ/C,GACRwC,eAAgB,GAChBQ,UAAW,GAGb,OAFA8B,EAAExC,IAAO,EAEFwC,GAID,YAAAC,oBAAP,SAA4BC,EAAkBC,GAE7C,IAEIC,EAFAC,EAAgBH,EAAII,iBAAkB,GAItC/C,EAAI6C,EAAI7C,EAAI8C,EAAKE,KACjB/C,EAAI4C,EAAI5C,EAAI6C,EAAKG,IAWrB,OATKL,IAEJ5C,GAAK8C,EAAKI,MACVjD,GAAK6C,EAAKK,QAIH,IAAI,UAAenD,EAAGC,IAMrB,YAAAmD,OAAV,SAAkBpD,EAAWC,GAG3BnI,KAAK0I,SAASR,GAAMlI,KAAK0I,SAASR,GAClClI,KAAK0I,SAASP,GAAMnI,KAAK0I,SAASP,EAGlCnI,KAAKgJ,MAAMjB,IAAK,EAAG,GAInB/H,KAAKgJ,MAAMjB,IAAKG,EAAIlI,KAAK0I,SAASR,EAAGC,EAAInI,KAAK0I,SAASP,GAIxDnI,KAAK0I,SAASX,IAAKG,EAAGC,IAIb,YAAAkC,WAAV,SAAsBkB,EAAcrK,GAEnC,IAAIsK,GAAW,EAEXtD,EAAIhH,EAAEuK,MAAQnH,OAAOoH,YACrBvD,EAAIjH,EAAEyK,MAAQrH,OAAOsH,YAEZ,SAARL,GAEJvL,KAAKyK,YAAa,EAElBzK,KAAKsL,OAAQpD,EAAGC,GAEhBqD,GAAW,GAEQ,QAARD,GAEXvL,KAAKsL,OAAQpD,EAAGC,GAEXnI,KAAKyK,aAETe,GAAW,IAIO,OAARD,IAEXvL,KAAKyK,YAAa,EAElBe,GAAW,GAIPA,GAEJxL,KAAK6L,cAAe,CACnBN,KAAM,SACN/C,aAActH,EACdgI,iBAAkBqC,EAClB7C,SAAU1I,KAAK0I,SAASN,QACxBY,MAAOhJ,KAAKgJ,MAAMZ,WAOd,YAAA0D,OAAP,WAEQ9L,KAAK+J,MAEX/J,KAAK6L,cAAe,CACnBN,KAAM,SACN/C,aAAc,KACdU,iBAAkB,QAClBR,SAAU1I,KAAK0I,SAASN,QACxBY,MAAOhJ,KAAKgJ,MAAMZ,WAWX,YAAAmC,MAAV,SAAiBrJ,GAEhB,IAAI8H,EAAQ9H,EAAEI,OACVkI,EAAgB,EAEpB,OAAStI,EAAE6K,WAEV,KAAK7K,EAAE8K,eACNhD,GAAgC,IAAvB,IAAM,KAAM1E,QACrB,MAED,KAAKpD,EAAE+K,eACNjD,GAAS1E,OAAOG,YAKlB,GAAKzE,KAAK2J,SAAS1I,MAAOC,GAEzBsI,EAAgBR,MAEV,CAEN,IAAIkD,EAAIlD,EAAQhJ,KAAKyJ,iBAEhBnJ,KAAKC,IAAK2L,GAAM,IAEpBlM,KAAKyJ,iBAAmByC,EACxB1C,EAAgBR,EAEhBhJ,KAAK0J,aAAc,GAEH,GAALwC,EAENlM,KAAK0J,cAETF,EAAgBR,GAINkD,EAAI,IAEflM,KAAK0J,aAAc,GAIpB1J,KAAKyJ,iBAAmB,EAIzBzJ,KAAK6L,cAAe,CACnBN,KAAM,QACNY,WAAYjL,EACZsI,cAAeA,KAKlB,EAjNA,CAA6B,mB,iWCW7B,cAMC,WAAa4C,GAAb,MAEI,cAAO,K,OAJD,EAAAC,OAAsB,GAMnBD,GAAaA,EAAUE,QAE/BC,QAAQC,IAAK,iBAAmB,UAA0C,KAAM,2EAIjF,EAAKC,MAAQ,IAAI,QAEjB,EAAKC,QAAU,IAAIC,EACnB,EAAKD,QAAQtC,iBAAkB,SAAU,EAAK5B,aAAa8B,KAAM,IACjE,EAAKoC,QAAQtC,iBAAkB,QAAS,EAAKb,QAAQe,KAAM,IAE3DhG,OAAO8F,iBAAkB,oBAAqB,EAAKwC,oBAAoBtC,KAAM,IAC7EhG,OAAO8F,iBAAkB,SAAU,EAAKyC,eAAevC,KAAM,IAE7D,EAAKhE,O,EAiGV,OA1HgC,OA6BrB,YAAAA,KAAV,WAEI,IAAIC,EAAYvG,KAAKyM,MAAMK,WAE3B9M,KAAK0M,QAAQZ,SAEb,IAAM,IAAIrL,EAAI,EAAGA,EAAIT,KAAKqM,OAAO7J,OAAQ/B,IAExCT,KAAKqM,OAAQ5L,GAAI6F,KAAMC,GAIxBwG,sBAAuB/M,KAAKsG,KAAKgE,KAAMtK,QAIpC,YAAAgN,SAAP,SAAiBC,GAEb,IAAM,IAAIxM,EAAI,EAAGA,EAAIT,KAAKqM,OAAO7J,OAAQ/B,IAExC,GAAKT,KAAKqM,OAAQ5L,GAAIyE,KAAKC,MAAQ8H,EAAY,OAAOjN,KAAKqM,OAAQ5L,GAIpE,OAAO,MAIJ,YAAAyM,SAAP,SAAiBC,EAAkBzG,GAE/B,KAAQ1G,KAAKgN,SAAUtG,EAAUvB,OAEhCuB,EAAUvB,MAAQ,IAInBgI,EAAM1G,OAAQC,GACd1G,KAAKqM,OAAOzL,KAAMuM,IAIf,YAAAC,YAAP,SAAoBC,GAEhB,IAAM,IAAI5M,EAAIT,KAAKqM,OAAO7J,OAAQ/B,GAAK,EAAGA,IAE7BT,KAAKqM,OAAQ5L,GAEdyE,KAAKC,MAAQkI,GAEvBrN,KAAKqM,OAAOiB,OAAQ7M,EAAG,IAQnB,YAAAoM,eAAV,WAEI,IAAM,IAAIpM,EAAI,EAAGA,EAAIT,KAAKqM,OAAO7J,OAAQ/B,IAExCT,KAAKqM,OAAQ5L,GAAIwG,YAMZ,YAAA2F,oBAAV,WAEI5M,KAAK6M,kBAIC,YAAArE,aAAV,SAAwBtH,GAEpB,IAAM,IAAIT,EAAI,EAAGA,EAAIT,KAAKqM,OAAO7J,OAAQ/B,IAExCT,KAAKqM,OAAQ5L,GAAI+H,aAActH,IAM1B,YAAAqI,QAAV,SAAmBrI,GAEf,IAAM,IAAIT,EAAI,EAAGA,EAAIT,KAAKqM,OAAO7J,OAAQ/B,IAExCT,KAAKqM,OAAQ5L,GAAI8I,QAASrI,EAAEiL,WAAYjL,EAAEsI,gBAMhD,EA1HA,CAAgC,oBJVhC,SAAiB1E,GAEA,EAAAyI,QAAhB,SAAyBrF,G,IAAW,wDAEnC,IAAIsF,EAAS,EAERC,EAAW,KAEfD,EAASC,EAAW,IAIrB,IAAIC,EAAKpN,KAAKqN,KAAOH,GAAW,EAAItF,EAAI,IACpC0F,EAAKtN,KAAKqN,KAAOH,GAErB,OAAS,GAAM,EAAIE,IAAS,EAAIA,IAAS,EAAIE,IAAS,EAAIA,IAAS,GAIpD,EAAAC,WAAhB,SAA4BnJ,EAAaC,EAAawB,GAErD,IAAI+B,EAAI5H,KAAKqE,IAAK,EAAGrE,KAAKoE,IAAK,EAAGyB,EAAQzB,GAAQC,EAAMD,KAExD,OAAOwD,EAAIA,GAAM,EAAI,EAAIA,IAIV,EAAA4F,WAAhB,SAA4BC,EAAWC,EAAW1L,GAEjD,OAAS,EAAMA,GAAMyL,EAAIzL,EAAI0L,GAQd,EAAAC,OAAhB,SAAwB3L,GAEvB,OAAOA,GAKQ,EAAA4L,WAAhB,SAA4B5L,GAE3B,OAAOA,EAAIA,GAKI,EAAA6L,YAAhB,SAA6B7L,GAE5B,OAAOA,GAAM,EAAIA,IAKF,EAAA8L,cAAhB,SAA+B9L,GAE9B,OAAOA,EAAI,GAAK,EAAIA,EAAIA,GAAY,EAAI,EAAIA,GAAMA,EAApB,GAKf,EAAA+L,YAAhB,SAA6B/L,GAE5B,OAAOA,EAAIA,EAAIA,GAKA,EAAAgM,aAAhB,SAA8BhM,GAE7B,QAAYA,EAAMA,EAAIA,EAAI,GAKX,EAAAiM,eAAhB,SAAgCjM,GAE/B,OAAOA,EAAI,GAAK,EAAIA,EAAIA,EAAIA,GAAMA,EAAI,IAAQ,EAAIA,EAAI,IAAQ,EAAIA,EAAI,GAAM,GAK7D,EAAAkM,YAAhB,SAA6BlM,GAE5B,OAAOA,EAAIA,EAAIA,EAAIA,GAKJ,EAAAmM,aAAhB,SAA8BnM,GAE7B,OAAO,KAASA,EAAMA,EAAIA,EAAIA,GAKf,EAAAoM,eAAhB,SAAgCpM,GAE/B,OAAOA,EAAI,GAAK,EAAIA,EAAIA,EAAIA,EAAIA,EAAI,EAAI,IAASA,EAAMA,EAAIA,EAAIA,GAKhD,EAAAqM,YAAhB,SAA6BrM,GAE5B,OAAOA,EAAIA,EAAIA,EAAIA,EAAIA,GAKR,EAAAsM,aAAhB,SAA8BtM,GAE7B,OAAO,IAASA,EAAMA,EAAIA,EAAIA,EAAIA,GAKjB,EAAAuM,eAAhB,SAAgCvM,GAE/B,OAAOA,EAAI,GAAK,GAAKA,EAAIA,EAAIA,EAAIA,EAAIA,EAAI,EAAI,KAAUA,EAAMA,EAAIA,EAAIA,EAAIA,GA3H7E,CAAiBwC,MAAO,KCDxB,SAAiBC,GAEA,EAAA+J,OAAhB,SAAwBf,EAAWC,EAAW1L,GAE7C,OAAOyL,GAAMC,EAAID,GAAMzL,GAIR,EAAAyM,YAAhB,SAA6BhB,EAAaC,EAAa1L,GAEtD,GAAKyL,EAAEvL,QAAUwL,EAAExL,OAAS,CAI3B,IAFA,IAAIwM,EAAI,GAEEvO,EAAI,EAAGA,EAAIsN,EAAEvL,OAAQ/B,IAE9BuO,EAAEpO,KAAMmN,EAAGtN,IAAQuN,EAAGvN,GAAMsN,EAAGtN,IAAQ6B,GAIxC,OAAO0M,EAMP,OAFAzC,QAAQC,IAAK,+BAEN,GAMO,EAAAyC,aAAhB,SAA8BlB,EAAgEC,EAAgE1L,GAE7J,OAAOyL,EAAE3F,QAAQ8G,KAAMlB,EAAG1L,IAIX,EAAA6M,gBAAhB,SAAiCpB,EAAqBC,EAAqB1L,GAE1E,OAAOyL,EAAE3F,QAAQgH,MAAOpB,EAAG1L,IAIZ,EAAA+M,WAAhB,SAA4BtB,EAAgBC,EAAgB1L,GAE3D,IAAIgN,EAAKvB,EAAE3F,QACPmH,EAAKvB,EAAE5F,QAMX,OAJAkH,EAAGpH,EAAIoH,EAAGpH,GAAMqH,EAAGrH,EAAIoH,EAAGpH,GAAM5F,EAChCgN,EAAGnH,EAAImH,EAAGnH,GAAMoH,EAAGpH,EAAImH,EAAGnH,GAAM7F,EAChCgN,EAAGE,EAAIF,EAAGE,GAAMD,EAAGC,EAAIF,EAAGE,GAAMlN,EAEzBgN,GAIQ,EAAAG,YAAhB,SAA6BtJ,GAE5B,MAAyB,iBAAb,EAEJpB,EAAM+J,OAEF3I,aAAiBuJ,OAAkC,iBAAhBvJ,EAAO,GAE9CpB,EAAMgK,YAEF5I,EAAMwJ,UAAYxJ,EAAMyJ,UAAYzJ,EAAM0J,UAAY1J,EAAM2J,QAEhE/K,EAAMkK,aAEF9I,EAAM4J,aAEVhL,EAAMoK,gBAEFhJ,EAAM6J,QAEVjL,EAAMsK,gBAFP,GA3ET,CAAiBtK,MAAK,KIkBtB,IClBiBkL,EDkBjB,aAOC,aAJU,KAAAC,cAAwB,EACxB,KAAAC,eAAyB,EACzB,KAAAC,eAA6B,GAItCpQ,KAAKyN,UAAY,GA2PnB,OAvPC,sBAAW,0BAAW,C,IAAtB,WAEC,OAAOzN,KAAKkQ,c,gCAIN,YAAAG,IAAP,SAAeC,GAEd,IAAIC,EAAWD,EAAOE,gBAAkBzL,EAAM0K,YAAaa,EAAOG,WAE9DC,EAAW,CACdzL,MAAQ,EACRkB,MAAOmK,EAAOG,UACdE,WAAYL,EAAOG,UACnBG,UAAW,KACXC,OAAQP,EAAOO,QAAU,CAAEC,KAAMhM,EAAQyI,QAASzE,KAAM,GACxDyH,SAAUA,GAKX,OAFAvQ,KAAKyN,UAAW6C,EAAOnL,MAASuL,EAEzBA,GAID,YAAAK,UAAP,SAAkB5L,EAAc0L,GAE/B,IAAIH,EAAW1Q,KAAKyN,UAAWtI,GAE1BuL,EAEJA,EAASG,OAASA,EAIlBtE,QAAQyE,KAAM,IAAM7L,EAAN,mBAMT,YAAAqB,QAAP,SAAmBrB,EAAcyL,EAAcK,EAAsBC,EAAqBL,GAA1F,gBAA+C,IAAAI,MAAA,GAE9C,IAAIP,EAAW1Q,KAAKyN,UAAWtI,GAqD/B,OApDc,IAAIgM,SAAS,SAAAC,GAE1B,GAAKV,EAAW,CAEf,GAAKO,GAAY,EAYhB,OAVA,EAAKI,SAAUlM,EAAMyL,GAErBF,EAASzL,KAAO,OAChByL,EAASY,oBAAsB,WAE9BJ,GAAYA,IACZE,EAAS,SAQa,GAAnBV,EAASzL,OAEb,EAAKiL,cAAe,EACpB,EAAKC,kBAINO,EAASzL,KAAO,EAChByL,EAASO,SAAWA,EACpBP,EAASC,WAAaD,EAASvK,MAC/BuK,EAASE,UAAYA,EACrBF,EAASY,oBAAsB,WAE9BJ,GAAYA,IACZE,EAAS,OAILP,GAEJ,EAAKE,UAAW5L,EAAM0L,QAMvBtE,QAAQyE,KAAM,IAAM7L,EAAN,sBAUV,YAAAoM,cAAP,SAAsBpM,GAErB,IAAIuL,EAAW1Q,KAAKyN,UAAWtI,GAE1BuL,GAEJA,EAASzL,KAAO,EAChByL,EAASY,oBAAsB,MAI/B/E,QAAQyE,KAAM,IAAM7L,EAAN,mBAMT,YAAAkM,SAAP,SAAoBlM,EAAcgB,GAEjC,IAAKnG,KAAKyN,UAAWtI,GASpB,OAFAoH,QAAQyE,KAAM,IAAM7L,EAAN,kBAEP,KAPPnF,KAAKyN,UAAWtI,GAAOgB,MAAQA,EAC/BnG,KAAKuR,cAAepM,IAYf,YAAAqM,IAAP,SAAerM,GAEd,OAAKnF,KAAKyN,UAAWtI,GAEbnF,KAAKyN,UAAWtI,GAAOgB,OAI9BoG,QAAQyE,KAAM,IAAM7L,EAAN,kBAEP,OAMF,YAAAsM,kBAAP,SAA6BtM,EAAcuM,GAE1C,YAF0C,IAAAA,OAAA,GAErC1R,KAAKyN,UAAWtI,GAEbnF,KAAKyN,UAAWtI,IAIhBuM,GAENnF,QAAQyE,KAAM,IAAM7L,EAAN,kBAIR,OAMF,YAAAwM,gBAAP,SAAwBC,GAIvB,IAFA,IAAIC,EAAOC,OAAOD,KAAM7R,KAAKyN,WAEnBhN,EAAI,EAAGA,EAAIoR,EAAKrP,OAAQ/B,IAEjCmR,EAAUC,EAAMpR,IAAQT,KAAKyR,kBAAmBI,EAAMpR,KAMjD,YAAAqL,OAAP,SAAevF,GAEc,GAAvBvG,KAAKmQ,iBAETnQ,KAAKkQ,cAAe,GAMrB,IAFA,IAAI2B,EAAOC,OAAOD,KAAM7R,KAAKyN,WAEnBhN,EAAI,EAAGA,EAAIoR,EAAKrP,OAAQ/B,IAAO,CAExC,IAAIiQ,EAAW1Q,KAAKyN,UAAWoE,EAAMpR,IAerC,GAbsB,GAAjBiQ,EAASzL,OAEbjF,KAAKmQ,iBACLO,EAASzL,MAAS,EAEbyL,EAASY,qBAEbtR,KAAKoQ,eAAexP,KAAM8P,EAASY,sBAMhCZ,EAASzL,MAAQ,GAAOyL,EAASzL,KAAO,EAAM,CAElDyL,EAASzL,OAAUsB,GAAa,MAAUmK,EAASO,UAEzB,GAArBP,EAASO,UAAiBP,EAASzL,MAAQ,KAE/CyL,EAASzL,KAAO,GAIjB,IAAI3C,EAAIoO,EAASzL,KAEZyL,EAASG,SAEbvO,EAAIoO,EAASG,OAAOC,KAAMxO,EAAGoO,EAASG,OAAO/H,OAI9C4H,EAASvK,MAAQuK,EAASH,SAAUG,EAASC,WAAYD,EAASE,UAAWtO,GAEvD,GAAjBoO,EAASzL,OAEbyL,EAASvK,MAAQuK,EAASE,YAQ7B,KAAsC,GAA9B5Q,KAAKoQ,eAAe5N,QAE3BxC,KAAKoQ,eAAe2B,KAApB/R,IAMH,EApQA,G,iWEhBA,cAIC,WAAagS,GAAb,WAEK1K,EAAM,IAAI,iBAEV2K,EAAW,GACXC,EAAa,GACbC,EAAU,GAEdF,EAASrR,MAAQ,EAAG,EAAG,GACvBqR,EAASrR,KAAM,EAAG,EAAG,GACrBqR,EAASrR,KAAM,GAAK,EAAG,GACvBqR,EAASrR,MAAQ,GAAK,EAAG,GAEzBuR,EAAQvR,KAAM,EAAG,GACjBuR,EAAQvR,KAAM,EAAG,GACjBuR,EAAQvR,KAAM,EAAG,GACjBuR,EAAQvR,KAAM,EAAG,GAEjBsR,EAAWtR,KAAM,EAAG,EAAG,EAAG,EAAG,EAAG,GAEhC,IAAImK,EAAM,IAAIqH,aAAcH,GACxBI,EAAU,IAAIC,YAAaJ,GAC3BK,EAAK,IAAIH,aAAcD,GAE3B7K,EAAIkL,aAAc,WAAY,IAAI,kBAAuBzH,EAAK,IAC9DzD,EAAIkL,aAAc,KAAM,IAAI,kBAAuBD,EAAI,IACvDjL,EAAImL,SAAU,IAAI,kBAAuBJ,EAAS,IAElDL,EAAMU,aAAeV,EAAMU,cCtC7B,wODuCEV,EAAMW,YAAmCzI,MAArB8H,EAAMW,aAA2BX,EAAMW,YAC3DX,EAAMY,UAA+B1I,MAAnB8H,EAAMY,UAAyBZ,EAAMY,UAAY,aAEnE,IAAIrL,EAAM,IAAI,iBAAsByK,G,OAEpC,cAAO1K,EAAKC,IAAK,MAEZqK,SAAWI,EAAMJ,UAAY,GAElC,EAAKiB,eAAgB,E,EAWvB,OArDgC,OA8CxB,YAAAC,OAAP,SAAehK,GAEd9I,KAAK4R,SAASmB,WAAa,CAAE5M,MAAO2C,EAAK/C,YACzC/F,KAAK4R,SAASoB,YAAc,CAAE7M,MAAO2C,EAAK7C,oBAI5C,EArDA,CAAgC,SDFhC,SAAiBgK,GAEA,EAAAgD,cAAhB,W,IAA+B,sDAI9B,IAFA,IAAIC,EAAM,GAEAzS,EAAI,EAAGA,EAAImR,EAASpP,OAAQ/B,IAErCqR,OAAOqB,OAAQD,EAAKtB,EAAUnR,IAI/B,OAAOyS,GAZT,CAAiBjD,MAAW,K,qWGA5B,cAKC,WAAazM,EAAsB4I,GAAnC,WAEK9E,EAAM,IAAI,sBAA2B,EAAG,GAE5C8E,EAAUsG,aCbZ,6hBDeE,IAAIU,EAAMnD,EAAYgD,cAAe7G,EAAUwF,SAAU,CACxDyB,OAAQ,CACPlN,MAAO,IAAI,WAEZmN,QAAS,CACRnN,MAAO,IAAI,WAEZN,WAAY,CACXM,MAAO,IAAI,WAEZ6M,YAAa,CACZ7M,MAAO,KAITiG,EAAUwF,SAAWwB,EAErB,IAAI7L,EAAM,IAAI,iBAAsB6E,G,OAEpC,cAAO9E,EAAKC,IAAK,MAEZsL,eAAgB,EAErB,EAAKU,UAAYH,EAEjB,EAAK5P,QAAUA,EAEf,EAAKsI,S,EAqBP,OA3D6B,OA0C5B,sBAAW,uBAAQ,C,IAAnB,WAEC,OAAO9L,KAAKuT,W,gCAIN,YAAAzH,OAAP,WAEC,IAAId,EAAOhL,KAAKwD,QAAQmD,wBAExB3G,KAAKuT,UAAU1N,WAAWM,MAAM4B,IAAKzD,OAAOE,WAAYF,OAAOG,aAC/DzE,KAAKuT,UAAUP,YAAY7M,MAAQ7B,OAAOE,WAAaF,OAAOG,YAC9DzE,KAAKuT,UAAUD,QAAQnN,MAAM4B,IAAKiD,EAAKI,MAAOJ,EAAKK,QACnDrL,KAAKuT,UAAUF,OAAOlN,MAAM4B,IAAKiD,EAAKE,KAAMF,EAAKG,MAInD,EA3DA,CAA6B,QEM7B,aAIC,aAFQ,KAAAqI,OAA0B,GA6CnC,OAvCQ,YAAApJ,iBAAP,SAAyBmB,EAAckI,GAEtCzT,KAAKwT,OAAO5S,KAAM,CACjB2K,KAAMA,EACNkI,SAAUA,KAKL,YAAA5H,cAAP,SAAsB9C,GAErBA,EAAM2K,OAAS1T,KAEf,IAAM,IAAIS,EAAI,EAAGA,EAAIT,KAAKwT,OAAOhR,OAAQ/B,IAEnCsI,EAAMwC,MAAQvL,KAAKwT,OAAQ/S,GAAI8K,MAEnCvL,KAAKwT,OAAQ/S,GAAIgT,SAAU1K,IAQvB,YAAA4K,oBAAP,SAA4BpI,EAAckI,GAEzC,IAAM,IAAIhT,EAAIT,KAAKwT,OAAOhR,OAAQ/B,GAAK,EAAGA,IAEpC8K,GAAQvL,KAAKwT,OAAQ/S,GAAI8K,MAAQkI,GAAYzT,KAAKwT,OAAQ/S,GAAIgT,UAElEzT,KAAKwT,OAAOlG,OAAQ7M,EAAG,IAQ3B,EA/CA,GCKA,aAuBC,WAAamG,EAA+BgN,GARpC,KAAAC,cAA2C,GAU/C7T,KAAK4G,SAAWA,EAChB5G,KAAK4T,SAAWA,EAASxL,QAEzBpI,KAAK4R,SAAW,CACfgC,SAAU,CACTzN,MAAOnG,KAAK4T,WAId5T,KAAK8T,eAAiB9T,KAAK+T,WAAY,CACtCC,UAAW,eACXC,UAAW,iBAGZjU,KAAKkU,aAAelU,KAAK+T,WAAY,CACpCC,UAAW,gBACXC,UAAW,kBAGZjU,KAAKoG,MAAQ,IAAI,QACjBpG,KAAKqG,OAAS,IAAI,SAElBrG,KAAKmU,UAAY,GACjBnU,KAAKoU,KAAO,IAAI,OAAY,IAAI,sBAA2B,EAAG,IAC9DpU,KAAKoG,MAAMiK,IAAKrQ,KAAKoU,MAuL1B,OAvNC,sBAAW,0BAAW,C,IAAtB,WAEI,OAAOpU,KAAK4G,SAASyN,WAAW7C,IAAK,sB,gCAkClC,YAAA8C,wBAAP,WAEI,IAAIvG,EAAI,IAAIqE,aAAcpS,KAAK4R,SAASgC,SAASzN,MAAM+B,EAAIlI,KAAK4R,SAASgC,SAASzN,MAAMgC,EAAI,GACxFoM,EAAU,IAAI,cAAmBxG,EAAG/N,KAAK4R,SAASgC,SAASzN,MAAM+B,EAAGlI,KAAK4R,SAASgC,SAASzN,MAAMgC,EAAG,aAAkB,aAG1H,OAFAoM,EAAQC,aAAc,EAEfD,GAYJ,YAAAR,WAAP,SAAmBU,EAAwBC,GAEvC,IAaIC,EACAC,EAdA/K,EAAYC,UAAUD,UACtBgL,EAAQhL,EAAUG,QAAS,WAAc,GAAKH,EAAUG,QAAS,SAAY,GAA2B,QAAtBF,UAAUG,UAA8C,YAAtBH,UAAUG,WAAuE,GAA7CH,UAAUD,UAAUG,QAAS,YAAkE,GAA7CF,UAAUD,UAAUG,QAAS,gBAAyDE,IAAlCJ,UAAmBK,WAEjR6H,EAAwC,CAC3C8C,MAAO,sBACPC,MAAO,sBACPf,UAAW,gBACXC,UAAW,gBACXe,OAAQ,aACRzJ,KAAMsJ,EAAQ,gBAAsB,YACpCI,eAAe,EACfC,aAAa,GAKTT,IAECA,EAAiBU,eAErBR,EAAUF,EAELC,IAEJE,EAAcF,IAMfE,EAAcH,GAMXG,IAEJ5C,EAAM8C,MAAQF,EAAYE,OAAS9C,EAAM8C,MACzC9C,EAAM+C,MAAQH,EAAYG,OAAS/C,EAAM+C,MACzC/C,EAAMgC,UAAYY,EAAYZ,WAAahC,EAAMgC,UACjDhC,EAAMiC,UAAYW,EAAYX,WAAajC,EAAMiC,UACjDjC,EAAMgD,OAASJ,EAAYI,QAAUhD,EAAMgD,OAC3ChD,EAAMzG,KAAOqJ,EAAYrJ,MAAQyG,EAAMzG,KACvCyG,EAAMiD,cAAgBL,EAAYK,eAAiBjD,EAAMiD,cACzDjD,EAAMkD,YAAcN,EAAYM,aAAelD,EAAMkD,aAItD,IAAIE,EAAM,IAAI,oBAAyBpV,KAAK4R,SAASgC,SAASzN,MAAM+B,EAAGlI,KAAK4R,SAASgC,SAASzN,MAAMgC,EAAG6J,GAEtGqD,EAAO,CAAEC,OAAQF,GAIlB,GAFHpV,KAAK6T,cAAcjT,KAAMwU,GAEjBT,EAAU,CAEd,IAAIY,EAAavV,KAAKwV,aAAc,CACtCC,eClJJ,6HDqJMF,EAAW3D,SAAS8D,IAAM,CAAEvP,MAAOwO,GAEnC3U,KAAK2V,QAASJ,EAAYF,GAI3B,OAAOA,GAIJ,YAAAG,aAAP,SAAqBxD,GAEjB,IAAIoB,EAAgBnD,EAAYgD,cAAejB,EAAMJ,SAAU,IAC/DwB,EAAMnD,EAAYgD,cAAejT,KAAK4R,SAAUwB,GAEnDpB,EAAMU,aAAeV,EAAMU,cEpK7B,oHFsKK,IAAInL,EAAM,IAAI,iBAAsByK,GASpC,OAPAhS,KAAKmU,UAAUvT,KAAM2G,GAEc,CAClCG,SAAUH,EACVqK,SAAUwB,IAOR,YAAAuC,QAAP,SAAgBC,EAA8BP,EAA0BhP,GAEpE,IAAIwP,EAIHA,EAFIR,EAAKC,OAAOf,QAAQN,WAAa,eAE9BjU,KAAK8T,eAIL9T,KAAKkU,aAIblU,KAAKoU,KAAK1M,SAAWkO,EAAOlO,SAE5B,IAAIoO,EAAsB9V,KAAK4G,SAASmP,kBAExC/V,KAAK4G,SAASoP,gBAAiBH,EAAKP,QAEpCtV,KAAK4G,SAASqP,OAAQjW,KAAKoG,MAAOC,GAAUrG,KAAKqG,QAEjDrG,KAAKkW,YAAab,EAAMQ,GAExB7V,KAAK4G,SAASoP,gBAAiBF,IAIzB,YAAAI,YAAV,SAAuBC,EAAwBC,GAE3C,IAAIC,EAAMF,EAAGb,OACba,EAAGb,OAASc,EAAGd,OACfc,EAAGd,OAASe,GAIT,YAAAzO,QAAP,WAEc5H,KAAKoU,KAAK3M,SAChBG,UAEJ,IAAM,IAAInH,EAAI,EAAGA,EAAIT,KAAKmU,UAAU3R,OAAQ/B,IAE3CT,KAAKmU,UAAW1T,GAAImH,UAIrB5H,KAAKoG,MAAMuB,OAAQ3H,KAAKoU,MAExBpU,KAAK8T,eAAewB,OAAO1N,UAC3B5H,KAAKkU,aAAaoB,OAAO1N,WAItB,YAAA0O,WAAP,SAAmB1C,GAElB5T,KAAK4T,SAAS3L,KAAM2L,GAEpB,IAAM,IAAInT,EAAI,EAAGA,EAAIT,KAAK6T,cAAcrR,OAAQ/B,IAElCT,KAAK6T,cAAepT,GAE1BsG,QAAS6M,EAAS1L,EAAG0L,EAASzL,IAMxC,EAxOA,GGbA,aAKC,WAAaoO,GAEZvW,KAAK0T,OAAS6C,EAEdvW,KAAKwW,UAAY,IAAI,UAuBvB,OAnBC,YAAA1K,OAAA,WAEC9L,KAAKwW,UAAUnO,eAAgB,KAE/B,IAAIoO,EAAO,IAAI,UAAezW,KAAKwW,UAAUrO,EAAGnI,KAAKwW,UAAUtO,EAAG,GAAM4C,YAEpE4L,GAAI,IAAI,cAAmBC,iBAAkBF,EAAMzW,KAAKwW,UAAUhU,UACtEkU,EAAEE,SAAU5W,KAAK0T,OAAOmD,YAExB7W,KAAK0T,OAAOmD,WAAW5O,KAAMyO,IAI9B,YAAAI,YAAA,SAAaC,GAEZ/W,KAAKwW,UAAUQ,WAAYhX,KAAKwW,UAAWO,EAAY1O,eAAgB,QAIzE,EAhCA,GCQA,aAWC,WAAazB,EAA+Bc,GAE3C1H,KAAK4G,SAAWA,EAChB5G,KAAKoG,MAAQ,IAAI,QACjBpG,KAAKqG,OAAS,IAAI,sBAA4B,EAAK,EAAK,GAAO,GAE/DrG,KAAKiX,OAAS,IAAI,OAAY,IAAI,sBAA2B,EAAG,IAChEjX,KAAKoG,MAAMiK,IAAKrQ,KAAKiX,QAErBjX,KAAKkX,gBAAiBxP,GAwExB,OApES,YAAAwP,gBAAR,SAAyB5G,GAExB,IAAI0B,EAAQ1B,EAEZ0B,EAAMU,aAAeV,EAAMU,cCtC7B,qHDuCEV,EAAMJ,SAAWI,EAAMJ,UAAY,GACnCI,EAAMJ,SAASmB,WAAa,CAC3B5M,MAAO,IAAI,WAGZnG,KAAKmX,OAAS,CACbzP,SAAU,IAAI,iBAAsBsK,KAK/B,YAAAiE,OAAP,SAAemB,EAAuCC,GAErD,IAAIC,EAAkBtX,KAAK4G,SAASmP,kBAEhCoB,EAASnX,KAAKmX,OACdzP,EAAWyP,EAAOzP,SAClBkK,EAAWlK,EAASkK,SAExB,GAAKwF,EAIJ,IAFA,IAAIvF,EAAOC,OAAOD,KAAMuF,GAEdG,EAAI,EAAGA,EAAI1F,EAAKrP,OAAQ+U,IAE5B3F,EAAUC,EAAM0F,IAEpB3F,EAAUC,EAAM0F,IAAMpR,MAAQiR,EAAoBvF,EAAM0F,KAIxD3F,EAAUC,EAAM0F,IAAQ,CAAEpR,MAAOiR,EAAoBvF,EAAM0F,KAE3DJ,EAAOzP,SAAS8M,aAAc,EAE9B2C,EAAOzP,SAASkK,SAAWA,GAQzByF,EAEJzF,EAASmB,WAAW5M,MAAM4B,IAAKsP,EAAajM,MAAOiM,EAAahM,QAIhErL,KAAK4G,SAAS4Q,QAAS5F,EAASmB,WAAW5M,OAI5CnG,KAAKiX,OAAOvP,SAAWA,EAEvB1H,KAAK4G,SAASoP,gBAAiBqB,GAE/BrX,KAAK4G,SAASqP,OAAQjW,KAAKoG,MAAOpG,KAAKqG,QAEvCrG,KAAK4G,SAASoP,gBAAiBsB,IAIjC,EA5FA,GEGA,aA6BC,WAAaG,GAnBN,KAAAC,WAAqB,GACrB,KAAAC,eAAyB,GACtB,KAAAlN,YAAsB,EACtB,KAAAmN,SAAmB,EAEnB,KAAAC,aAAuB,EACvB,KAAAC,SAAmB,EAEnB,KAAAC,WAAqB,EAErB,KAAAC,kBAA4B,EAE5B,KAAAC,gBAA0B,EAC1B,KAAAC,uBAAiC,EAGjC,KAAAC,UAAoB,EACpB,KAAAC,iBAA2B,EAIpCpY,KAAKyX,cAAgBA,EAErBzX,KAAKqY,SAAW,GAEhBrY,KAAKsY,eAycP,OArcW,YAAAA,aAAV,WAECtY,KAAKuY,SAAW,IAAIC,EAEpBxY,KAAKuY,SAASlI,IAAK,CAClBlL,KAAM,YACNsL,UAAW,EACXI,OAAQ,CACPC,KAAMhM,EAAQyI,QACdzE,KAAM,MAMT,sBAAW,wBAAS,C,IAApB,WAEC,OAAO9I,KAAK+X,Y,gCAIb,sBAAW,6BAAc,C,IAAzB,WAEC,OAAO/X,KAAKiY,iB,gCAIb,sBAAW,+BAAgB,C,IAA3B,WAEC,OAAOjY,KAAKgY,mB,gCAIb,sBAAW,oCAAqB,C,IAAhC,WAEC,OAAOhY,KAAKkY,wB,gCAIb,sBAAW,uCAAwB,C,IAAnC,WAIC,IAFA,IAAIO,EAAM,EAEAhY,EAAI,EAAGA,EAAIT,KAAKqY,SAAS7V,OAAQ/B,IAAO,CAEjD,IAAIiY,EAAM1Y,KAAKqY,SAAU5X,GACrBkY,EAAS3Y,KAAKqY,SAAU5X,EAAI,GAK5ByL,EAAI,EAHA5L,KAAKqE,IAAK,EAAK+T,EAAIlV,QAAQoV,UAAY5Y,KAAK6Y,gBAAmBH,EAAII,OAASJ,EAAI1N,KAAKK,OAAS/G,OAAOG,YAAc,MAC/GkU,EAASA,EAAO3N,KAAKK,QAAWsN,EAAOG,OAASxU,OAAOG,YAAc,GAAM,IAAQiU,EAAII,OAASJ,EAAI1N,KAAKK,OAAS/G,OAAOG,YAAc,IAAS,GAO5J,GAFAgU,GAFAvM,EAAI5L,KAAKqE,IAAK,EAAKuH,GAIdA,EAAI,EAAM,MAIhB,OAAOuM,EAAMzY,KAAKqY,SAAS7V,Q,gCAIrB,YAAA6N,IAAP,SAAY0I,GAEX/Y,KAAKqY,SAASzX,KAAMmY,GAEpB/Y,KAAKgZ,gBAIC,YAAAA,aAAP,WAEChZ,KAAKqY,SAASY,MAAM,SAAElL,EAAwBC,GAE7C,OAAOD,EAAE/C,KAAK7C,EAAI6F,EAAEhD,KAAK7C,EAAI,GAAM,KAIpC,IAAM,IAAI1H,EAAI,EAAGA,EAAIT,KAAKqY,SAAS7V,OAAQ/B,IAE1CT,KAAKqY,SAAU5X,GAAIyY,oBAAuBzY,EAAI,GAAMT,KAAKqY,SAAS7V,QAM7D,YAAAgP,IAAP,SAAYrM,GAEX,IAAM,IAAI1E,EAAI,EAAGA,EAAIT,KAAKqY,SAAS7V,OAAQ/B,IAE1C,GAAKT,KAAKqY,SAAU5X,GAAI0E,MAAQA,EAAO,OAAOnF,KAAKqY,SAAU5X,GAM9D,OAFA8L,QAAQyE,KAAM,YAAc7L,EAAO,mBAE5B,MAID,YAAA2G,OAAP,SAAevF,GAEdvG,KAAKmZ,sBAELnZ,KAAKoZ,gBAAiB7S,GAEtBvG,KAAKqZ,8BAELrZ,KAAK8X,SAAW,GAIP,YAAAsB,gBAAV,SAA2B7S,GAE1BvG,KAAKsZ,eAAgB/S,GAErBvG,KAAKuZ,eAELvZ,KAAKwZ,qBAAsBjT,IAIlB,YAAA+S,eAAV,SAA0B/S,GAEzBvG,KAAKuY,SAASzM,OAAQvF,GAEjBvG,KAAKyZ,aAETzZ,KAAK8X,SAAW9X,KAAKuY,SAAS/G,IAAa,aAAgBxR,KAAK0Z,YAMxD,YAAAH,aAAV,WAEC,GAAKvZ,KAAK2Z,sBAAuB3Z,KAAK8X,UAAa,CAElD,IAAI8B,EAAU5Z,KAAK6Z,WAAY7Z,KAAK8X,UAEnB,OAAZ8B,EAEJ5Z,KAAK+X,WAAa6B,EAIlB5Z,KAAK+X,YAAc/X,KAAK8X,SAIzB9X,KAAK+X,WAAazX,KAAKqE,IAAKrE,KAAKoE,IAAK1E,KAAK+X,WAAY/X,KAAK8Z,oBAAsBxV,OAAOG,aAAe,KAMhG,YAAAkV,sBAAV,SAAiC5C,GAEhC,IAAIgD,EAAoB,EACpBC,GAAkB,EAEtB,GAAKha,KAAKia,cAAgB,CAEzB,IAAIC,EAAWla,KAAK0Z,UAAY1Z,KAAK6Y,eAwBrC,IAtBK9B,EAAcmD,EAAW,GAAK5Z,KAAKC,IAAK2Z,GAAa,IAAQla,KAAKyZ,cAEjE1C,EAAc,IAEXA,GAAgB/W,KAAKia,cAAcE,eAAiB,IAAOna,KAAKyZ,cAEtEM,GAAc,GAIJhD,EAAc,IAEpBA,GAAgB/W,KAAKia,cAAcG,iBAAmB,IAAOpa,KAAKyZ,cAEtEM,EAAY,IAQG,GAAbA,GAAkB/Z,KAAKia,cAAczG,QAEpCxT,KAAKia,cAAczG,OAAO6G,cAAgB,CAE9C,IAQI,EARAvR,EAA8B,CACjCwR,SAAUta,KACV+Y,QAAS/Y,KAAKia,cACdM,WAAYva,KAAKyZ,WAAa,OAAS,SACvC1C,YAAaA,EACbyD,YAAala,KAAKC,IAAKwW,IAKpB0D,EAAeza,KAAKia,cAAczG,OAAO6G,cAAcK,QAAU1a,KAAKia,cAAczG,OAAO6G,cAAcK,OAAQ5R,IACjG,GAAfiR,IAAmB,EAAS/Z,KAAKia,cAAczG,OAAO6G,cAAcM,IAAM3a,KAAKia,cAAczG,OAAO6G,cAAcM,GAAI7R,IACzG,GAAbiR,IAAiB,EAAS/Z,KAAKia,cAAczG,OAAO6G,cAAcO,MAAQ5a,KAAKia,cAAczG,OAAO6G,cAAcO,KAAM9R,KAEvG,IAAjB2R,IAAqC,IAAX,IAE9BV,EAAY,GAQfC,EAAsB,GAAbD,OAITC,GAAS,EAUV,OANKD,IAEJ/Z,KAAKia,cAAgB,MAIfD,GAIE,YAAAH,WAAV,SAAsB9C,GAErB,IAAM,IAAItW,EAAI,EAAGA,EAAIT,KAAKqY,SAAS7V,OAAQ/B,IAAO,CAEjD,IAAIiY,EAAM1Y,KAAKqY,SAAU5X,GAEzBiY,EAAImC,WAAY7a,KAAK+X,YAErB,IAAI6B,EAAU5Z,KAAK8a,wBAAyBpC,EAAK3B,GAEjD,GAAiB,OAAZ6C,EAIJ,OAFA5Z,KAAKia,cAAgBvB,EAEd1Y,KAAKyZ,WAAa,KAAOG,EAMlC,OAAO,MAIE,YAAAkB,wBAAV,SAAmC/B,EAA8BhC,GAEhE,IAAIgE,EAAahC,EAAQiC,sBACrBC,EAAkBlC,EAAQiC,oBAAqBjE,GAEnD,GAAKgC,EAAQvF,OAYZ,IAVA,IAAI1K,EAA8B,CACjCwR,SAAUta,KACV+Y,QAASA,EACTwB,WAAYva,KAAKyZ,WAAa,OAAS,SACvC1C,YAAaA,EACbyD,YAAala,KAAKC,IAAKwW,IAGpBmE,EAAgBnC,EAAQvF,OAAO2H,YAAcpC,EAAQvF,OAAO2H,WAAW3Y,QAAU,EAE3E/B,EAAI,EAAGA,EAAIya,EAAeza,IAAO,CAE1C,IAAI2a,EAAerC,EAAQvF,OAAO2H,WAAY1a,GAE1C4a,EAAUrb,KAAKsb,eAAgBP,EAAYE,EAAiBG,EAAaL,YAE7D,GAAXM,IAEJD,EAAarS,MAAM2R,QAAUU,EAAarS,MAAM2R,OAAQ5R,GAEnDuS,EAAU,EAEdD,EAAarS,MAAM4R,IAAMS,EAAarS,MAAM4R,GAAI7R,GAIhDsS,EAAarS,MAAM6R,MAAQQ,EAAarS,MAAM6R,KAAM9R,IAUxD,OAAKiQ,EAAQwC,MAEPvb,KAAKsb,eAAgBP,EAAYE,EAAiB,IAEtDjb,KAAKoY,iBAAkB,EAEhBW,EAAQvV,QAAQoV,WAAcG,EAAQD,OAASC,EAAQ/N,KAAKK,OAAS/G,OAAOG,YAAc,IAM5F,MAIE,YAAA6W,eAAV,SAA0BvN,EAAWC,EAAWwN,GAE/C,OAAKzN,EAAIyN,GAAQA,GAAQxN,EAEjB,EAEID,EAAIyN,GAAQA,GAAQxN,GAEtB,EAEED,GAAKyN,GAAQA,GAAQxN,EAEzB,EAIA,GAMC,YAAAwL,qBAAV,SAAgCjT,GAE/BvG,KAAKiY,kBAAqBjY,KAAK+X,WAAa/X,KAAKiY,kBAAsBjY,KAAKyK,aAAgBzK,KAAKia,cAAgBja,KAAK2X,eAAiB3X,KAAK0X,YAAepX,KAAKoE,IAAK,EAAiB,GAAZ6B,GAE1KvG,KAAKgY,kBAAoBhY,KAAKyb,sBAAuBzb,KAAK0Z,WAE1D1Z,KAAKkY,uBAAyBlY,KAAKyb,sBAAuBzb,KAAK6Y,iBAItD,YAAA4C,sBAAV,SAAiC/B,GAEhC,OAAOA,GAAc1Z,KAAK8Z,oBAAsBxV,OAAOG,cAK9C,YAAA0U,oBAAV,WAECnZ,KAAK8Z,oBAAsB9Z,KAAKyX,cAAc9Q,wBAAwB0E,QAI7D,YAAAgO,4BAAV,WAECrZ,KAAKyX,cAAczT,MAAM0X,UAAY,mBAAsB1b,KAAK6Y,eAAe8C,WAAa,WAItF,YAAAC,OAAP,SAAe5S,GAEdhJ,KAAK4X,UAAa5X,KAAK4X,SAAW5O,GAAU,EAC5ChJ,KAAK8X,UAAY9O,GAIX,YAAA6S,MAAP,WAEM7b,KAAKyZ,aAEVzZ,KAAKyK,YAAa,EAClBzK,KAAK4X,SAAW,EAET5X,KAAKia,gBAEXja,KAAK+X,WAAa/X,KAAKiY,mBAMlB,YAAA6D,KAAP,SAAa9S,GAELhJ,KAAKyK,YAEZzK,KAAK4b,OAAQ5S,IAIP,YAAA+S,QAAP,SAAgBC,QAAA,IAAAA,MAAA,IAERhc,KAAKyK,aAEZzK,KAAKyK,YAAa,EAEXzK,KAAKia,eAEXja,KAAK4b,OAAQ5b,KAAK4X,SAAWoE,KAMxB,YAAAC,SAAP,SAAiBjK,GAAjB,IAEKkK,EAFL,OAIC,GAAOlK,EAAM0B,OAAgCyI,sBAAwB,CAEpE,IAAIzI,EAAS1B,EAAM0B,OACf0I,EAAepK,EAAM8G,OAASpF,EAAO1I,KAAKK,OAAS/G,OAAOG,YAAc,EAE5EyX,EAAYxI,EAAOlQ,QAAQoV,UAAYwD,MAEL,iBAAhBpK,EAAM0B,QAEpBA,EAAS1T,KAAKwR,IAAKQ,EAAM0B,QACzB0I,EAAepK,EAAM8G,OAASpF,EAAO1I,KAAKK,OAAS/G,OAAOG,YAAc,EAE5EyX,EAAYxI,EAAOlQ,QAAQoV,UAAYwD,GAEL,iBAAhBpK,EAAM0B,SAExBwI,EAAYlK,EAAM0B,QAInB1T,KAAKuY,SAASlH,SAAU,YAAarR,KAAK+X,YAC1C/X,KAAKuY,SAAS/R,QAAS,YAAa0V,EAAWlK,EAAMf,UAAU,WAEzDe,EAAMqK,UAAWrK,EAAMqK,WAE5B,EAAK5C,YAAa,IAEhBzH,EAAMnB,QAGT7Q,KAAK8X,UAAaoE,EAAYlc,KAAK8X,UAAaxX,KAAKC,IAAK2b,EAAYlc,KAAK8X,UAAa,KAExF9X,KAAKyZ,YAAa,GAIpB,EA5eA,GC6BA,aAYC,WAAanJ,GAFN,KAAA4I,mBAA6B,EAInClZ,KAAKmF,KAAOmL,EAAOnL,KACnBnF,KAAKwD,QAAU8M,EAAO9M,QACtBxD,KAAKub,KAAOjL,EAAOiL,KACnBvb,KAAKwT,OAASlD,EAAOkD,OACrBxT,KAAK8Y,OAASxI,EAAOwI,OACrB9Y,KAAKoa,gBAAkB9J,EAAO8J,iBAAmB,EACjDpa,KAAKma,cAAgB7J,EAAO6J,eAAiB,EAE7Cna,KAAK6a,WAAY,GAsCnB,OAlCC,sBAAW,oCAAqB,C,IAAhC,WAEC,OAAO,G,gCAID,YAAAA,WAAP,SAAmBnB,GAElB1Z,KAAKgL,KAAO,CACX9C,EAAGlI,KAAKwD,QAAQ8Y,WAChBnU,EAAGnI,KAAKwD,QAAQoV,UAAYc,EAC5BtO,MAAOpL,KAAKwD,QAAQ+Y,YACpBlR,OAAQrL,KAAKwD,QAAQgZ,eAKhB,YAAAxB,oBAAP,SAA4ByB,GAE3B,IAAIL,EAAiBpc,KAAK8Y,OAAS9Y,KAAKgL,KAAKK,OAAS/G,OAAOG,YAAc,EACvEsG,EAAQ/K,KAAKgL,KAAK7C,EAAIiU,GAAmBK,GAAa,GAEtDC,EAAkB1c,KAAK8Y,OAAS9Y,KAAKgL,KAAKK,OAAS/G,OAAOG,YAC1DkY,EAAYrc,KAAKoE,IAAK,EAAK,EAAQqG,EAAM2R,GAEzCE,EAAmB5c,KAAK8Y,OAASxU,OAAOG,YAAczE,KAAKgL,KAAKK,OAKpE,OAFiBsR,EAFArc,KAAKqE,IAAK,GAAOoG,EAAM6R,IAQ1C,EA5DA,GClCA,aAOC,WAAaxV,EAAwBsU,EAAsBmB,GAE1D7c,KAAK8c,IAAM1V,EAEXpH,KAAK+c,cAAgB,CACpBrU,SAAU1I,KAAK8c,IAAIpU,SAASN,QAC5B4U,SAAUhd,KAAK8c,IAAIjG,WAAWzO,SAE/BpI,KAAKid,UAAYjd,KAAK8c,IAAII,MAAM9U,QAEhCpI,KAAK0b,UAAYA,EAEVmB,IAEN7c,KAAK0b,UAAUhT,UAAY1I,KAAK0b,UAAUhT,SAAS2H,IAAKrQ,KAAK8c,IAAIpU,UACjE1I,KAAK0b,UAAUsB,UAAYhd,KAAK0b,UAAUsB,SAASpG,SAAU5W,KAAK8c,IAAIjG,aA4BzE,OAtBQ,YAAAsG,gBAAP,SAAwB3P,GAElBxN,KAAK0b,UAAUhT,UAEnB1I,KAAK8c,IAAIpU,SAAST,KAAMjI,KAAK+c,cAAcrU,SAASN,QAAQ8G,KAAMlP,KAAK0b,UAAUhT,SAAU8E,IAIvFxN,KAAK0b,UAAUsB,UAEnBhd,KAAK8c,IAAIjG,WAAW5O,KAAMjI,KAAK+c,cAAcC,SAAS5U,QAAQgH,MAAOpP,KAAK0b,UAAUsB,SAAUxP,IAI1FxN,KAAK0b,UAAUwB,OAEnBld,KAAK8c,IAAII,MAAMjV,KAAMjI,KAAKid,UAAU7U,QAAQC,eAAgBrI,KAAK0b,UAAUwB,MAAQ,EAAa,EAAM1P,KAMzG,EAlDA,GCeA,aAMC,aAJU,KAAAC,UAA+D,GAMxEzN,KAAKiF,KAAO,EA0Jd,OAtJQ,YAAAoL,IAAP,SAAeC,GAEd,GAAgC,GAA3BA,EAAO8M,UAAU5a,OA6BtB,OArBAxC,KAAKyN,UAAW6C,EAAOnL,MAAS,CAC/BiY,UAAW9M,EAAO8M,UAClB7M,SAAUD,EAAO+M,WACjBxM,OAAQP,EAAOO,OACf1K,MAAO,MAGRnG,KAAKyN,UAAW6C,EAAOnL,MAAOiY,UAAUnE,MAAM,SAAElL,EAAGC,GAElD,OAASD,EAAE9I,KAAO+I,EAAE/I,MAAW,EAAI,KAI7BjF,KAAKyN,UAAW6C,EAAOnL,MAAOoL,WAEpCvQ,KAAKyN,UAAW6C,EAAOnL,MAAOoL,SAAWxL,EAAM0K,YAAaa,EAAO8M,UAAW,GAAIjX,QAInFnG,KAAKsd,OAEEhN,EAAOnL,KA3BboH,QAAQyE,KAAM,IAAMV,EAAOnL,KAAO,IAAK,2BA+BlC,YAAAqM,IAAP,SAAerM,GAEd,OAAKnF,KAAKyN,UAAWtI,GAEbnF,KAAKyN,UAAWtI,GAAOgB,OAI9BoG,QAAQyE,KAAM,IAAM7L,EAAN,kBAEP,OAMF,YAAAsM,kBAAP,SAA6BtM,GAE5B,OAAKnF,KAAKyN,UAAWtI,GAEbnF,KAAKyN,UAAWtI,IAIvBoH,QAAQyE,KAAM,IAAM7L,EAAN,kBAEP,OAMF,YAAA2G,OAAP,SAAe7G,GAEdjF,KAAKiF,KAAOA,EAEZjF,KAAKsd,QAII,YAAAA,KAAV,WAIC,IAFA,IAAIzL,EAAOC,OAAOD,KAAM7R,KAAKyN,WAEnBhN,EAAI,EAAGA,EAAIoR,EAAKrP,OAAQ/B,IAAO,CAExC,IAAI8c,EAAWvd,KAAKyN,UAAWoE,EAAMpR,IACjC+c,EAAMD,EAASH,UAEfrP,OAAC,EACDC,OAAC,EAED1L,EAAIhC,KAAKqE,IAAK6Y,EAAK,GAAIvY,KAAM3E,KAAKoE,IAAK8Y,EAAKA,EAAIhb,OAAS,GAAIyC,KAAMjF,KAAKiF,OAExE4L,OAAM,EAEV,GAAmB,GAAd2M,EAAIhb,OAERF,EAAIkb,EAAK,GAAIvY,KACb8I,EAAIC,EAAIwP,EAAK,OAEP,CAGN,IAAM,IAAIjG,EAAI,EAAGA,EAAIiG,EAAIhb,OAAS,IAEjCuL,EAAIyP,EAAKjG,GACTvJ,EAAIwP,EAAKjG,EAAI,GAEb1G,EAAS9C,EAAE8C,SAEN9C,EAAE9I,MAAQ3C,GAAKA,GAAK0L,EAAE/I,OAPSsS,KAWrCjV,GAAMA,EAAIyL,EAAE9I,OAAW+I,EAAE/I,KAAO8I,EAAE9I,MAK9B4L,EAEJvO,EAAIuO,EAAOC,KAAMxO,EAAGuO,EAAO/H,MAEhByU,EAAS1M,OAEpBvO,EAAIib,EAAS1M,OAAOC,KAAMxO,EAAGib,EAAS1M,OAAO/H,MAElC9I,KAAKyd,gBAEhBnb,EAAItC,KAAKyd,cAAc3M,KAAMxO,EAAGtC,KAAKyd,cAAc3U,OAI/CyU,EAAShN,UAEbgN,EAASpX,MAAQoX,EAAShN,SAAUxC,EAAE5H,MAAO6H,EAAE7H,MAAO7D,IAE9B,IAAnBib,EAASpX,OAEboG,QAAQC,IAAK,aAAoBqF,EAAMpR,GAAM,MAM9C8L,QAAQyE,KAAM,IAAMa,EAAMpR,GAAM,IAAK,+BASzC,EAlKA,I,uECvBAf,EAAOD,QAAUM,ICCb2d,EAA2B,GAG/B,SAASC,EAAoBC,GAE5B,GAAGF,EAAyBE,GAC3B,OAAOF,EAAyBE,GAAUne,QAG3C,IAAIC,EAASge,EAAyBE,GAAY,CAGjDne,QAAS,IAOV,OAHAoe,EAAoBD,GAAU/c,KAAKnB,EAAOD,QAASC,EAAQA,EAAOD,QAASke,GAGpEje,EAAOD,QCjBf,OCFAke,EAAoBG,EAAKpe,IACxB,IAAIqe,EAASre,GAAUA,EAAOse,WAC7B,IAAMte,EAAgB,QACtB,IAAMA,EAEP,OADAie,EAAoBzR,EAAE6R,EAAQ,CAAEhQ,EAAGgQ,IAC5BA,GCLRJ,EAAoBzR,EAAI,CAACzM,EAASwe,KACjC,IAAI,IAAIC,KAAOD,EACXN,EAAoBQ,EAAEF,EAAYC,KAASP,EAAoBQ,EAAE1e,EAASye,IAC5EpM,OAAOsM,eAAe3e,EAASye,EAAK,CAAEG,YAAY,EAAM7M,IAAKyM,EAAWC,MCJ3EP,EAAoBQ,EAAI,CAACrB,EAAKrZ,IAASqO,OAAO9Q,UAAUsd,eAAezd,KAAKic,EAAKrZ,GCCjFka,EAAoBY,EAAK9e,IACH,oBAAX+e,QAA0BA,OAAOC,aAC1C3M,OAAOsM,eAAe3e,EAAS+e,OAAOC,YAAa,CAAEtY,MAAO,WAE7D2L,OAAOsM,eAAe3e,EAAS,aAAc,CAAE0G,OAAO,KJFhDwX,EAAoB,M","file":"ore-three-ts.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"three\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"three\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"ORE\"] = factory(require(\"three\"));\n\telse\n\t\troot[\"ORE\"] = factory(root[\"THREE\"]);\n})(self, function(__WEBPACK_EXTERNAL_MODULE__807__) {\nreturn ","// Generated by CoffeeScript 1.9.2\n(function() {\n  var root;\n\n  root = typeof exports !== \"undefined\" && exports !== null ? exports : this;\n\n  root.Lethargy = (function() {\n    function Lethargy(stability, sensitivity, tolerance, delay) {\n      this.stability = stability != null ? Math.abs(stability) : 8;\n      this.sensitivity = sensitivity != null ? 1 + Math.abs(sensitivity) : 100;\n      this.tolerance = tolerance != null ? 1 + Math.abs(tolerance) : 1.1;\n      this.delay = delay != null ? delay : 150;\n      this.lastUpDeltas = (function() {\n        var i, ref, results;\n        results = [];\n        for (i = 1, ref = this.stability * 2; 1 <= ref ? i <= ref : i >= ref; 1 <= ref ? i++ : i--) {\n          results.push(null);\n        }\n        return results;\n      }).call(this);\n      this.lastDownDeltas = (function() {\n        var i, ref, results;\n        results = [];\n        for (i = 1, ref = this.stability * 2; 1 <= ref ? i <= ref : i >= ref; 1 <= ref ? i++ : i--) {\n          results.push(null);\n        }\n        return results;\n      }).call(this);\n      this.deltasTimestamp = (function() {\n        var i, ref, results;\n        results = [];\n        for (i = 1, ref = this.stability * 2; 1 <= ref ? i <= ref : i >= ref; 1 <= ref ? i++ : i--) {\n          results.push(null);\n        }\n        return results;\n      }).call(this);\n    }\n\n    Lethargy.prototype.check = function(e) {\n      var lastDelta;\n      e = e.originalEvent || e;\n      if (e.wheelDelta != null) {\n        lastDelta = e.wheelDelta;\n      } else if (e.deltaY != null) {\n        lastDelta = e.deltaY * -40;\n      } else if ((e.detail != null) || e.detail === 0) {\n        lastDelta = e.detail * -40;\n      }\n      this.deltasTimestamp.push(Date.now());\n      this.deltasTimestamp.shift();\n      if (lastDelta > 0) {\n        this.lastUpDeltas.push(lastDelta);\n        this.lastUpDeltas.shift();\n        return this.isInertia(1);\n      } else {\n        this.lastDownDeltas.push(lastDelta);\n        this.lastDownDeltas.shift();\n        return this.isInertia(-1);\n      }\n      return false;\n    };\n\n    Lethargy.prototype.isInertia = function(direction) {\n      var lastDeltas, lastDeltasNew, lastDeltasOld, newAverage, newSum, oldAverage, oldSum;\n      lastDeltas = direction === -1 ? this.lastDownDeltas : this.lastUpDeltas;\n      if (lastDeltas[0] === null) {\n        return direction;\n      }\n      if (this.deltasTimestamp[(this.stability * 2) - 2] + this.delay > Date.now() && lastDeltas[0] === lastDeltas[(this.stability * 2) - 1]) {\n        return false;\n      }\n      lastDeltasOld = lastDeltas.slice(0, this.stability);\n      lastDeltasNew = lastDeltas.slice(this.stability, this.stability * 2);\n      oldSum = lastDeltasOld.reduce(function(t, s) {\n        return t + s;\n      });\n      newSum = lastDeltasNew.reduce(function(t, s) {\n        return t + s;\n      });\n      oldAverage = oldSum / lastDeltasOld.length;\n      newAverage = newSum / lastDeltasNew.length;\n      if (Math.abs(oldAverage) < Math.abs(newAverage * this.tolerance) && (this.sensitivity < Math.abs(newAverage))) {\n        return direction;\n      } else {\n        return false;\n      }\n    };\n\n    Lethargy.prototype.showLastUpDeltas = function() {\n      return this.lastUpDeltas;\n    };\n\n    Lethargy.prototype.showLastDownDeltas = function() {\n      return this.lastDownDeltas;\n    };\n\n    return Lethargy;\n\n  })();\n\n}).call(this);\n","module.exports = function parseUnit(str, out) {\n    if (!out)\n        out = [ 0, '' ]\n\n    str = String(str)\n    var num = parseFloat(str, 10)\n    out[0] = num\n    out[1] = str.match(/[\\d.\\-\\+]*\\s*(.*)/)[1] || ''\n    return out\n}","'use strict'\n\nvar parseUnit = require('parse-unit')\n\nmodule.exports = toPX\n\nvar PIXELS_PER_INCH = getSizeBrutal('in', document.body) // 96\n\n\nfunction getPropertyInPX(element, prop) {\n  var parts = parseUnit(getComputedStyle(element).getPropertyValue(prop))\n  return parts[0] * toPX(parts[1], element)\n}\n\n//This brutal hack is needed\nfunction getSizeBrutal(unit, element) {\n  var testDIV = document.createElement('div')\n  testDIV.style['height'] = '128' + unit\n  element.appendChild(testDIV)\n  var size = getPropertyInPX(testDIV, 'height') / 128\n  element.removeChild(testDIV)\n  return size\n}\n\nfunction toPX(str, element) {\n  if (!str) return null\n\n  element = element || document.body\n  str = (str + '' || 'px').trim().toLowerCase()\n  if(element === window || element === document) {\n    element = document.body\n  }\n\n  switch(str) {\n    case '%':  //Ambiguous, not sure if we should use width or height\n      return element.clientHeight / 100.0\n    case 'ch':\n    case 'ex':\n      return getSizeBrutal(str, element)\n    case 'em':\n      return getPropertyInPX(element, 'font-size')\n    case 'rem':\n      return getPropertyInPX(document.body, 'font-size')\n    case 'vw':\n      return window.innerWidth/100\n    case 'vh':\n      return window.innerHeight/100\n    case 'vmin':\n      return Math.min(window.innerWidth, window.innerHeight) / 100\n    case 'vmax':\n      return Math.max(window.innerWidth, window.innerHeight) / 100\n    case 'in':\n      return PIXELS_PER_INCH\n    case 'cm':\n      return PIXELS_PER_INCH / 2.54\n    case 'mm':\n      return PIXELS_PER_INCH / 25.4\n    case 'pt':\n      return PIXELS_PER_INCH / 72\n    case 'pc':\n      return PIXELS_PER_INCH / 6\n    case 'px':\n      return 1\n  }\n\n  // detect number of units\n  var parts = parseUnit(str)\n  if (!isNaN(parts[0]) && parts[1]) {\n    var px = toPX(parts[1], element)\n    return typeof px === 'number' ? parts[0] * px : null\n  }\n\n  return null\n}\n","export declare interface EasingSet{\n\tfunc: Function;\n\targs?: number | number[];\n}\n\nexport namespace Easings {\n\n\texport function sigmoid( x: number, ...variables: number[] ): number {\n\n\t\tlet weight = 6;\n\n\t\tif ( variables[ 0 ] ) {\n\n\t\t\tweight = variables[ 0 ];\n\n\t\t}\n\n\t\tvar e1 = Math.exp( - weight * ( 2 * x - 1 ) );\n\t\tvar e2 = Math.exp( - weight );\n\n\t\treturn ( 1 + ( 1 - e1 ) / ( 1 + e1 ) * ( 1 + e2 ) / ( 1 - e2 ) ) / 2;\n\n\t}\n\n\texport function smoothstep( min: number, max: number, value: number ): number {\n\n\t\tlet x = Math.max( 0, Math.min( 1, value - min / ( max - min ) ) );\n\n\t\treturn x * x * ( 3 - 2 * x );\n\n\t}\n\n\texport function lerpNumber( a: number, b: number, t: number ): number {\n\n\t\treturn ( 1.0 - t ) * a + t * b;\n\n\t}\n\n\t/*\n\t@auther https://gist.github.com/gre/1650294\n\t*/\n\n\texport function linear( t: number ) {\n\n\t\treturn t;\n\n\t}\n\n\t// accelerating from zero velocity\n\texport function easeInQuad( t: number ) {\n\n\t\treturn t * t;\n\n\t}\n\n\t// decelerating to zero velocity\n\texport function easeOutQuad( t: number ) {\n\n\t\treturn t * ( 2 - t );\n\n\t}\n\n\t// acceleration until halfway, then deceleration\n\texport function easeInOutQuad( t: number ) {\n\n\t\treturn t < .5 ? 2 * t * t : - 1 + ( 4 - 2 * t ) * t;\n\n\t}\n\n\t// accelerating from zero velocity\n\texport function easeInCubic( t: number ) {\n\n\t\treturn t * t * t;\n\n\t}\n\n\t// decelerating to zero velocity\n\texport function easeOutCubic( t: number ) {\n\n\t\treturn ( -- t ) * t * t + 1;\n\n\t}\n\n\t// acceleration until halfway, then deceleration\n\texport function easeInOutCubic( t: number ) {\n\n\t\treturn t < .5 ? 4 * t * t * t : ( t - 1 ) * ( 2 * t - 2 ) * ( 2 * t - 2 ) + 1;\n\n\t}\n\n\t// accelerating from zero velocity\n\texport function easeInQuart( t: number ) {\n\n\t\treturn t * t * t * t;\n\n\t}\n\n\t// decelerating to zero velocity\n\texport function easeOutQuart( t: number ) {\n\n\t\treturn 1 - ( -- t ) * t * t * t;\n\n\t}\n\n\t// acceleration until halfway, then deceleration\n\texport function easeInOutQuart( t: number ) {\n\n\t\treturn t < .5 ? 8 * t * t * t * t : 1 - 8 * ( -- t ) * t * t * t;\n\n\t}\n\n\t// accelerating from zero velocity\n\texport function easeInQuint( t: number ) {\n\n\t\treturn t * t * t * t * t;\n\n\t}\n\n\t// decelerating to zero velocity\n\texport function easeOutQuint( t: number ) {\n\n\t\treturn 1 + ( -- t ) * t * t * t * t;\n\n\t}\n\n\t// acceleration until halfway, then deceleration\n  \texport function easeInOutQuint( t: number ) {\n\n  \t\treturn t < .5 ? 16 * t * t * t * t * t : 1 + 16 * ( -- t ) * t * t * t * t;\n\n  \t}\n\n}\n","export declare interface LerpFunc<T>{\n\t( a: T, b: T, t: number ): T;\n}\n\nexport namespace Lerps {\n\n\texport function number( a: number, b: number, t: number ) {\n\n\t\treturn a + ( b - a ) * t;\n\n\t}\n\n\texport function numberArray( a: number[], b: number[], t: number ) {\n\n\t\tif ( a.length == b.length ) {\n\n\t\t\tlet c = [];\n\n\t\t\tfor ( let i = 0; i < a.length; i ++ ) {\n\n\t\t\t\tc.push( a[ i ] + ( b[ i ] - a[ i ] ) * t );\n\n\t\t\t}\n\n\t\t\treturn c;\n\n\t\t} else {\n\n\t\t\tconsole.log( 'Different length Arrays!!!' );\n\n\t\t\treturn false;\n\n\t\t}\n\n\t}\n\n\texport function THREEVectors( a: THREE.Vector2 & THREE.Vector3 & THREE.Vector4 & THREE.Color, b: THREE.Vector2 & THREE.Vector3 & THREE.Vector4 & THREE.Color, t: number ) {\n\n\t\treturn a.clone().lerp( b, t );\n\n\t}\n\n\texport function THREEQuaternion( a: THREE.Quaternion, b: THREE.Quaternion, t: number ) {\n\n\t\treturn a.clone().slerp( b, t );\n\n\t}\n\n\texport function THREEEuler( a: THREE.Euler, b: THREE.Euler, t: number ) {\n\n\t\tlet ac = a.clone();\n\t\tlet bc = b.clone();\n\n\t\tac.x = ac.x + ( bc.x - ac.x ) * t;\n\t\tac.y = ac.y + ( bc.y - ac.y ) * t;\n\t\tac.z = ac.z + ( bc.z - ac.z ) * t;\n\n\t\treturn ac;\n\n\t}\n\n\texport function getLerpFunc( value: any ) {\n\n\t\tif ( typeof ( value ) == 'number' ) {\n\n\t\t\treturn Lerps.number;\n\n\t\t} else if ( value instanceof Array && typeof ( value[ 0 ] ) == 'number' ) {\n\n\t\t\treturn Lerps.numberArray;\n\n\t\t} else if ( value.isVector2 | value.isVector3 | value.isVector4 | value.isColor ) {\n\n\t\t\treturn Lerps.THREEVectors;\n\n\t\t} else if ( value.isQuaternion ) {\n\n\t\t\treturn Lerps.THREEQuaternion;\n\n\t\t} else if ( value.isEuler ) {\n\n\t\t\treturn Lerps.THREEEuler;\n\n\t\t}\n\n\t}\n\n}\n","import * as THREE from 'three';\n\nimport { Uniforms } from '../utils/Uniforms';\nimport { PointerEventArgs } from './Controller';\n\nexport declare interface LayerBindParam extends THREE.WebGLRendererParameters {\n\tname: string;\n\tcanvas: HTMLCanvasElement;\n\taspect?: AspectInfo;\n\twrapperElement?: HTMLElement;\n\twrapperElementRect?: DOMRect;\n}\n\nexport declare interface LayerInfo extends LayerBindParam {\n\tsize?: LayerSize;\n}\n\nexport declare interface LayerSize {\n\tcanvasAspectRatio: number;\n\twindowSize: THREE.Vector2;\n\twindowAspectRatio: number;\n\tcanvasSize: THREE.Vector2;\n\tcanvasPixelSize: THREE.Vector2;\n}\n\nexport declare interface AspectInfo {\n\tmainAspect: number;\n\tportraitAspect: number;\n\twideAspect: number;\n\tportraitWeight: number;\n\twideWeight: number;\n}\n\nexport declare interface TouchEventArgs {\n\tevent?: PointerEvent;\n\tposition: THREE.Vector2;\n\tdelta: THREE.Vector2;\n\tnormalizedPosition: THREE.Vector2;\n\twindowPosition: THREE.Vector2;\n}\n\nexport class BaseLayer extends THREE.EventDispatcher {\n\n\tpublic info: LayerInfo;\n\n\tpublic renderer: THREE.WebGLRenderer;\n\n\tpublic scene: THREE.Scene;\n\tpublic camera: THREE.PerspectiveCamera;\n\n\tprotected readyAnimate: boolean = false;\n\tpublic time: number = 0;\n\tpublic commonUniforms: Uniforms;\n\n\tconstructor() {\n\n\t\tsuper();\n\n\t\tthis.info = {\n\t\t\tname: '',\n\t\t\tcanvas: null,\n\t\t\twrapperElement: null,\n\t\t\twrapperElementRect: null,\n\t\t\taspect: {\n\t\t\t\tmainAspect: 16 / 9,\n\t\t\t\twideAspect: 10 / 1,\n\t\t\t\tportraitAspect: 1 / 2,\n\t\t\t\tportraitWeight: 0.0,\n\t\t\t\twideWeight: 0.0\n\t\t\t},\n\t\t\tsize: {\n\t\t\t\twindowSize: new THREE.Vector2(),\n\t\t\t\twindowAspectRatio: 1.0,\n\t\t\t\tcanvasSize: new THREE.Vector2(),\n\t\t\t\tcanvasPixelSize: new THREE.Vector2(),\n\t\t\t\tcanvasAspectRatio: 1.0\n\t\t\t}\n\t\t};\n\n\t\tthis.commonUniforms = {\n\t\t\ttime: {\n\t\t\t\tvalue: 0\n\t\t\t}\n\t\t};\n\n\t\tthis.scene = new THREE.Scene();\n\t\tthis.camera = new THREE.PerspectiveCamera( 50, 1, 0.1, 1000 );\n\n\t}\n\n\tpublic tick( deltaTime: number ) {\n\n\t\tthis.time += deltaTime;\n\n\t\tthis.commonUniforms.time.value = this.time;\n\n\t\tif ( this.readyAnimate ) {\n\n\t\t\tthis.animate( deltaTime );\n\n\t\t}\n\n\t}\n\n\tpublic animate( deltaTime: number ) {}\n\n\tpublic onBind( layerInfo: LayerBindParam ) {\n\n\t\tthis.info.name = layerInfo.name;\n\t\tthis.info.canvas = layerInfo.canvas;\n\t\tthis.info.wrapperElement = layerInfo.wrapperElement;\n\t\tthis.info.wrapperElementRect = layerInfo.wrapperElement && layerInfo.wrapperElement.getBoundingClientRect(),\n\t\tthis.info.aspect = layerInfo.aspect || this.info.aspect;\n\n\t\tthis.renderer = new THREE.WebGLRenderer( this.info );\n    \tthis.renderer.debug.checkShaderErrors = true;\n\t\tthis.renderer.setSize( window.innerWidth, window.innerHeight );\n\n\t\tsetTimeout( () => {\n\n\t\t\tthis.onResize();\n\t\t\tthis.readyAnimate = true;\n\n\t\t}, 0 );\n\n\t}\n\n\tpublic onUnbind() {\n\n\t\tthis.removeChildrens( this.scene );\n\n\t\tthis.readyAnimate = false;\n\n\t}\n\n\tprotected removeChildrens( object: THREE.Object3D ) {\n\n\t\tconst length = object.children.length;\n\n\t\tfor ( let i = length - 1; i >= 0; i -- ) {\n\n\t\t\tthis.removeChildrens( object.children[ i ] );\n\n\t\t\tlet geo: THREE.Geometry | THREE.BufferGeometry;\n\t\t\tlet mat: THREE.Material;\n\n\t\t\tif ( ( object.children[ i ] as THREE.Mesh ).isMesh ) {\n\n\t\t\t\tgeo = ( object.children[ i ] as THREE.Mesh ).geometry;\n\t\t\t\tmat = ( ( object.children[ i ] as THREE.Mesh ).material as THREE.Material );\n\n\t\t\t}\n\n\t\t\tobject.remove( ( object.children[ i ] ) );\n\n\t\t\tif ( geo ) {\n\n\t\t\t\tgeo.dispose();\n\n\t\t\t}\n\n\t\t\tif ( mat ) {\n\n\t\t\t\tmat.dispose();\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tpublic onResize() {\n\n\t\tlet newWindowSize = new THREE.Vector2( window.innerWidth, window.innerHeight );\n\t\tlet newCanvasSize = new THREE.Vector2();\n\n\t\tif ( this.info.wrapperElement ) {\n\n\t\t\tnewCanvasSize.set( this.info.wrapperElement.clientWidth, this.info.wrapperElement.clientHeight );\n\n\t\t} else {\n\n\t\t\tnewCanvasSize.copy( newWindowSize );\n\n\t\t}\n\n\t\tlet portraitWeight = 1.0 - ( ( newCanvasSize.x / newCanvasSize.y ) - this.info.aspect.portraitAspect ) / ( this.info.aspect.mainAspect - this.info.aspect.portraitAspect );\n\t\tportraitWeight = Math.min( 1.0, Math.max( 0.0, portraitWeight ) );\n\n\t\tlet wideWeight = 1.0 - ( ( newCanvasSize.x / newCanvasSize.y ) - this.info.aspect.wideAspect ) / ( this.info.aspect.mainAspect - this.info.aspect.wideAspect );\n\t\twideWeight = Math.min( 1.0, Math.max( 0.0, wideWeight ) );\n\n\t\tthis.info.size.windowSize.copy( newWindowSize );\n\t\tthis.info.size.windowAspectRatio = newWindowSize.x / newWindowSize.y;\n\t\tthis.info.size.canvasSize.copy( newCanvasSize );\n\t\tthis.info.size.canvasPixelSize.copy( newCanvasSize.clone().multiplyScalar( this.renderer.getPixelRatio() ) );\n\t\tthis.info.size.canvasAspectRatio = newCanvasSize.x / newCanvasSize.y,\n\t\tthis.info.aspect.portraitWeight = portraitWeight,\n\t\tthis.info.aspect.wideWeight = wideWeight,\n\n\t\tthis.renderer.setSize( this.info.size.canvasSize.x, this.info.size.canvasSize.y );\n\t\tthis.camera.aspect = this.info.size.canvasAspectRatio;\n\t\tthis.camera.updateProjectionMatrix();\n\n\t\tif ( this.info.wrapperElement ) {\n\n\t\t\tthis.info.wrapperElementRect = this.info.wrapperElement.getBoundingClientRect();\n\n\t\t}\n\n\t}\n\n\tpublic pointerEvent( e: PointerEventArgs ) {\n\n\t\tlet canvasPosition = e.position.clone();\n\n\t\tif ( this.info.wrapperElementRect ) {\n\n\t\t\tcanvasPosition.x -= this.info.wrapperElementRect.x;\n\t\t\tcanvasPosition.y -= this.info.wrapperElementRect.y;\n\n\t\t}\n\n\t\tlet normalizedPosition = canvasPosition.clone();\n\t\tnormalizedPosition.divide( this.info.size.canvasSize );\n\t\tnormalizedPosition.y = 1.0 - normalizedPosition.y;\n\t\tnormalizedPosition.multiplyScalar( 2.0 ).subScalar( 1.0 );\n\n\t\tlet args: TouchEventArgs = {\n\t\t\tevent: e.pointerEvent,\n\t\t\tposition: canvasPosition.clone(),\n\t\t\tdelta: e.delta.clone(),\n\t\t\tnormalizedPosition: normalizedPosition.clone(),\n\t\t\twindowPosition: e.position.clone()\n\t\t};\n\n\t\tif ( e.pointerEventType == 'hover' ) {\n\n\t\t\tthis.onHover( args );\n\n\t\t} else if ( e.pointerEventType == 'start' ) {\n\n\t\t\tthis.onTouchStart( args );\n\n\t\t} else if ( e.pointerEventType == 'move' ) {\n\n\t\t\tthis.onTouchMove( args );\n\n\t\t} else if ( e.pointerEventType == 'end' ) {\n\n\t\t\tthis.onTouchEnd( args );\n\n\t\t}\n\n\t}\n\n\tpublic onTouchStart( args: TouchEventArgs ) { }\n\n\tpublic onTouchMove( args: TouchEventArgs ) { }\n\n\tpublic onTouchEnd( args: TouchEventArgs ) { }\n\n\tpublic onHover( args: TouchEventArgs ) { }\n\n\tpublic onWheel( event: WheelEvent, trackpadDelta: number ) { }\n\n}\n","import * as THREE from \"three\";\n\nimport { Lethargy } from 'lethargy';\nimport toPx from 'to-px';\nexport class Pointer extends THREE.EventDispatcher {\n\n\tprotected isSP: boolean;\n\tprotected isTouching: boolean;\n\n\tpublic position: THREE.Vector2;\n\tpublic delta: THREE.Vector2;\n\n\tconstructor() {\n\n\t\tsuper();\n\n\t\tthis.position = new THREE.Vector2( NaN, NaN );\n\t\tthis.delta = new THREE.Vector2( NaN, NaN );\n\n\t\tlet userAgent = navigator.userAgent;\n\t\tthis.isSP = userAgent.indexOf( 'iPhone' ) >= 0 || userAgent.indexOf( 'iPad' ) >= 0 || userAgent.indexOf( 'Android' ) >= 0 || navigator.platform == \"iPad\" || ( navigator.platform == \"MacIntel\" && navigator.userAgent.indexOf( \"Safari\" ) != - 1 && navigator.userAgent.indexOf( \"Chrome\" ) == - 1 && ( navigator as any ).standalone !== undefined );\n\n\t\twindow.addEventListener( 'pointerdown', this.touchEvent.bind( this, \"start\" ) );\n\t\twindow.addEventListener( 'pointermove', this.touchEvent.bind( this, \"move\" ) );\n\t\twindow.addEventListener( 'pointerup', this.touchEvent.bind( this, \"end\" ) );\n\t\twindow.addEventListener( \"dragend\", this.touchEvent.bind( this, \"end\" ) );\n\t\twindow.addEventListener( \"wheel\", this.wheel.bind( this ), { passive: false } );\n\n\t\tthis.position.set( NaN, NaN );\n\t\tthis.isTouching = false;\n\n\t}\n\n\tpublic getNormalizePosition( windowSize: THREE.Vector2 ) {\n\n\t\tif ( this.position.x != this.position.x ) return new THREE.Vector2( NaN, NaN );\n\n\t\tlet p = this.position.clone()\n\t\t\t.divide( windowSize )\n\t\t\t.multiplyScalar( 2.0 )\n\t\t\t.subScalar( 1.0 );\n\t\tp.y *= - 1;\n\n\t\treturn p;\n\n\t}\n\n\tpublic getRelativePosition( elm: HTMLElement, normalize?: boolean ) {\n\n\t\tlet rect: DOMRect = elm.getClientRects()[ 0 ] as DOMRect;\n\n\t\tlet pos: THREE.Vector2;\n\n\t\tlet x = pos.x - rect.left;\n\t\tlet y = pos.y - rect.top;\n\n\t\tif ( normalize ) {\n\n\t\t\tx /= rect.width;\n\t\t\ty /= rect.height;\n\n\t\t}\n\n\t\tlet p = new THREE.Vector2( x, y );\n\n\t\treturn p;\n\n\t}\n\n\tprotected setPos( x: number, y: number ) {\n\n\t\tif (\n\t\t\tthis.position.x !== this.position.x ||\n\t\t\tthis.position.y !== this.position.y\n\t\t) {\n\n\t\t\tthis.delta.set( 0, 0 );\n\n\t\t} else {\n\n\t\t\tthis.delta.set( x - this.position.x, y - this.position.y );\n\n\t\t}\n\n\t\tthis.position.set( x, y );\n\n\t}\n\n\tprotected touchEvent( type: string, e: PointerEvent ) {\n\n\t\tlet dispatch = false;\n\n\t\tlet x = e.pageX - window.pageXOffset;\n\t\tlet y = e.pageY - window.pageYOffset;\n\n\t\tif ( type == \"start\" ) {\n\n\t\t\tthis.isTouching = true;\n\n\t\t\tthis.setPos( x, y );\n\n\t\t\tdispatch = true;\n\n\t\t} else if ( type == \"move\" ) {\n\n\t\t\tthis.setPos( x, y );\n\n\t\t\tif ( this.isTouching ) {\n\n\t\t\t\tdispatch = true;\n\n\t\t\t}\n\n\t\t} else if ( type == \"end\" ) {\n\n\t\t\tthis.isTouching = false;\n\n\t\t\tdispatch = true;\n\n\t\t}\n\n\t\tif ( dispatch ) {\n\n\t\t\tthis.dispatchEvent( {\n\t\t\t\ttype: 'update',\n\t\t\t\tpointerEvent: e,\n\t\t\t\tpointerEventType: type,\n\t\t\t\tposition: this.position.clone(),\n\t\t\t\tdelta: this.delta.clone()\n\t\t\t} );\n\n\t\t}\n\n\t}\n\n\tpublic update() {\n\n\t\tif ( ! this.isSP ) {\n\n\t\t\tthis.dispatchEvent( {\n\t\t\t\ttype: 'update',\n\t\t\t\tpointerEvent: null,\n\t\t\t\tpointerEventType: 'hover',\n\t\t\t\tposition: this.position.clone(),\n\t\t\t\tdelta: this.delta.clone()\n\t\t\t} );\n\n\t\t}\n\n\t}\n\n\tprotected trackpadMemDelta = 0;\n\tprotected trackpadMax: boolean = false;\n\tprotected lethargy = new Lethargy( 7, 0, 0.05 );\n\n\tprotected wheel( e: WheelEvent ) {\n\n\t\tlet delta = e.deltaY;\n\t\tlet trackpadDelta = 0;\n\n\t\tswitch ( e.deltaMode ) {\n\n\t\t\tcase e.DOM_DELTA_LINE:\n\t\t\t\tdelta *= toPx( 'ex', window ) * 2.5;\n\t\t\t\tbreak;\n\n\t\t\tcase e.DOM_DELTA_PAGE:\n\t\t\t\tdelta *= window.innerHeight;\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\tif ( this.lethargy.check( e ) ) {\n\n\t\t\ttrackpadDelta = delta;\n\n\t\t} else {\n\n\t\t\tlet d = delta - this.trackpadMemDelta;\n\n\t\t\tif ( Math.abs( d ) > 50 ) {\n\n\t\t\t\tthis.trackpadMemDelta = d;\n\t\t\t\ttrackpadDelta = delta;\n\n\t\t\t\tthis.trackpadMax = true;\n\n\t\t\t} else if ( d == 0 ) {\n\n\t\t\t\tif ( this.trackpadMax ) {\n\n\t\t\t\t\ttrackpadDelta = delta;\n\n\t\t\t\t}\n\n\t\t\t} else if ( d < 0 ) {\n\n\t\t\t\tthis.trackpadMax = false;\n\n\t\t\t}\n\n\t\t\tthis.trackpadMemDelta = ( delta );\n\n\t\t}\n\n\t\tthis.dispatchEvent( {\n\t\t\ttype: 'wheel',\n\t\t\twheelEvent: e,\n\t\t\ttrackpadDelta: trackpadDelta\n\t\t} );\n\n\t}\n\n}\n","import * as THREE from 'three';\nimport { Pointer } from '../utils/Pointer';\nimport { BaseLayer, LayerInfo } from './BaseLayer';\n\nexport declare interface PointerEventArgs {\n\tpointerEvent: PointerEvent;\n\tpointerEventType: string;\n\tposition: THREE.Vector2;\n\tdelta: THREE.Vector2;\n}\n\nexport declare interface ControllerParam {\n\tsilent?: boolean;\n}\n\nexport class Controller extends THREE.EventDispatcher {\n\n    public pointer: Pointer;\n\tpublic clock: THREE.Clock;\n\tprotected layers: BaseLayer[] = [];\n\n\tconstructor( parameter?: ControllerParam ) {\n\n    \tsuper();\n\n    \tif ( ! ( parameter && parameter.silent ) ) {\n\n    \t\tconsole.log( \"%c- ore-three \" + require( \"../../package.json\" ).version + \" -\", 'padding: 5px 10px ;background-color: black; color: white;font-size:11px' );\n\n    \t}\n\n    \tthis.clock = new THREE.Clock();\n\n    \tthis.pointer = new Pointer();\n    \tthis.pointer.addEventListener( 'update', this.pointerEvent.bind( this ) );\n    \tthis.pointer.addEventListener( 'wheel', this.onWheel.bind( this ) );\n\n    \twindow.addEventListener( 'orientationchange', this.onOrientationDevice.bind( this ) );\n    \twindow.addEventListener( 'resize', this.onWindowResize.bind( this ) );\n\n    \tthis.tick();\n\n\t}\n\n\tprotected tick() {\n\n    \tlet deltaTime = this.clock.getDelta();\n\n    \tthis.pointer.update();\n\n    \tfor ( let i = 0; i < this.layers.length; i ++ ) {\n\n    \t\tthis.layers[ i ].tick( deltaTime );\n\n    \t}\n\n    \trequestAnimationFrame( this.tick.bind( this ) );\n\n\t}\n\n\tpublic getLayer( layerName: string ) {\n\n    \tfor ( let i = 0; i < this.layers.length; i ++ ) {\n\n    \t\tif ( this.layers[ i ].info.name == layerName ) return this.layers[ i ];\n\n    \t}\n\n    \treturn null;\n\n\t}\n\n\tpublic addLayer( layer: BaseLayer, layerInfo: LayerInfo ) {\n\n    \twhile ( this.getLayer( layerInfo.name ) ) {\n\n    \t\tlayerInfo.name += '_';\n\n    \t}\n\n    \tlayer.onBind( layerInfo );\n    \tthis.layers.push( layer );\n\n\t}\n\n\tpublic removeLayer( layerNmae: string ) {\n\n    \tfor ( let i = this.layers.length; i >= 0; i -- ) {\n\n    \t\tlet layer = this.layers[ i ];\n\n    \t\tif ( layer.info.name == layerNmae ) {\n\n    \t\t\tthis.layers.splice( i, 1 );\n\n    \t\t}\n\n    \t}\n\n\t}\n\n\tprotected onWindowResize() {\n\n    \tfor ( let i = 0; i < this.layers.length; i ++ ) {\n\n    \t\tthis.layers[ i ].onResize();\n\n    \t}\n\n\t}\n\n\tprotected onOrientationDevice() {\n\n    \tthis.onWindowResize();\n\n\t}\n\n\tprotected pointerEvent( e: PointerEventArgs ) {\n\n    \tfor ( let i = 0; i < this.layers.length; i ++ ) {\n\n    \t\tthis.layers[ i ].pointerEvent( e );\n\n    \t}\n\n\t}\n\n\tprotected onWheel( e: { wheelEvent: WheelEvent, trackpadDelta: number } ) {\n\n    \tfor ( let i = 0; i < this.layers.length; i ++ ) {\n\n    \t\tthis.layers[ i ].onWheel( e.wheelEvent, e.trackpadDelta );\n\n    \t}\n\n\t}\n\n}\n","import { Easings, EasingSet } from \"./Easings\";\nimport { LerpFunc, Lerps } from \"./Lerps\";\nimport { Uniforms } from \"./Uniforms\";\n\nexport declare interface AnimatorVariable<T>{\n\ttime: number;\n\tduration?: number;\n\tvalue: T;\n\tstartValue: T;\n\tgoalValue: T;\n\tonAnimationFinished?: Function;\n\tlerpFunc: LerpFunc<T>;\n\teasing: EasingSet;\n}\n\nexport declare interface AnimatorValiableParams<T> {\n\tname: string;\n\tinitValue: T;\n\teasing?: EasingSet;\n\tcustomLerpFunc?: LerpFunc<T>;\n}\n\nexport class Animator {\n\n\tprotected variables: { [ key: string ]: AnimatorVariable<any> };\n\tprotected _isAnimating: boolean = false;\n\tprotected animatingCount: number = 0;\n\tprotected dispatchEvents: Function[] = [];\n\n\tconstructor() {\n\n\t\tthis.variables = {};\n\n\t}\n\n\tpublic get isAnimating() {\n\n\t\treturn this._isAnimating;\n\n\t}\n\n\tpublic add<T>( params: AnimatorValiableParams<T> ) {\n\n\t\tlet lerpFunc = params.customLerpFunc || Lerps.getLerpFunc( params.initValue );\n\n\t\tlet variable = {\n\t\t\ttime: - 1,\n\t\t\tvalue: params.initValue,\n\t\t\tstartValue: params.initValue,\n\t\t\tgoalValue: null,\n\t\t\teasing: params.easing || { func: Easings.sigmoid, args: 6 },\n\t\t\tlerpFunc: lerpFunc,\n\t\t};\n\n\t\tthis.variables[ params.name ] = variable;\n\n\t\treturn variable;\n\n\t}\n\n\tpublic setEasing( name: string, easing: EasingSet ) {\n\n\t\tlet variable = this.variables[ name ];\n\n\t\tif ( variable ) {\n\n\t\t\tvariable.easing = easing;\n\n\t\t} else {\n\n\t\t\tconsole.warn( '\"' + name + '\"' + ' is not exist' );\n\n\t\t}\n\n\t}\n\n\tpublic animate<T>( name: string, goalValue: T, duration: number = 1, callback?: Function, easing?: EasingSet ) {\n\n\t\tlet variable = this.variables[ name ];\n\t\tlet promise = new Promise( resolve => {\n\n\t\t\tif ( variable ) {\n\n\t\t\t\tif ( duration <= 0 ) {\n\n\t\t\t\t\tthis.setValue( name, goalValue );\n\n\t\t\t\t\tvariable.time = 1.0;\n\t\t\t\t\tvariable.onAnimationFinished = () => {\n\n\t\t\t\t\t\tcallback && callback();\n\t\t\t\t\t\tresolve( null );\n\n\t\t\t\t\t};\n\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t\tif ( variable.time == - 1 ) {\n\n\t\t\t\t\tthis._isAnimating = true;\n\t\t\t\t\tthis.animatingCount ++;\n\n\t\t\t\t}\n\n\t\t\t\tvariable.time = 0;\n\t\t\t\tvariable.duration = duration;\n\t\t\t\tvariable.startValue = variable.value;\n\t\t\t\tvariable.goalValue = goalValue;\n\t\t\t\tvariable.onAnimationFinished = () => {\n\n\t\t\t\t\tcallback && callback();\n\t\t\t\t\tresolve( null );\n\n\t\t\t\t};\n\n\t\t\t\tif ( easing ) {\n\n\t\t\t\t\tthis.setEasing( name, easing );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( '\"' + name + '\"' + ' is not exist' );\n\n\t\t\t}\n\n\t\t} );\n\n\t\treturn promise;\n\n\t}\n\n\tpublic cancelAnimate( name: string ) {\n\n\t\tlet variable = this.variables[ name ];\n\n\t\tif ( variable ) {\n\n\t\t\tvariable.time = 1.0;\n\t\t\tvariable.onAnimationFinished = null;\n\n\t\t} else {\n\n\t\t\tconsole.warn( '\"' + name + '\"' + ' is not exist' );\n\n\t\t}\n\n\t}\n\n\tpublic setValue<T>( name: string, value: T ) {\n\n\t\tif ( this.variables[ name ] ) {\n\n\t\t\tthis.variables[ name ].value = value;\n\t\t\tthis.cancelAnimate( name );\n\n\t\t} else {\n\n\t\t\tconsole.warn( '\"' + name + '\"' + ' is not exist' );\n\n\t\t\treturn null;\n\n\t\t}\n\n\t}\n\n\tpublic get<T>( name: string ): T {\n\n\t\tif ( this.variables[ name ] ) {\n\n\t\t\treturn this.variables[ name ].value;\n\n\t\t} else {\n\n\t\t\tconsole.warn( '\"' + name + '\"' + ' is not exist' );\n\n\t\t\treturn null;\n\n\t\t}\n\n\t}\n\n\tpublic getVariableObject<T>( name: string, mute: boolean = false ): AnimatorVariable<T> {\n\n\t\tif ( this.variables[ name ] ) {\n\n\t\t\treturn this.variables[ name ];\n\n\t\t} else {\n\n\t\t\tif ( ! mute ) {\n\n\t\t\t\tconsole.warn( '\"' + name + '\"' + ' is not exist' );\n\n\t\t\t}\n\n\t\t\treturn null;\n\n\t\t}\n\n\t}\n\n\tpublic applyToUniforms( uniforms: Uniforms ) {\n\n\t\tlet keys = Object.keys( this.variables );\n\n\t\tfor ( let i = 0; i < keys.length; i ++ ) {\n\n\t\t\tuniforms[ keys[ i ] ] = this.getVariableObject( keys[ i ] );\n\n\t\t}\n\n\t}\n\n\tpublic update( deltaTime?: number ) {\n\n\t\tif ( this.animatingCount == 0 ) {\n\n\t\t\tthis._isAnimating = false;\n\n\t\t}\n\n\t\tlet keys = Object.keys( this.variables );\n\n\t\tfor ( let i = 0; i < keys.length; i ++ ) {\n\n\t\t\tlet variable = this.variables[ keys[ i ] ];\n\n\t\t\tif ( variable.time == 1.0 ) {\n\n\t\t\t\tthis.animatingCount --;\n\t\t\t\tvariable.time = - 1;\n\n\t\t\t\tif ( variable.onAnimationFinished ) {\n\n\t\t\t\t\tthis.dispatchEvents.push( variable.onAnimationFinished );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( variable.time >= 0.0 && variable.time < 1.0 ) {\n\n\t\t\t\tvariable.time += ( deltaTime || 0.016 ) / variable.duration;\n\n\t\t\t\tif ( variable.duration == 0 || variable.time >= 1.0 ) {\n\n\t\t\t\t\tvariable.time = 1.0;\n\n\t\t\t\t}\n\n\t\t\t\tlet t = variable.time;\n\n\t\t\t\tif ( variable.easing ) {\n\n\t\t\t\t\tt = variable.easing.func( t, variable.easing.args );\n\n\t\t\t\t}\n\n\t\t\t\tvariable.value = variable.lerpFunc( variable.startValue, variable.goalValue, t );\n\n\t\t\t\tif ( variable.time == 1.0 ) {\n\n\t\t\t\t\tvariable.value = variable.goalValue;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\twhile ( this.dispatchEvents.length != 0 ) {\n\n\t\t\tthis.dispatchEvents.pop()();\n\n\t\t}\n\n\t}\n\n}\n","import * as THREE from 'three';\r\n\r\nexport interface Uniforms{ [ key: string ] : THREE.IUniform }\r\n\r\nexport namespace UniformsLib {\r\n\r\n\texport function mergeUniforms( ...uniforms: Uniforms[] ) : Uniforms {\r\n\r\n\t\tlet res = {};\r\n\r\n\t\tfor ( let i = 0; i < uniforms.length; i ++ ) {\r\n\r\n\t\t\tObject.assign( res, uniforms[ i ] );\r\n\r\n\t\t}\r\n\r\n\t\treturn res;\r\n\r\n\t}\r\n\r\n}\r\n","import * as ORE from '../../';\nimport * as THREE from 'three';\n\nimport vert from './shaders/background.vs';\nimport { LayerSize as LayerSizeInfo } from '../../core/BaseLayer';\n\nexport class Background extends THREE.Mesh {\n\n\tprotected uniforms: ORE.Uniforms;\n\n\tconstructor( param: THREE.ShaderMaterialParameters ) {\n\n\t\tlet geo = new THREE.BufferGeometry();\n\n\t\tlet posArray = [];\n\t\tlet indexArray = [];\n\t\tlet uvArray = [];\n\n\t\tposArray.push( - 1, 1, 0 );\n\t\tposArray.push( 1, 1, 0 );\n\t\tposArray.push( 1, - 1, 0 );\n\t\tposArray.push( - 1, - 1, 0 );\n\n\t\tuvArray.push( 0, 1 );\n\t\tuvArray.push( 1, 1 );\n\t\tuvArray.push( 1, 0 );\n\t\tuvArray.push( 0, 0 );\n\n\t\tindexArray.push( 0, 2, 1, 0, 3, 2 );\n\n\t\tlet pos = new Float32Array( posArray );\n\t\tlet indices = new Uint32Array( indexArray );\n\t\tlet uv = new Float32Array( uvArray );\n\n\t\tgeo.setAttribute( 'position', new THREE.BufferAttribute( pos, 3 ) );\n\t\tgeo.setAttribute( 'uv', new THREE.BufferAttribute( uv, 2 ) );\n\t\tgeo.setIndex( new THREE.BufferAttribute( indices, 1 ) );\n\n\t\tparam.vertexShader = param.vertexShader || vert;\n\t\tparam.transparent = param.transparent != undefined ? param.transparent : true;\n\t\tparam.depthFunc = param.depthFunc != undefined ? param.depthFunc : THREE.NeverDepth;\n\n\t\tlet mat = new THREE.ShaderMaterial( param );\n\n\t\tsuper( geo, mat );\n\n\t\tthis.uniforms = param.uniforms || {};\n\n\t\tthis.frustumCulled = false;\n\n\t}\n\n\tpublic resize( args: LayerSizeInfo ) {\n\n\t\tthis.uniforms.resolution = { value: args.canvasSize };\n\t\tthis.uniforms.aspectRatio = { value: args.canvasAspectRatio };\n\n\t}\n\n}\n","export default \"#define GLSLIFY 1\\nvarying vec2 vUv;\\nvarying vec4 vColor;\\n\\nvoid main( void ) {\\n    \\n    vec3 pos = position;\\n\\n    pos.z = 1.0;\\n    \\n    gl_Position = vec4( pos, 1.0 );\\n    \\n    vUv = uv;\\n    vColor = vec4( 1.0 );\\n\\n}\";","import * as THREE from 'three';\nimport vert from './domMesh.vs';\nimport { Uniforms, UniformsLib } from '../Uniforms';\n\nexport class DOMMesh extends THREE.Mesh {\n\n\tprotected _uniforms: Uniforms;\n\tprotected element: HTMLElement;\n\n\tconstructor( element: HTMLElement, parameter: THREE.ShaderMaterialParameters ) {\n\n\t\tlet geo = new THREE.PlaneBufferGeometry( 2, 2 );\n\n\t\tparameter.vertexShader = vert;\n\n\t\tlet uni = UniformsLib.mergeUniforms( parameter.uniforms, {\n\t\t\tdomPos: {\n\t\t\t\tvalue: new THREE.Vector2()\n\t\t\t},\n\t\t\tdomSize: {\n\t\t\t\tvalue: new THREE.Vector2()\n\t\t\t},\n\t\t\twindowSize: {\n\t\t\t\tvalue: new THREE.Vector2()\n\t\t\t},\n\t\t\taspectRatio: {\n\t\t\t\tvalue: 1.0\n\t\t\t}\n\t\t} );\n\n\t\tparameter.uniforms = uni;\n\n\t\tlet mat = new THREE.ShaderMaterial( parameter );\n\n\t\tsuper( geo, mat );\n\n\t\tthis.frustumCulled = false;\n\n\t\tthis._uniforms = uni;\n\n\t\tthis.element = element;\n\n\t\tthis.update();\n\n\t}\n\n\tpublic get uniforms() {\n\n\t\treturn this._uniforms;\n\n\t}\n\n\tpublic update() {\n\n\t\tlet rect = this.element.getBoundingClientRect();\n\n\t\tthis._uniforms.windowSize.value.set( window.innerWidth, window.innerHeight );\n\t\tthis._uniforms.aspectRatio.value = window.innerWidth / window.innerHeight;\n\t\tthis._uniforms.domSize.value.set( rect.width, rect.height );\n\t\tthis._uniforms.domPos.value.set( rect.left, rect.top );\n\n\t}\n\n}\n","export default \"#define GLSLIFY 1\\nvarying vec2 vUv;\\nuniform vec2 domPos;\\nuniform vec2 domSize;\\nuniform vec2 windowSize;\\nuniform float aspectRatio;\\n\\nvoid main(  )\\n{\\n  float width = domSize.x / windowSize.x;\\n\\n  //( 0,0 )\\n  vec3 pos = position + vec3( 1.0,-1.0,0.0 );\\n\\n  //size\\n  pos.x *= width;\\n  pos.y *= ( width * aspectRatio ) * ( domSize.y / domSize.x );\\n\\n  pos += vec3( -1.0, 1.0, 0.0 );\\n\\n  pos += vec3( domPos.x / windowSize.x * 2.0, -domPos.y / windowSize.y * 2.0, 0.0 );\\n\\n  gl_Position = vec4( pos, 1.0 );\\n  vUv = uv;\\n}\\n\";","export declare interface Event {\n\ttype: string;\n\t[key:string]: any;\n}\n\nexport declare interface EventListener {\n\ttype: string,\n\tlistener: ( e: Event ) => void,\n}\n\nexport class EventDispatcher {\n\n\tprivate events: EventListener[] = [];\n\n\tconstructor() {\n\n\t}\n\n\tpublic addEventListener( type: string, listener: ( e: Event ) => void ) {\n\n\t\tthis.events.push( {\n\t\t\ttype: type,\n\t\t\tlistener: listener\n\t\t} );\n\n\t}\n\n\tpublic dispatchEvent( event: Event ) {\n\n\t\tevent.target = this;\n\n\t\tfor ( let i = 0; i < this.events.length; i ++ ) {\n\n\t\t\tif ( event.type == this.events[ i ].type ) {\n\n\t\t\t\tthis.events[ i ].listener( event );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tpublic removeEventListener( type: string, listener: Function ) {\n\n\t\tfor ( let i = this.events.length; i >= 0; i -- ) {\n\n\t\t\tif ( type == this.events[ i ].type && listener == this.events[ i ].listener ) {\n\n\t\t\t\tthis.events.splice( i, 1 );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n}\n","import * as THREE from 'three';\n\nimport vert from './shaders/passThrough.vs';\nimport passThroughFrag from './shaders/passThrough.fs';\nimport { Uniforms, UniformsLib } from '../Uniforms';\n\nexport interface GPUComputationKernel{\n    material: THREE.RawShaderMaterial,\n    uniforms: any,\n}\n\nexport interface GPUcomputationData{\n    buffer: THREE.WebGLRenderTarget\n}\n\nexport class GPUComputationController {\n\n\tprotected renderer: THREE.WebGLRenderer;\n\tpublic dataSize: THREE.Vector2;\n\tprotected uniforms: any;\n\n    protected scene: THREE.Scene;\n    protected camera: THREE.Camera;\n\n    protected mesh: THREE.Mesh;\n    protected materials: THREE.ShaderMaterial[];\n\n    protected tempDataLinear: GPUcomputationData;\n    protected tempDataNear: GPUcomputationData;\n\n\tprivate renderTargets: THREE.WebGLRenderTarget[] = [];\n\n\tpublic get isSupported() : boolean {\n\n    \treturn this.renderer.extensions.get( \"OES_texture_float\" );\n\n\t}\n\n\tconstructor( renderer: THREE.WebGLRenderer, dataSize: THREE.Vector2 ) {\n\n    \tthis.renderer = renderer;\n    \tthis.dataSize = dataSize.clone();\n\n    \tthis.uniforms = {\n    \t\tdataSize: {\n    \t\t\tvalue: this.dataSize\n    \t\t}\n    \t};\n\n    \tthis.tempDataLinear = this.createData( {\n    \t\tminFilter: THREE.LinearFilter,\n    \t\tmagFilter: THREE.LinearFilter\n    \t} );\n\n    \tthis.tempDataNear = this.createData( {\n    \t\tminFilter: THREE.NearestFilter,\n    \t\tmagFilter: THREE.NearestFilter\n    \t} );\n\n    \tthis.scene = new THREE.Scene();\n    \tthis.camera = new THREE.Camera();\n\n    \tthis.materials = [];\n    \tthis.mesh = new THREE.Mesh( new THREE.PlaneBufferGeometry( 2, 2 ) );\n    \tthis.scene.add( this.mesh );\n\n\t}\n\n\tpublic createInitializeTexture() {\n\n    \tlet a = new Float32Array( this.uniforms.dataSize.value.x * this.uniforms.dataSize.value.y * 4 );\n    \tlet texture = new THREE.DataTexture( a, this.uniforms.dataSize.value.x, this.uniforms.dataSize.value.y, THREE.RGBAFormat, THREE.FloatType );\n    \ttexture.needsUpdate = true;\n\n    \treturn texture;\n\n\t}\n\n\tpublic createData(): GPUcomputationData;\n\n\tpublic createData( initializeTexture: THREE.DataTexture ): GPUcomputationData;\n\n\tpublic createData( textureParam: THREE.WebGLRenderTargetOptions ): GPUcomputationData;\n\n\tpublic createData( initializeTexture: THREE.DataTexture, textureParam: THREE.WebGLRenderTargetOptions ): GPUcomputationData;\n\n\tpublic createData( initTex_texParam?: any, textureParam? : THREE.WebGLRenderTargetOptions ): GPUcomputationData {\n\n    \tlet userAgent = navigator.userAgent;\n    \tlet isiOS = userAgent.indexOf( 'iPhone' ) >= 0 || userAgent.indexOf( 'iPad' ) >= 0 || navigator.platform == \"iPad\" || ( navigator.platform == \"MacIntel\" && navigator.userAgent.indexOf( \"Safari\" ) != - 1 && navigator.userAgent.indexOf( \"Chrome\" ) == - 1 && ( navigator as any ).standalone !== undefined );\n\n    \tlet param: THREE.WebGLRenderTargetOptions = {\n    \t\twrapS: THREE.ClampToEdgeWrapping,\n    \t\twrapT: THREE.ClampToEdgeWrapping,\n    \t\tminFilter: THREE.NearestFilter,\n    \t\tmagFilter: THREE.NearestFilter,\n    \t\tformat: THREE.RGBAFormat,\n    \t\ttype: isiOS ? THREE.HalfFloatType : THREE.FloatType,\n    \t\tstencilBuffer: false,\n    \t\tdepthBuffer: false\n    \t};\n    \tlet initTex: THREE.DataTexture;\n    \tlet customParam: THREE.WebGLRenderTargetOptions;\n\n    \tif ( initTex_texParam ) {\n\n    \t\tif ( initTex_texParam.isDataTexture ) {\n\n    \t\t\tinitTex = initTex_texParam;\n\n    \t\t\tif ( textureParam ) {\n\n    \t\t\t\tcustomParam = textureParam;\n\n    \t\t\t}\n\n    \t\t} else {\n\n    \t\t\tcustomParam = initTex_texParam;\n\n    \t\t}\n\n    \t}\n\n    \tif ( customParam ) {\n\n    \t\tparam.wrapS = customParam.wrapS || param.wrapS;\n    \t\tparam.wrapT = customParam.wrapT || param.wrapT;\n    \t\tparam.minFilter = customParam.minFilter || param.minFilter;\n    \t\tparam.magFilter = customParam.magFilter || param.magFilter;\n    \t\tparam.format = customParam.format || param.format;\n    \t\tparam.type = customParam.type || param.type;\n    \t\tparam.stencilBuffer = customParam.stencilBuffer || param.stencilBuffer;\n    \t\tparam.depthBuffer = customParam.depthBuffer || param.depthBuffer;\n\n    \t}\n\n    \tlet buf = new THREE.WebGLRenderTarget( this.uniforms.dataSize.value.x, this.uniforms.dataSize.value.y, param );\n\n\t\tlet data = { buffer: buf };\n\n\t\tthis.renderTargets.push( buf );\n\n    \tif ( initTex ) {\n\n    \t\tlet initKernel = this.createKernel( {\n\t\t\t\tfragmentShader: passThroughFrag\n\t\t\t} );\n\n    \t\tinitKernel.uniforms.tex = { value: initTex };\n\n    \t\tthis.compute( initKernel, data );\n\n    \t}\n\n    \treturn data;\n\n\t}\n\n\tpublic createKernel( param: THREE.ShaderMaterialParameters ): GPUComputationKernel {\n\n    \tlet uni: Uniforms = UniformsLib.mergeUniforms( param.uniforms, {} );\n    \tuni = UniformsLib.mergeUniforms( this.uniforms, uni );\n\n\t\tparam.vertexShader = param.vertexShader || vert;\n\n    \tlet mat = new THREE.ShaderMaterial( param );\n\n    \tthis.materials.push( mat );\n\n    \tlet kernel: GPUComputationKernel = {\n    \t\tmaterial: mat,\n    \t\tuniforms: uni\n    \t};\n\n    \treturn kernel;\n\n\t}\n\n\tpublic compute( kernel: GPUComputationKernel, data: GPUcomputationData, camera?: THREE.Camera ) {\n\n    \tlet temp: GPUcomputationData;\n\n    \tif ( data.buffer.texture.magFilter == THREE.LinearFilter ) {\n\n    \t\ttemp = this.tempDataLinear;\n\n    \t} else {\n\n    \t\ttemp = this.tempDataNear;\n\n    \t}\n\n    \tthis.mesh.material = kernel.material;\n\n    \tlet currentRenderTarget = this.renderer.getRenderTarget();\n\n    \tthis.renderer.setRenderTarget( temp.buffer );\n\n    \tthis.renderer.render( this.scene, camera || this.camera );\n\n    \tthis.swapBuffers( data, temp );\n\n    \tthis.renderer.setRenderTarget( currentRenderTarget );\n\n\t}\n\n\tprotected swapBuffers( b1: GPUcomputationData, b2: GPUcomputationData ) {\n\n    \tlet tmp = b1.buffer;\n    \tb1.buffer = b2.buffer;\n    \tb2.buffer = tmp;\n\n\t}\n\n\tpublic dispose() {\n\n    \tlet geo = this.mesh.geometry;\n    \tgeo.dispose();\n\n    \tfor ( let i = 0; i < this.materials.length; i ++ ) {\n\n    \t\tthis.materials[ i ].dispose();\n\n    \t}\n\n    \tthis.scene.remove( this.mesh );\n\n    \tthis.tempDataLinear.buffer.dispose();\n    \tthis.tempDataNear.buffer.dispose();\n\n\t}\n\n\tpublic resizeData( dataSize: THREE.Vector2 ) {\n\n\t\tthis.dataSize.copy( dataSize );\n\n\t\tfor ( let i = 0; i < this.renderTargets.length; i ++ ) {\n\n\t\t\tlet target = this.renderTargets[ i ];\n\n\t\t\ttarget.setSize( dataSize.x, dataSize.y );\n\n\t\t}\n\n\t}\n\n}\n","export default \"#define GLSLIFY 1\\nuniform sampler2D tex;\\nvarying vec2 vUv;\\n\\nvoid main() {\\n    gl_FragColor = texture2D(tex,vUv);\\n}\";","export default \"#define GLSLIFY 1\\nvarying vec2 vUv;\\n\\nvoid main() {\\n    gl_Position = vec4( position, 1.0 );\\n    vUv = uv;\\n}\";","import * as THREE from 'three';\n\nexport class MouseRotator {\n\n\tpublic target: THREE.Object3D;\n\tpublic scrollVel: THREE.Vector2;\n\n\tconstructor( objs: THREE.Object3D ) {\n\n\t\tthis.target = objs;\n\n\t\tthis.scrollVel = new THREE.Vector2();\n\n\t}\n\n\tupdate() {\n\n\t\tthis.scrollVel.multiplyScalar( 0.96 );\n\n\t\tlet axis = new THREE.Vector3( this.scrollVel.y, this.scrollVel.x, 0.0 ).normalize();\n\n\t\tlet q = new THREE.Quaternion().setFromAxisAngle( axis, this.scrollVel.length() );\n\t\tq.multiply( this.target.quaternion );\n\n\t\tthis.target.quaternion.copy( q );\n\n\t}\n\n\taddVelocity( scrollDelta: THREE.Vector2 ) {\n\n\t\tthis.scrollVel.addVectors( this.scrollVel, scrollDelta.multiplyScalar( 0.001 ) );\n\n\t}\n\n}\n","import * as THREE from 'three';\n\nimport passThrowVert from './shaders/passThrow.vs';\n\ntype InputRenderTarget = { [key:string]: THREE.Texture | THREE.Texture[] };\n\nexport interface PPParam extends THREE.ShaderMaterialParameters{\n\tinputRenderTargets?: string\n}\n\nexport class PostProcessing {\n\n\tprivate renderer: THREE.WebGLRenderer;\n\tprivate scene: THREE.Scene;\n\tprivate camera: THREE.OrthographicCamera;\n\tprivate screen: THREE.Mesh;\n\n\tpublic effect: {\n\t\tmaterial: THREE.ShaderMaterial,\n\t};\n\n\tconstructor( renderer: THREE.WebGLRenderer, material: PPParam ) {\n\n\t\tthis.renderer = renderer;\n\t\tthis.scene = new THREE.Scene();\n\t\tthis.camera = new THREE.OrthographicCamera( - 1.0, 1.0, 1.0, - 1.0 );\n\n\t\tthis.screen = new THREE.Mesh( new THREE.PlaneBufferGeometry( 2, 2 ) );\n\t\tthis.scene.add( this.screen );\n\n\t\tthis.createMaterials( material );\n\n\t}\n\n\tprivate createMaterials( params: PPParam ) {\n\n\t\tlet param = params;\n\n\t\tparam.vertexShader = param.vertexShader || passThrowVert;\n\t\tparam.uniforms = param.uniforms || {};\n\t\tparam.uniforms.resolution = {\n\t\t\tvalue: new THREE.Vector2()\n\t\t};\n\n\t\tthis.effect = {\n\t\t\tmaterial: new THREE.ShaderMaterial( param ),\n\t\t};\n\n\t}\n\n\tpublic render( inputRenderTargets: InputRenderTarget, renderTarget: THREE.WebGLRenderTarget ) {\n\n\t\tlet renderTargetMem = this.renderer.getRenderTarget();\n\n\t\tlet effect = this.effect;\n\t\tlet material = effect.material;\n\t\tlet uniforms = material.uniforms;\n\n\t\tif ( inputRenderTargets ) {\n\n\t\t\tlet keys = Object.keys( inputRenderTargets );\n\n\t\t\tfor ( let j = 0; j < keys.length; j ++ ) {\n\n\t\t\t\tif ( uniforms[ keys[ j ] ] ) {\n\n\t\t\t\t\tuniforms[ keys[ j ] ].value = inputRenderTargets[ keys[ j ] ];\n\n\t\t\t\t} else {\n\n\t\t\t\t\tuniforms[ keys[ j ] ] = { value: inputRenderTargets[ keys[ j ] ] };\n\n\t\t\t\t\teffect.material.needsUpdate = true;\n\n\t\t\t\t\teffect.material.uniforms = uniforms;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( renderTarget ) {\n\n\t\t\tuniforms.resolution.value.set( renderTarget.width, renderTarget.height );\n\n\t\t} else {\n\n\t\t\tthis.renderer.getSize( uniforms.resolution.value );\n\n\t\t}\n\n\t\tthis.screen.material = material;\n\n\t\tthis.renderer.setRenderTarget( renderTarget );\n\n\t\tthis.renderer.render( this.scene, this.camera );\n\n\t\tthis.renderer.setRenderTarget( renderTargetMem );\n\n\t}\n\n}\n","export default \"#define GLSLIFY 1\\nvarying vec2 vUv;\\nvoid main() {\\n    vUv = uv;\\n    gl_Position = vec4( position, 1.0 );\\n}   \";","import * as THREE from 'three';\r\nimport { PageScrollerSection, PageScrollerSectionParams, PageScrollerEventArgs } from './PageScrollerSection';\r\nimport { EasingSet, Easings } from '../Easings';\r\nimport { Animator } from '../Animator';\r\n\r\nexport declare interface PageScrollerAutoMoveParam {\r\n\ttarget: string | number | PageScrollerSection;\r\n\tduration?: number;\r\n\teasing?: EasingSet;\r\n\tcallBack?: Function;\r\n\tbottom?: boolean;\r\n}\r\n\r\nexport class PageScroller {\r\n\r\n\tprotected animator: Animator;\r\n\tprotected isAutoMove: boolean;\r\n\r\n\tprotected parentElement: HTMLElement;\r\n\tprotected parentElementHeight: number;\r\n\r\n\tprotected sections: PageScrollerSection[];\r\n\r\n\tpublic delaySpeed: number = 0.1;\r\n\tpublic dragDelaySpeed: number = 0.4;\r\n\tprotected isTouching: boolean = false;\r\n\tprotected deltaMem: number = 0;\r\n\r\n\tprotected scrollReady: boolean = false;\r\n\tprotected sumDelta: number = 0;\r\n\r\n\tprotected _scrollPos: number = 0;\r\n\tprotected _scrollPosMem: number;\r\n\tprotected _scrollPercentage: number = 0;\r\n\r\n\tprotected _scrollPosDelay: number = 0;\r\n\tprotected _scrollPercentageDelay: number = 0;\r\n\r\n\tprotected caughtSection: PageScrollerSection;\r\n\tprotected dragStop: boolean = false;\r\n\tprotected dragUnlockReady: boolean = true;\r\n\r\n\tconstructor( parentElement: HTMLElement ) {\r\n\r\n\t\tthis.parentElement = parentElement;\r\n\r\n\t\tthis.sections = [];\r\n\r\n\t\tthis.initAnimator();\r\n\r\n\t}\r\n\r\n\tprotected initAnimator() {\r\n\r\n\t\tthis.animator = new Animator();\r\n\r\n\t\tthis.animator.add( {\r\n\t\t\tname: 'scrollPos',\r\n\t\t\tinitValue: 0,\r\n\t\t\teasing: {\r\n\t\t\t\tfunc: Easings.sigmoid,\r\n\t\t\t\targs: 4\r\n\t\t\t}\r\n\t\t} );\r\n\r\n\t}\r\n\r\n\tpublic get scrollPos() {\r\n\r\n\t\treturn this._scrollPos;\r\n\r\n\t}\r\n\r\n\tpublic get scrollPosDelay() {\r\n\r\n\t\treturn this._scrollPosDelay;\r\n\r\n\t}\r\n\r\n\tpublic get scrollPercentage() {\r\n\r\n\t\treturn this._scrollPercentage;\r\n\r\n\t}\r\n\r\n\tpublic get scrollPercentageDelay() {\r\n\r\n\t\treturn this._scrollPercentageDelay;\r\n\r\n\t}\r\n\r\n\tpublic get scrollTimelinePercentage() {\r\n\r\n\t\tlet sum = 0;\r\n\r\n\t\tfor ( let i = 0; i < this.sections.length; i ++ ) {\r\n\r\n\t\t\tlet sec = this.sections[ i ];\r\n\t\t\tlet secBef = this.sections[ i - 1 ];\r\n\r\n\t\t\tlet a = Math.max( 0.0, sec.element.offsetTop - this.scrollPosDelay + ( sec.bottom ? sec.rect.height - window.innerHeight : 0 ) );\r\n\t\t\tlet b = ( ( secBef ? secBef.rect.height - ( secBef.bottom ? window.innerHeight : 0 ) : 0 ) + ( sec.bottom ? sec.rect.height - window.innerHeight : 0 ) ) || 1;\r\n\r\n\t\t\tlet d = 1.0 - ( a / b );\r\n\t\t\td = Math.max( 0.0, d );\r\n\r\n\t\t\tsum += d;\r\n\r\n\t\t\tif ( d < 1.0 ) break;\r\n\r\n\t\t}\r\n\r\n\t\treturn sum / this.sections.length;\r\n\r\n\t}\r\n\r\n\tpublic add( section: PageScrollerSection ) {\r\n\r\n\t\tthis.sections.push( section );\r\n\r\n\t\tthis.sortSections();\r\n\r\n\t}\r\n\r\n\tpublic sortSections() {\r\n\r\n\t\tthis.sections.sort( ( a: PageScrollerSection, b: PageScrollerSection ): number => {\r\n\r\n\t\t\treturn a.rect.y > b.rect.y ? 1 : - 1;\r\n\r\n\t\t} );\r\n\r\n\t\tfor ( let i = 0; i < this.sections.length; i ++ ) {\r\n\r\n\t\t\tthis.sections[ i ].timelinePercentage = ( i + 1 ) / this.sections.length;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tpublic get( name: string ) {\r\n\r\n\t\tfor ( let i = 0; i < this.sections.length; i ++ ) {\r\n\r\n\t\t\tif ( this.sections[ i ].name == name ) return this.sections[ i ];\r\n\r\n\t\t}\r\n\r\n\t\tconsole.warn( 'section \"' + name + '\" is not exist.' );\r\n\r\n\t\treturn null;\r\n\r\n\t}\r\n\r\n\tpublic update( deltaTime: number ) {\r\n\r\n\t\tthis.updateParentElement();\r\n\r\n\t\tthis.updateScrollPos( deltaTime );\r\n\r\n\t\tthis.applyParentElementTransform();\r\n\r\n\t\tthis.sumDelta = 0.0;\r\n\r\n\t}\r\n\r\n\tprotected updateScrollPos( deltaTime: number ) {\r\n\r\n\t\tthis.updateAutoMove( deltaTime );\r\n\r\n\t\tthis.addScrollPos();\r\n\r\n\t\tthis.calcScrollProperties( deltaTime );\r\n\r\n\t}\r\n\r\n\tprotected updateAutoMove( deltaTime ) {\r\n\r\n\t\tthis.animator.update( deltaTime );\r\n\r\n\t\tif ( this.isAutoMove ) {\r\n\r\n\t\t\tthis.sumDelta = this.animator.get<number>( 'scrollPos' ) - this.scrollPos;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tprotected addScrollPos() {\r\n\r\n\t\tif ( this.checkUnlockStopScroll( this.sumDelta ) ) {\r\n\r\n\t\t\tlet stopPos = this.checkThrow( this.sumDelta );\r\n\r\n\t\t\tif ( stopPos !== null ) {\r\n\r\n\t\t\t\tthis._scrollPos = stopPos;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthis._scrollPos += this.sumDelta;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis._scrollPos = Math.max( Math.min( this._scrollPos, this.parentElementHeight - window.innerHeight ), 0 );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tprotected checkUnlockStopScroll( scrollDelta: number ) {\r\n\r\n\t\tlet unlockDir: number = 0;\r\n\t\tlet unlock: boolean = false;\r\n\r\n\t\tif ( this.caughtSection ) {\r\n\r\n\t\t\tlet distance = this.scrollPos - this.scrollPosDelay;\r\n\r\n\t\t\tif ( scrollDelta * distance < 0 || Math.abs( distance ) < 10.0 || this.isAutoMove ) {\r\n\r\n\t\t\t\tif ( scrollDelta < 0 ) {\r\n\r\n\t\t\t\t\tif ( - scrollDelta > ( this.caughtSection.startScrollUp || 0 ) || this.isAutoMove ) {\r\n\r\n\t\t\t\t\t\tunlockDir = - 1;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else if ( scrollDelta > 0 ) {\r\n\r\n\t\t\t\t\tif ( scrollDelta > ( this.caughtSection.startScrollDown || 0 ) || this.isAutoMove ) {\r\n\r\n\t\t\t\t\t\tunlockDir = 1;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( unlockDir != 0 && this.caughtSection.events ) {\r\n\r\n\t\t\t\tif ( this.caughtSection.events.onStartScroll ) {\r\n\r\n\t\t\t\t\tlet args: PageScrollerEventArgs = {\r\n\t\t\t\t\t\tscroller: this,\r\n\t\t\t\t\t\tsection: this.caughtSection,\r\n\t\t\t\t\t\tscrollMode: this.isAutoMove ? 'auto' : 'manual',\r\n\t\t\t\t\t\tscrollDelta: scrollDelta,\r\n\t\t\t\t\t\tscrollPower: Math.abs( scrollDelta ),\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\tlet unlock: boolean | void;\r\n\r\n\t\t\t\t\tlet commonUnlock = this.caughtSection.events.onStartScroll.common && this.caughtSection.events.onStartScroll.common( args );\r\n\t\t\t\t\tif ( unlockDir == - 1 ) unlock = this.caughtSection.events.onStartScroll.up && this.caughtSection.events.onStartScroll.up( args );\r\n\t\t\t\t\tif ( unlockDir == 1 ) unlock = this.caughtSection.events.onStartScroll.down && this.caughtSection.events.onStartScroll.down( args );\r\n\r\n\t\t\t\t\tif ( commonUnlock === false || unlock === false ) {\r\n\r\n\t\t\t\t\t\tunlockDir = 0;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tunlock = unlockDir != 0;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tunlock = true;\r\n\r\n\t\t}\r\n\r\n\t\tif ( unlockDir ) {\r\n\r\n\t\t\tthis.caughtSection = null;\r\n\r\n\t\t}\r\n\r\n\t\treturn unlock;\r\n\r\n\t}\r\n\r\n\tprotected checkThrow( scrollDelta: number ) {\r\n\r\n\t\tfor ( let i = 0; i < this.sections.length; i ++ ) {\r\n\r\n\t\t\tlet sec = this.sections[ i ];\r\n\r\n\t\t\tsec.updateRect( this._scrollPos );\r\n\r\n\t\t\tlet stopPos = this.checkThrowSectionEvents( sec, scrollDelta );\r\n\r\n\t\t\tif ( stopPos !== null ) {\r\n\r\n\t\t\t\tthis.caughtSection = sec;\r\n\r\n\t\t\t\treturn this.isAutoMove ? null : stopPos;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\r\n\t}\r\n\r\n\tprotected checkThrowSectionEvents( section: PageScrollerSection, scrollDelta: number ) {\r\n\r\n\t\tlet percentage = section.getScrollPercentage();\r\n\t\tlet movedPercentage = section.getScrollPercentage( scrollDelta );\r\n\r\n\t\tif ( section.events ) {\r\n\r\n\t\t\tlet args: PageScrollerEventArgs = {\r\n\t\t\t\tscroller: this,\r\n\t\t\t\tsection: section,\r\n\t\t\t\tscrollMode: this.isAutoMove ? 'auto' : 'manual',\r\n\t\t\t\tscrollDelta: scrollDelta,\r\n\t\t\t\tscrollPower: Math.abs( scrollDelta ),\r\n\t\t\t};\r\n\r\n\t\t\tlet arrivalEvents = section.events.onArrivals && section.events.onArrivals.length || 0;\r\n\r\n\t\t\tfor ( let i = 0; i < arrivalEvents; i ++ ) {\r\n\r\n\t\t\t\tlet arrivalEvent = section.events.onArrivals[ i ];\r\n\r\n\t\t\t\tlet isThrow = this.checkThrowLine( percentage, movedPercentage, arrivalEvent.percentage );\r\n\r\n\t\t\t\tif ( isThrow != 0 ) {\r\n\r\n\t\t\t\t\tarrivalEvent.event.common && arrivalEvent.event.common( args );\r\n\r\n\t\t\t\t\tif ( isThrow < 0 ) {\r\n\r\n\t\t\t\t\t\tarrivalEvent.event.up && arrivalEvent.event.up( args );\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tarrivalEvent.event.down && arrivalEvent.event.down( args );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( section.stop ) {\r\n\r\n\t\t\tif ( this.checkThrowLine( percentage, movedPercentage, 1 ) ) {\r\n\r\n\t\t\t\tthis.dragUnlockReady = false;\r\n\r\n\t\t\t\treturn section.element.offsetTop + ( section.bottom ? section.rect.height - window.innerHeight : 0 );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn null;\r\n\r\n\t}\r\n\r\n\tprotected checkThrowLine( a: number, b :number, line: number ) {\r\n\r\n\t\tif ( a < line && line <= b ) {\r\n\r\n\t\t\treturn 1;\r\n\r\n\t\t} else if ( a > line && line >= b ) {\r\n\r\n\t\t\treturn - 1;\r\n\r\n\t\t} else if ( a == line && line == b ) {\r\n\r\n\t\t\treturn 2;\r\n\r\n\t\t} else {\r\n\r\n\t\t\treturn 0;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tprotected calcScrollProperties( deltaTime ) {\r\n\r\n\t\tthis._scrollPosDelay += ( this._scrollPos - this._scrollPosDelay ) * ( this.isTouching && ! this.caughtSection ? this.dragDelaySpeed : this.delaySpeed ) * Math.min( 1.0, deltaTime * 60 );\r\n\r\n\t\tthis._scrollPercentage = this.scrollPosToPerecntage( this.scrollPos );\r\n\r\n\t\tthis._scrollPercentageDelay = this.scrollPosToPerecntage( this.scrollPosDelay );\r\n\r\n\t}\r\n\r\n\tprotected scrollPosToPerecntage( scrollPos: number ) {\r\n\r\n\t\treturn scrollPos / ( this.parentElementHeight - window.innerHeight );\r\n\r\n\t}\r\n\r\n\r\n\tprotected updateParentElement() {\r\n\r\n\t\tthis.parentElementHeight = this.parentElement.getBoundingClientRect().height;\r\n\r\n\t}\r\n\r\n\tprotected applyParentElementTransform() {\r\n\r\n\t\tthis.parentElement.style.transform = 'translate3d( 0,' + - this.scrollPosDelay.toString() + 'px, 0 )';\r\n\r\n\t}\r\n\r\n\tpublic scroll( delta: number ) {\r\n\r\n\t\tthis.deltaMem = ( this.deltaMem + delta ) / 2;\r\n\t\tthis.sumDelta += delta;\r\n\r\n\t}\r\n\r\n\tpublic catch() {\r\n\r\n\t\tif ( this.isAutoMove ) return;\r\n\r\n\t\tthis.isTouching = true;\r\n\t\tthis.deltaMem = 0;\r\n\r\n\t\tif ( ! this.caughtSection ) {\r\n\r\n\t\t\tthis._scrollPos = this._scrollPosDelay;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tpublic drag( delta: number ) {\r\n\r\n\t\tif ( ! this.isTouching ) return;\r\n\r\n\t\tthis.scroll( delta );\r\n\r\n\t}\r\n\r\n\tpublic release( snap: number = 10.0 ) {\r\n\r\n\t\tif ( ! this.isTouching ) return;\r\n\r\n\t\tthis.isTouching = false;\r\n\r\n\t\tif ( ! this.caughtSection ) {\r\n\r\n\t\t\tthis.scroll( this.deltaMem * snap );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tpublic autoMove( param: PageScrollerAutoMoveParam ) {\r\n\r\n\t\tlet targetPos: number;\r\n\r\n\t\tif ( ( param.target as PageScrollerSection ).isPageScrollerSection ) {\r\n\r\n\t\t\tlet target = param.target as PageScrollerSection;\r\n\t\t\tlet bottomOffset = param.bottom ? target.rect.height - window.innerHeight : 0;\r\n\r\n\t\t\ttargetPos = target.element.offsetTop + bottomOffset;\r\n\r\n\t\t} else if ( typeof param.target == 'string' ) {\r\n\r\n\t\t\tlet target = this.get( param.target );\r\n\t\t\tlet bottomOffset = param.bottom ? target.rect.height - window.innerHeight : 0;\r\n\r\n\t\t\ttargetPos = target.element.offsetTop + bottomOffset;\r\n\r\n\t\t} else if ( typeof param.target == 'number' ) {\r\n\r\n\t\t\ttargetPos = param.target;\r\n\r\n\t\t}\r\n\r\n\t\tthis.animator.setValue( 'scrollPos', this._scrollPos );\r\n\t\tthis.animator.animate( 'scrollPos', targetPos, param.duration, () => {\r\n\r\n\t\t\tif ( param.callBack ) param.callBack();\r\n\r\n\t\t\tthis.isAutoMove = false;\r\n\r\n\t\t}, param.easing );\r\n\r\n\t\t//onStartScrollAutoMove\r\n\t\tthis.sumDelta = ( targetPos - this.sumDelta ) / Math.abs( targetPos - this.sumDelta ) * 0.00001;\r\n\r\n\t\tthis.isAutoMove = true;\r\n\r\n\t}\r\n\r\n}\r\n","import * as THREE from 'three';\r\nimport { PageScroller } from '.';\r\n\r\nexport declare interface PageScrollerEventArgs {\r\n\tscroller: PageScroller;\r\n\tsection: PageScrollerSection;\r\n\tscrollMode: string;\r\n\tscrollDelta: number;\r\n\tscrollPower: number;\r\n}\r\n\r\ndeclare interface PageScrollerEvent {\r\n\tcommon?: ( args: PageScrollerEventArgs ) => void | boolean;\r\n\tup?: ( args: PageScrollerEventArgs ) => void | boolean;\r\n\tdown?: ( args: PageScrollerEventArgs ) => void | boolean;\r\n}\r\n\r\ndeclare interface PageScrollerEvents {\r\n\tonStartScroll?: PageScrollerEvent\r\n\tonArrivals?: {\r\n\t\tpercentage: number;\r\n\t\tevent: PageScrollerEvent;\r\n\t}[]\r\n}\r\n\r\nexport declare interface PageScrollerSectionParams {\r\n\tname: string;\r\n\telement: HTMLElement;\r\n\tevents?: PageScrollerEvents;\r\n\tstop?: boolean;\r\n\tstartScrollUp?: number;\r\n\tstartScrollDown?: number;\r\n\tbottom?: boolean;\r\n}\r\n\r\ndeclare interface PageScrollerSectionRect {\r\n\tx: number;\r\n\ty: number;\r\n\twidth: number;\r\n\theight: number;\r\n}\r\n\r\nexport class PageScrollerSection {\r\n\r\n\tpublic name: string;\r\n\tpublic element: HTMLElement;\r\n\tpublic rect: PageScrollerSectionRect;\r\n\tpublic stop: boolean;\r\n\tpublic startScrollUp: number;\r\n\tpublic startScrollDown: number;\r\n\tpublic events: PageScrollerEvents;\r\n\tpublic bottom: boolean;\r\n\tpublic timelinePercentage: number = 0;\r\n\r\n\tconstructor( params: PageScrollerSectionParams ) {\r\n\r\n\t\tthis.name = params.name;\r\n\t\tthis.element = params.element;\r\n\t\tthis.stop = params.stop;\r\n\t\tthis.events = params.events;\r\n\t\tthis.bottom = params.bottom;\r\n\t\tthis.startScrollDown = params.startScrollDown || 0;\r\n\t\tthis.startScrollUp = params.startScrollUp || 0;\r\n\r\n\t\tthis.updateRect( 0 );\r\n\r\n\t}\r\n\r\n\tpublic get isPageScrollerSection() {\r\n\r\n\t\treturn true;\r\n\r\n\t}\r\n\r\n\tpublic updateRect( scrollPos: number ) {\r\n\r\n\t\tthis.rect = {\r\n\t\t\tx: this.element.offsetLeft,\r\n\t\t\ty: this.element.offsetTop - scrollPos,\r\n\t\t\twidth: this.element.offsetWidth,\r\n\t\t\theight: this.element.offsetHeight\r\n\t\t};\r\n\r\n\t}\r\n\r\n\tpublic getScrollPercentage( offsetPos?: number ) {\r\n\r\n\t\tlet bottomOffset = ( this.bottom ? this.rect.height - window.innerHeight : 0 );\r\n\t\tlet pos = ( this.rect.y + bottomOffset ) - ( offsetPos || 0 );\r\n\r\n\t\tlet firstHalfHeight = this.bottom ? this.rect.height : window.innerHeight;\r\n\t\tlet firstHalf = Math.min( 1.0, 1.0 - ( pos / firstHalfHeight ) );\r\n\r\n\t\tlet secondHalfHeight = this.bottom ? window.innerHeight : this.rect.height;\r\n\t\tlet secondHalf = Math.max( 0.0, - pos / secondHalfHeight );\r\n\r\n\t\tlet percentage = firstHalf + secondHalf;\r\n\r\n\t\treturn percentage;\r\n\r\n\t}\r\n\r\n}\r\n","import * as THREE from 'three';\n\nexport declare interface Transform {\n\tposition?: THREE.Vector3;\n\trotation?: THREE.Quaternion;\n\tscale?: number;\n}\n\nexport class LayoutController {\n\n\tprotected obj: THREE.Object3D;\n\tprotected baseTransform: Transform;\n\tprotected baseScale: THREE.Vector3;\n\tprotected transform: Transform;\n\n\tconstructor( object: THREE.Object3D, transform: Transform, isAbsolutePosition?: boolean ) {\n\n\t\tthis.obj = object;\n\n\t\tthis.baseTransform = {\n\t\t\tposition: this.obj.position.clone(),\n\t\t\trotation: this.obj.quaternion.clone(),\n\t\t};\n\t\tthis.baseScale = this.obj.scale.clone();\n\n\t\tthis.transform = transform;\n\n\t\tif ( ! isAbsolutePosition ) {\n\n\t\t\tthis.transform.position && this.transform.position.add( this.obj.position );\n\t\t\tthis.transform.rotation && this.transform.rotation.multiply( this.obj.quaternion );\n\n\t\t}\n\n\t}\n\n\tpublic updateTransform( weight: number ) {\n\n\t\tif ( this.transform.position ) {\n\n\t\t\tthis.obj.position.copy( this.baseTransform.position.clone().lerp( this.transform.position, weight ) );\n\n\t\t}\n\n\t\tif ( this.transform.rotation ) {\n\n\t\t\tthis.obj.quaternion.copy( this.baseTransform.rotation.clone().slerp( this.transform.rotation, weight ) );\n\n\t\t}\n\n\t\tif ( this.transform.scale ) {\n\n\t\t\tthis.obj.scale.copy( this.baseScale.clone().multiplyScalar( this.transform.scale * ( weight ) + 1.0 - weight ) );\n\n\t\t}\n\n\t}\n\n}\n","import * as THREE from 'three';\r\nimport { EasingSet } from './Easings';\r\nimport { Lerps, LerpFunc } from './Lerps';\r\n\r\nexport declare interface TimelineAnimatorKeyFrame<T> {\r\n\ttime: number;\r\n\tvalue: T;\r\n\teasing?: EasingSet;\r\n}\r\n\r\nexport declare interface TimelineAnimatorVariable<T> {\r\n\tkeyframes: TimelineAnimatorKeyFrame<T>[];\r\n\tlerpFunc: LerpFunc<T>;\r\n\tvalue: T;\r\n\teasing?: EasingSet;\r\n}\r\n\r\nexport declare interface TimelineAnimatorAddParams<T> {\r\n\tname: string;\r\n\tkeyframes: TimelineAnimatorKeyFrame<T>[];\r\n\tcustomLerp?: LerpFunc<T>,\r\n\teasing?: EasingSet;\r\n}\r\nexport class TimelineAnimator {\r\n\r\n\tprotected variables: { [name: string]: TimelineAnimatorVariable<any> } = {};\r\n\tprotected time: number;\r\n\tpublic defaultEasing: EasingSet;\r\n\r\n\tconstructor( ) {\r\n\r\n\t\tthis.time = 0;\r\n\r\n\t}\r\n\r\n\tpublic add<T>( params: TimelineAnimatorAddParams<T> ) {\r\n\r\n\t\tif ( params.keyframes.length == 0 ) {\r\n\r\n\t\t\tconsole.warn( '\"' + params.name + '\"', 'Keyframe length is 0!!' );\r\n\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tthis.variables[ params.name ] = {\r\n\t\t\tkeyframes: params.keyframes,\r\n\t\t\tlerpFunc: params.customLerp,\r\n\t\t\teasing: params.easing,\r\n\t\t\tvalue: null\r\n\t\t};\r\n\r\n\t\tthis.variables[ params.name ].keyframes.sort( ( a, b ) => {\r\n\r\n\t\t\treturn ( a.time < b.time ) ? - 1 : 1;\r\n\r\n\t\t} );\r\n\r\n\t\tif ( ! this.variables[ params.name ].lerpFunc ) {\r\n\r\n\t\t\tthis.variables[ params.name ].lerpFunc = Lerps.getLerpFunc( params.keyframes[ 0 ].value );\r\n\r\n\t\t}\r\n\r\n\t\tthis.calc();\r\n\r\n\t\treturn params.name;\r\n\r\n\t}\r\n\r\n\tpublic get<T>( name: string ): T {\r\n\r\n\t\tif ( this.variables[ name ] ) {\r\n\r\n\t\t\treturn this.variables[ name ].value;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconsole.warn( '\"' + name + '\"' + ' is not exist' );\r\n\r\n\t\t\treturn null;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tpublic getVariableObject<T>( name: string ): TimelineAnimatorVariable<T> {\r\n\r\n\t\tif ( this.variables[ name ] ) {\r\n\r\n\t\t\treturn this.variables[ name ];\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconsole.warn( '\"' + name + '\"' + ' is not exist' );\r\n\r\n\t\t\treturn null;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tpublic update( time: number ) {\r\n\r\n\t\tthis.time = time;\r\n\r\n\t\tthis.calc();\r\n\r\n\t}\r\n\r\n\tprotected calc() {\r\n\r\n\t\tlet keys = Object.keys( this.variables );\r\n\r\n\t\tfor ( let i = 0; i < keys.length; i ++ ) {\r\n\r\n\t\t\tlet valiable = this.variables[ keys[ i ] ];\r\n\t\t\tlet kfs = valiable.keyframes;\r\n\r\n\t\t\tlet a: TimelineAnimatorKeyFrame<any>;\r\n\t\t\tlet b: TimelineAnimatorKeyFrame<any>;\r\n\r\n\t\t\tlet t = Math.max( kfs[ 0 ].time, Math.min( kfs[ kfs.length - 1 ].time, this.time ) );\r\n\r\n\t\t\tlet easing: EasingSet;\r\n\r\n\t\t\tif ( kfs.length == 1 ) {\r\n\r\n\t\t\t\tt = kfs[ 0 ].time;\r\n\t\t\t\ta = b = kfs[ 0 ];\r\n\r\n\t\t\t} else {\r\n\r\n\r\n\t\t\t\tfor ( let j = 0; j < kfs.length - 1; j ++ ) {\r\n\r\n\t\t\t\t\ta = kfs[ j ];\r\n\t\t\t\t\tb = kfs[ j + 1 ];\r\n\r\n\t\t\t\t\teasing = a.easing;\r\n\r\n\t\t\t\t\tif ( a.time <= t && t <= b.time ) break;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tt = ( t - a.time ) / ( b.time - a.time );\r\n\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( easing ) {\r\n\r\n\t\t\t\tt = easing.func( t, easing.args );\r\n\r\n\t\t\t} else if ( valiable.easing ) {\r\n\r\n\t\t\t\tt = valiable.easing.func( t, valiable.easing.args );\r\n\r\n\t\t\t} else if ( this.defaultEasing ) {\r\n\r\n\t\t\t\tt = this.defaultEasing.func( t, this.defaultEasing.args );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( valiable.lerpFunc ) {\r\n\r\n\t\t\t\tvaliable.value = valiable.lerpFunc( a.value, b.value, t );\r\n\r\n\t\t\t\tif ( valiable.value === false ) {\r\n\r\n\t\t\t\t\tconsole.log( 'error at ' + '\"' + keys[ i ] + '\"' );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tconsole.warn( '\"' + keys[ i ] + '\"', 'lerp function is not set.' );\r\n\r\n\t\t\t}\r\n\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n","module.exports = __WEBPACK_EXTERNAL_MODULE__807__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tif(__webpack_module_cache__[moduleId]) {\n\t\treturn __webpack_module_cache__[moduleId].exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// module exports must be returned from runtime so entry inlining is disabled\n// startup\n// Load entry module and return exports\nreturn __webpack_require__(250);\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => module['default'] :\n\t\t() => module;\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop)","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};"],"sourceRoot":""}