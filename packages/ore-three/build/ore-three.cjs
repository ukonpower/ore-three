"use strict";var D=Object.defineProperty;var P=(u,c,e)=>c in u?D(u,c,{enumerable:!0,configurable:!0,writable:!0,value:e}):u[c]=e;var d=(u,c,e)=>(P(u,typeof c!="symbol"?c+"":c,e),e);Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const C=require("three");function M(u){const c=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(u){for(const e in u)if(e!=="default"){const t=Object.getOwnPropertyDescriptor(u,e);Object.defineProperty(c,e,t.get?t:{enumerable:!0,get:()=>u[e]})}}return c.default=u,Object.freeze(c)}const p=M(C);class B extends p.EventDispatcher{constructor(e){super();d(this,"info");d(this,"renderer");d(this,"scene");d(this,"camera");d(this,"time",0);d(this,"commonUniforms");d(this,"readyAnimate",!1);this.renderer=new p.WebGLRenderer(e),this.renderer.setPixelRatio(e.pixelRatio||window.devicePixelRatio),this.renderer.debug.checkShaderErrors=!0,this.info={canvas:this.renderer.domElement,aspectSetting:{mainAspect:16/9,wideAspect:10/1,portraitAspect:1/2},size:{windowSize:new p.Vector2,windowAspectRatio:1,canvasSize:new p.Vector2,canvasPixelSize:new p.Vector2,canvasAspectRatio:1,pixelRatio:this.renderer.getPixelRatio(),portraitWeight:0,wideWeight:0},...e},e.wrapperElement&&this.setWrapperElement(e.wrapperElement||null,!1),this.commonUniforms={time:{value:0}},this.scene=new p.Scene,this.camera=new p.PerspectiveCamera(50,1,.1,1e3)}tick(e){this.time+=e,this.commonUniforms.time.value=this.time,this.readyAnimate&&this.animate(e)}animate(e){}onBind(){setTimeout(()=>{this.onResize(),this.readyAnimate=!0},0)}onUnbind(){this.dispatchEvent({type:"dispose"}),this.removeChildrens(this.scene),this.readyAnimate=!1}removeChildrens(e){const t=e.children.length;for(let i=t-1;i>=0;i--){this.removeChildrens(e.children[i]);let s,a;e.children[i].isMesh&&(s=e.children[i].geometry,a=e.children[i].material),e.remove(e.children[i]),s&&s.dispose(),a&&a.dispose()}}setWrapperElement(e,t=!0){this.info.wrapperElement=e,this.info.wrapperElementRect=e?e.getBoundingClientRect():null,t&&this.onResize()}onResize(){if(this.renderer==null)return;const e=new p.Vector2(document.body.clientWidth,window.innerHeight),t=new p.Vector2;this.info.wrapperElement?t.set(this.info.wrapperElement.clientWidth,this.info.wrapperElement.clientHeight):t.copy(e);let i=1-(t.x/t.y-this.info.aspectSetting.portraitAspect)/(this.info.aspectSetting.mainAspect-this.info.aspectSetting.portraitAspect);i=Math.min(1,Math.max(0,i));let s=1-(t.x/t.y-this.info.aspectSetting.wideAspect)/(this.info.aspectSetting.mainAspect-this.info.aspectSetting.wideAspect);s=Math.min(1,Math.max(0,s)),this.info.size.windowSize.copy(e),this.info.size.windowAspectRatio=e.x/e.y,this.info.size.canvasSize.copy(t),this.info.size.canvasPixelSize.copy(t.clone().multiplyScalar(this.renderer.getPixelRatio())),this.info.size.canvasAspectRatio=t.x/t.y,this.info.size.portraitWeight=i,this.info.size.wideWeight=s,this.renderer.setPixelRatio(this.info.size.pixelRatio),this.renderer.setSize(this.info.size.canvasSize.x,this.info.size.canvasSize.y),this.camera.aspect=this.info.size.canvasAspectRatio,this.camera.updateProjectionMatrix(),this.info.wrapperElement&&(this.info.wrapperElementRect=this.info.wrapperElement.getBoundingClientRect())}pointerEvent(e){const t=new p.Vector2;t.copy(e.position);const i=this.info.canvas.getBoundingClientRect();t.sub(new p.Vector2(i.x,i.y));const s=t.clone();s.divide(this.info.size.canvasSize),s.y=1-s.y,s.multiplyScalar(2).subScalar(1);const a={event:e.pointerEvent,position:t.clone(),delta:e.delta.clone(),screenPosition:s.clone(),windowPosition:e.position.clone()};e.pointerEventType=="hover"?this.onHover(a):e.pointerEventType=="start"?this.onTouchStart(a):e.pointerEventType=="move"?this.onTouchMove(a):e.pointerEventType=="end"&&this.onTouchEnd(a)}onTouchStart(e){}onTouchMove(e){}onTouchEnd(e){}onHover(e){}onWheel(e){}onWheelOptimized(e){}}var R=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},O={};(function(u){(function(){var c;c=u!==null?u:this,c.Lethargy=function(){function e(t,i,s,a){this.stability=t!=null?Math.abs(t):8,this.sensitivity=i!=null?1+Math.abs(i):100,this.tolerance=s!=null?1+Math.abs(s):1.1,this.delay=a??150,this.lastUpDeltas=function(){var r,h,n;for(n=[],r=1,h=this.stability*2;1<=h?r<=h:r>=h;1<=h?r++:r--)n.push(null);return n}.call(this),this.lastDownDeltas=function(){var r,h,n;for(n=[],r=1,h=this.stability*2;1<=h?r<=h:r>=h;1<=h?r++:r--)n.push(null);return n}.call(this),this.deltasTimestamp=function(){var r,h,n;for(n=[],r=1,h=this.stability*2;1<=h?r<=h:r>=h;1<=h?r++:r--)n.push(null);return n}.call(this)}return e.prototype.check=function(t){var i;return t=t.originalEvent||t,t.wheelDelta!=null?i=t.wheelDelta:t.deltaY!=null?i=t.deltaY*-40:(t.detail!=null||t.detail===0)&&(i=t.detail*-40),this.deltasTimestamp.push(Date.now()),this.deltasTimestamp.shift(),i>0?(this.lastUpDeltas.push(i),this.lastUpDeltas.shift(),this.isInertia(1)):(this.lastDownDeltas.push(i),this.lastDownDeltas.shift(),this.isInertia(-1))},e.prototype.isInertia=function(t){var i,s,a,r,h,n,o;return i=t===-1?this.lastDownDeltas:this.lastUpDeltas,i[0]===null?t:this.deltasTimestamp[this.stability*2-2]+this.delay>Date.now()&&i[0]===i[this.stability*2-1]?!1:(a=i.slice(0,this.stability),s=i.slice(this.stability,this.stability*2),o=a.reduce(function(f,m){return f+m}),h=s.reduce(function(f,m){return f+m}),n=o/a.length,r=h/s.length,Math.abs(n)<Math.abs(r*this.tolerance)&&this.sensitivity<Math.abs(r)?t:!1)},e.prototype.showLastUpDeltas=function(){return this.lastUpDeltas},e.prototype.showLastDownDeltas=function(){return this.lastDownDeltas},e}()}).call(R)})(O);class I extends p.EventDispatcher{constructor(){super();d(this,"isSP");d(this,"isTouching");d(this,"element",null);d(this,"position");d(this,"delta");d(this,"lethargy");d(this,"memDelta",0);d(this,"riseDelta",!1);d(this,"trackpadMemDelta",0);d(this,"trackpadMax",!1);this.position=new p.Vector2(NaN,NaN),this.delta=new p.Vector2(NaN,NaN);const e=navigator.userAgent;this.isSP=e.indexOf("iPhone")>=0||e.indexOf("iPad")>=0||e.indexOf("Android")>=0||navigator.platform=="iPad"||navigator.platform=="MacIntel"&&navigator.userAgent.indexOf("Safari")!=-1&&navigator.userAgent.indexOf("Chrome")==-1&&navigator.standalone!==void 0,this.position.set(NaN,NaN),this.isTouching=!1;const t=this.onTouch.bind(this,"move"),i=this.onPointer.bind(this,"move"),s=this.onTouch.bind(this,"end"),a=this.onPointer.bind(this,"end");window.addEventListener("touchmove",t,{passive:!1}),window.addEventListener("pointermove",i),window.addEventListener("touchend",s,{passive:!1}),window.addEventListener("pointerup",a),window.addEventListener("dragend",a);const r=()=>{this.element&&this.unregisterElement(this.element),window.removeEventListener("touchmove",t),window.removeEventListener("pointermove",i),window.removeEventListener("touchend",s),window.removeEventListener("pointerup",a),window.removeEventListener("dragend",a),this.removeEventListener("dispose",r)};this.addEventListener("dispose",r),this.lethargy=new O.Lethargy}registerElement(e){this.element&&this.unregisterElement(this.element),this.element=e;const t=this.onTouch.bind(this,"start"),i=this.onPointer.bind(this,"start"),s=this.wheel.bind(this);e.addEventListener("touchstart",t,{passive:!1}),e.addEventListener("pointerdown",i),e.addEventListener("wheel",s,{passive:!1});const a=r=>{e.isEqualNode(r.elm)&&(e.removeEventListener("touchstart",t),e.removeEventListener("pointerdown",i),e.removeEventListener("wheel",s),this.removeEventListener("unregister",a))};this.addEventListener("unregister",a)}unregisterElement(e){this.dispatchEvent({type:"unregister",elm:e})}getScreenPosition(e){if(this.position.x!=this.position.x)return new p.Vector2(NaN,NaN);const t=this.position.clone().divide(e).multiplyScalar(2).subScalar(1);return t.y*=-1,t}getRelativePosition(e,t){const i=e.getClientRects()[0];let s=this.position.x-i.left,a=this.position.y-i.top;return t&&(s/=i.width,a/=i.height),new p.Vector2(s,a)}setPos(e,t){this.position.x!==this.position.x||this.position.y!==this.position.y||this.delta.set(e-this.position.x,t-this.position.y),this.position.set(e,t)}onTouch(e,t){const i=t.touches[0];i?this.touchEventHandler(i.pageX,i.pageY,e,t):e=="end"&&this.touchEventHandler(NaN,NaN,e,t)}onPointer(e,t){const i=t.pointerType;i!=null?i=="mouse"&&(t.button==-1||t.button==0)&&this.touchEventHandler(t.pageX,t.pageY,e,t):this.touchEventHandler(t.pageX,t.pageY,e,t)}touchEventHandler(e,t,i,s){let a=!1;const r=e-window.pageXOffset,h=t-window.pageYOffset;i=="start"?(this.isTouching=!0,this.setPos(r,h),this.delta.set(0,0),a=!0):i=="move"?(this.setPos(r,h),this.isTouching&&(a=!0)):i=="end"&&("targetTouches"in s?s.targetTouches.length==0&&(this.isTouching=!1):this.isTouching=!1,a=!0),a&&this.dispatchEvent({type:"update",pointerEvent:s,pointerEventType:i,position:this.position.clone(),delta:this.delta.clone()})}update(){this.isSP||(this.dispatchEvent({type:"update",pointerEvent:null,pointerEventType:"hover",position:this.position.clone(),delta:this.delta.clone()}),this.delta.set(0,0))}wheelOptimized(e){this.dispatchEvent({type:"wheelOptimized",wheelEvent:e})}wheel(e){if(this.dispatchEvent({type:"wheel",wheelEvent:e}),this.lethargy.check(e)!==!1)this.wheelOptimized(e);else{const t=e.deltaY-this.memDelta;Math.abs(t)>50?(this.memDelta=t,this.wheelOptimized(e),this.riseDelta=!0):t==0?this.riseDelta&&this.wheelOptimized(e):t<0&&(this.riseDelta=!1),this.memDelta=e.deltaY}}dispose(){this.dispatchEvent({type:"dispose"})}}class V extends p.EventDispatcher{constructor(e){super();d(this,"pointer");d(this,"clock");d(this,"layers",[]);d(this,"pointerEventElement");e&&e.silent||console.log("%c- ore-three -","padding: 5px 10px ;background-color: black; color: white;font-size:11px"),this.clock=new p.Clock,this.pointer=new I,this.setPointerEventElement(e&&e.pointerEventElement||document.body);const t=this.pointerEvent.bind(this),i=this.onWheel.bind(this),s=this.onWheelOptimized.bind(this),a=this.onOrientationDevice.bind(this),r=this.onWindowResize.bind(this);this.pointer.addEventListener("update",t),this.pointer.addEventListener("wheel",i),this.pointer.addEventListener("wheelOptimized",s),window.addEventListener("orientationchange",a),window.addEventListener("resize",r),this.addEventListener("dispose",()=>{this.pointer.removeEventListener("update",t),this.pointer.removeEventListener("wheel",i),this.pointer.removeEventListener("wheelOptimized",s),window.removeEventListener("orientationchange",a),window.removeEventListener("resize",r)}),this.tick()}tick(){const e=this.clock.getDelta();this.pointer.update();for(let t=0;t<this.layers.length;t++)this.layers[t].tick(e);requestAnimationFrame(this.tick.bind(this))}onWindowResize(){for(let e=0;e<this.layers.length;e++)this.layers[e].onResize()}onOrientationDevice(){this.onWindowResize()}pointerEvent(e){for(let t=0;t<this.layers.length;t++)this.layers[t].pointerEvent(e)}onWheel(e){for(let t=0;t<this.layers.length;t++)this.layers[t].onWheel(e.wheelEvent)}onWheelOptimized(e){for(let t=0;t<this.layers.length;t++)this.layers[t].onWheelOptimized(e.wheelEvent)}addLayer(e){this.layers.push(e),e.onBind()}getLayer(e){for(let t=0;t<this.layers.length;t++)if(this.layers[t].info.name==e)return this.layers[t];return null}removeLayer(e){for(let t=this.layers.length-1;t>=0;t--){const i=this.layers[t];i.info.name==e&&(i.onUnbind(),this.layers.splice(t,1))}}setPointerEventElement(e){this.pointerEventElement&&this.pointer.unregisterElement(this.pointerEventElement),this.pointer.registerElement(e),this.pointerEventElement=e}dispose(){this.layers.map(t=>t.info.name).forEach(t=>{this.removeLayer(t)}),this.tick=()=>{},this.dispatchEvent({type:"dispose"})}}exports.Bezier=void 0;(u=>{u.NEWTON_ITERATIONS=4,u.NEWTON_MIN_SLOPE=.001,u.SUBDIVISION_PRECISION=1e-7,u.SUBDIVISION_MAX_ITERATIONS=10,u.BEZIER_EASING_CACHE_SIZE=11,u.BEZIER_EASING_SAMPLE_STEP_SIZE=1/u.BEZIER_EASING_CACHE_SIZE;function c(n){return-n.p0+3*n.p1-3*n.p2+n.p3}function e(n){return 3*n.p0-6*n.p1+3*n.p2}function t(n){return-3*n.p0+3*n.p1}function i(n,o){return 3*c(n)*o*o+2*e(n)*o+t(n)}u.calcBezierSlope=i;function s(n,o){return((c(n)*o+e(n))*o+t(n))*o+n.p0}u.calcBezier=s;function a(n,o,f,m){let v=0,g=0;for(let y=0;y<u.SUBDIVISION_MAX_ITERATIONS;y++)g=o+(f-o)/2,v=s(m,g),v>n?f=g:o=g;return g}function r(n,o,f){for(let m=0;m<u.NEWTON_ITERATIONS;m++){const v=i(o,f);if(v==0)return f;const g=s(o,f)-n;f-=g/v}return f}function h(n,o,f){n.p1=Math.max(n.p0,Math.min(n.p3,n.p1)),n.p2=Math.max(n.p0,Math.min(n.p3,n.p2));let m=0;for(let y=1;y<f.length&&(m=y-1,!(o<f[y]));y++);const v=m/(u.BEZIER_EASING_CACHE_SIZE-1),g=i(n,v)/(n.p3-n.p0);return g==0?v:g>.01?r(o,n,v):a(o,v,v+u.BEZIER_EASING_SAMPLE_STEP_SIZE,n)}u.getBezierTfromX=h})(exports.Bezier||(exports.Bezier={}));exports.Easings=void 0;(u=>{function c(l=6){return b=>{var w=Math.exp(-l*(2*b-1)),E=Math.exp(-l);return(1+(1-w)/(1+w)*(1+E)/(1-E))/2}}u.sigmoid=c;function e(l,b,w){const E=Math.max(0,Math.min(1,(w-l)/(b-l)));return E*E*(3-2*E)}u.smoothstep=e;function t(l){return l}u.linear=t;function i(l){return l*l}u.easeInQuad=i;function s(l){return l*(2-l)}u.easeOutQuad=s;function a(l){return l<.5?2*l*l:-1+(4-2*l)*l}u.easeInOutQuad=a;function r(l){return l*l*l}u.easeInCubic=r;function h(l){return--l*l*l+1}u.easeOutCubic=h;function n(l){return l<.5?4*l*l*l:(l-1)*(2*l-2)*(2*l-2)+1}u.easeInOutCubic=n;function o(l){return l*l*l*l}u.easeInQuart=o;function f(l){return 1- --l*l*l*l}u.easeOutQuart=f;function m(l){return l<.5?8*l*l*l*l:1-8*--l*l*l*l}u.easeInOutQuart=m;function v(l){return l*l*l*l*l}u.easeInQuint=v;function g(l){return 1+--l*l*l*l*l}u.easeOutQuint=g;function y(l){return l<.5?16*l*l*l*l*l:1+16*--l*l*l*l*l}u.easeInOutQuint=y;function x(l,b,w,E){for(var A=new Array(exports.Bezier.BEZIER_EASING_CACHE_SIZE),L=0;L<exports.Bezier.BEZIER_EASING_CACHE_SIZE;++L)A[L]=exports.Bezier.calcBezier({p0:l.x,p1:b.x,p2:w.x,p3:E.x},L/(exports.Bezier.BEZIER_EASING_CACHE_SIZE-1));return T=>T<=l.x?l.y:E.x<=T?E.y:exports.Bezier.calcBezier({p0:l.y,p1:b.y,p2:w.y,p3:E.y},exports.Bezier.getBezierTfromX({p0:l.x,p1:b.x,p2:w.x,p3:E.x},T,A))}u.bezier=x;function z(l,b,w,E){return x({x:0,y:0},{x:l,y:b},{x:w,y:E},{x:1,y:1})}u.cubicBezier=z})(exports.Easings||(exports.Easings={}));exports.Lerps=void 0;(u=>{function c(r,h,n){return r+(h-r)*n}u.number=c;function e(r,h,n){if(r.length==h.length){const o=[];for(let f=0;f<r.length;f++)o.push(r[f]+(h[f]-r[f])*n);return o}else return console.log("Different length Arrays!!!"),!1}u.numberArray=e;function t(r,h,n){return r.clone().lerp(h,n)}u.THREEVectors=t;function i(r,h,n){return r.clone().slerp(h,n)}u.THREEQuaternion=i;function s(r,h,n){const o=r.clone(),f=h.clone();return o.x=o.x+(f.x-o.x)*n,o.y=o.y+(f.y-o.y)*n,o.z=o.z+(f.z-o.z)*n,o}u.THREEEuler=s;function a(r){if(typeof r=="number")return u.number;if(r instanceof Array)return u.numberArray;if("isVector2"in r||"isVector3"in r||"isVector4"in r||"isColor"in r)return u.THREEVectors;if("isQuaternion"in r)return u.THREEQuaternion;if("isEuler"in r)return u.THREEEuler}u.getLerpFunc=a})(exports.Lerps||(exports.Lerps={}));class _ extends p.EventDispatcher{constructor(){super();d(this,"dataBase");d(this,"variables");d(this,"dispatchEvents",[]);d(this,"_isAnimating",!1);this.variables={},this.dataBase={}}add(e){const t={time:0,duration:0,value:this.getValueClone(e.initValue),startValue:this.getValueClone(e.initValue),goalValue:this.getValueClone(e.initValue),easing:e.easing||exports.Easings.sigmoid(),lerpFunc:e.customLerpFunc||exports.Lerps.getLerpFunc(e.initValue),userData:e.userData,isAnimating:!1,isAnimatingReseve:!1};return this.dataBase[e.name]=t.value,this.variables[e.name]=t,this.dispatchEvent({type:"added",varName:e.name,variable:t}),t}setEasing(e,t){const i=this.variables[e];i?i.easing=t:console.warn('"'+e+'" is not exist')}setValue(e,t){let i=this.dataBase[e];if(i!==void 0)typeof i=="number"?this.dataBase[e]=t:"copy"in i?i.copy(t):i instanceof Array&&(i=t.concat()),this.updateDataBase(e),this.cancelAnimate(e);else return console.warn('"'+e+'" is not exist'),null}animate(e,t,i=1,s){const a=this.variables[e];a?(this.cancelAnimate(e),this.animateVariableInit(a,t,i,null,()=>{a.onAnimationFinished=null,s&&s()}),this._isAnimating=!0):console.error('"'+e+'" is not exist')}animateAsync(e,t,i=1,s){return new Promise((a,r)=>{const h=this.variables[e];h?(this.cancelAnimate(e),this.animateVariableInit(h,t,i,()=>{h.onAnimationFinished=null,r("animation canceled")},()=>{h.onAnimationFinished=null,s&&s(),a(null)}),this._isAnimating=!0):r('"'+e+'" is not exist')})}animateVariableInit(e,t,i,s,a){e.time=0,e.isAnimating=!0,e.isAnimatingReseve=!0,e.duration=i,e.startValue=this.getValueClone(e.value),e.goalValue=this.getValueClone(t),e.onAnimationCanceled=s,e.onAnimationFinished=a}cancelAnimate(e){const t=this.variables[e];t?(t.time=-1,t.onAnimationFinished=null,t.onAnimationCanceled&&t.onAnimationCanceled()):console.warn('"'+e+'" is not exist')}get(e){return this.variables[e]?this.variables[e].value:(console.warn('"'+e+'" is not exist'),null)}getVariableObject(e,t=!1){return this.variables[e]?this.variables[e]:(t||console.warn('"'+e+'" is not exist'),null)}applyToUniforms(e){const t=Object.keys(this.variables);for(let i=0;i<t.length;i++){const s=this.getVariableObject(t[i]);s&&(e[t[i]]=s)}}isAnimating(e){return e!==void 0?this.variables[e]?this.variables[e].isAnimating:!1:this._isAnimating}getValueClone(e){return typeof e=="number"?e:e instanceof Array?e.concat():"clone"in e?e.clone():e}wait(e){return new Promise(i=>{setTimeout(()=>{i()},e*1e3)})}update(e){this._isAnimating=!1;const t=Object.keys(this.variables);for(let i=0;i<t.length;i++){const s=t[i],a=this.variables[s];if(a.isAnimating&&a.isAnimatingReseve){this._isAnimating=!0;let r=!1;const h=a.duration,n=a.easing,o=a.lerpFunc;h==0?a.time=1:a.time+=(e||.016)/h,a.time>=1&&(r=!0,a.time=1);let f=a.goalValue;o&&(f=o(a.startValue,a.goalValue,n(a.time)));const m=this.dataBase[s];typeof m=="number"||!("copy"in m)?this.dataBase[s]=f:"copy"in m&&m.copy(f),this.dispatchEvent({type:"update/"+t[i],deltaTime:e,value:a.value}),r&&(a.onAnimationFinished&&this.dispatchEvents.push(a.onAnimationFinished),a.isAnimatingReseve=!1)}else a.isAnimating=!1,a.time=0}for(;this.dispatchEvents.length!=0;){const i=this.dispatchEvents.pop();i&&i()}this.updateDataBase(),this.dispatchEvent({type:"update",deltaTime:e}),this._isAnimating&&this.dispatchEvent({type:"animate",deltaTime:e})}updateDataBase(e){if(e){const i=this.variables[e],s=this.dataBase[e];i&&s!==void 0&&(typeof i.value=="number"||!("copy"in i.value))&&(i.value=s);return}const t=Object.keys(this.dataBase);for(let i=0;i<t.length;i++){const s=this.variables[t[i]],a=this.dataBase[t[i]];s&&a!==void 0&&(typeof s.value=="number"||!("copy"in s.value))&&(s.value=a)}}}var S={},N={get exports(){return S},set exports(u){S=u}};/*!
 * EventEmitter v5.2.9 - git.io/ee
 * Unlicense - http://unlicense.org/
 * Oliver Caldwell - https://oli.me.uk/
 * @preserve
 */(function(u){(function(c){function e(){}var t=e.prototype,i=c.EventEmitter;function s(h,n){for(var o=h.length;o--;)if(h[o].listener===n)return o;return-1}function a(h){return function(){return this[h].apply(this,arguments)}}t.getListeners=function(n){var o=this._getEvents(),f,m;if(n instanceof RegExp){f={};for(m in o)o.hasOwnProperty(m)&&n.test(m)&&(f[m]=o[m])}else f=o[n]||(o[n]=[]);return f},t.flattenListeners=function(n){var o=[],f;for(f=0;f<n.length;f+=1)o.push(n[f].listener);return o},t.getListenersAsObject=function(n){var o=this.getListeners(n),f;return o instanceof Array&&(f={},f[n]=o),f||o};function r(h){return typeof h=="function"||h instanceof RegExp?!0:h&&typeof h=="object"?r(h.listener):!1}t.addListener=function(n,o){if(!r(o))throw new TypeError("listener must be a function");var f=this.getListenersAsObject(n),m=typeof o=="object",v;for(v in f)f.hasOwnProperty(v)&&s(f[v],o)===-1&&f[v].push(m?o:{listener:o,once:!1});return this},t.on=a("addListener"),t.addOnceListener=function(n,o){return this.addListener(n,{listener:o,once:!0})},t.once=a("addOnceListener"),t.defineEvent=function(n){return this.getListeners(n),this},t.defineEvents=function(n){for(var o=0;o<n.length;o+=1)this.defineEvent(n[o]);return this},t.removeListener=function(n,o){var f=this.getListenersAsObject(n),m,v;for(v in f)f.hasOwnProperty(v)&&(m=s(f[v],o),m!==-1&&f[v].splice(m,1));return this},t.off=a("removeListener"),t.addListeners=function(n,o){return this.manipulateListeners(!1,n,o)},t.removeListeners=function(n,o){return this.manipulateListeners(!0,n,o)},t.manipulateListeners=function(n,o,f){var m,v,g=n?this.removeListener:this.addListener,y=n?this.removeListeners:this.addListeners;if(typeof o=="object"&&!(o instanceof RegExp))for(m in o)o.hasOwnProperty(m)&&(v=o[m])&&(typeof v=="function"?g.call(this,m,v):y.call(this,m,v));else for(m=f.length;m--;)g.call(this,o,f[m]);return this},t.removeEvent=function(n){var o=typeof n,f=this._getEvents(),m;if(o==="string")delete f[n];else if(n instanceof RegExp)for(m in f)f.hasOwnProperty(m)&&n.test(m)&&delete f[m];else delete this._events;return this},t.removeAllListeners=a("removeEvent"),t.emitEvent=function(n,o){var f=this.getListenersAsObject(n),m,v,g,y,x;for(y in f)if(f.hasOwnProperty(y))for(m=f[y].slice(0),g=0;g<m.length;g++)v=m[g],v.once===!0&&this.removeListener(n,v.listener),x=v.listener.apply(this,o||[]),x===this._getOnceReturnValue()&&this.removeListener(n,v.listener);return this},t.trigger=a("emitEvent"),t.emit=function(n){var o=Array.prototype.slice.call(arguments,1);return this.emitEvent(n,o)},t.setOnceReturnValue=function(n){return this._onceReturnValue=n,this},t._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0},t._getEvents=function(){return this._events||(this._events={})},e.noConflict=function(){return c.EventEmitter=i,e},u.exports?u.exports=e:c.EventEmitter=e})(typeof window<"u"?window:R||{})})(N);class F extends S{constructor(e){super();d(this,"keyframes",[]);d(this,"cache",{frame:NaN,value:NaN});d(this,"frameStart");d(this,"frameEnd");d(this,"frameDuration");this.frameStart=0,this.frameEnd=0,this.frameDuration=0,this.set(e)}set(e){e&&(this.keyframes.length=0,e.forEach(t=>{this.addKeyFrame(t)}))}addKeyFrame(e){let t=0;for(let i=0;i<this.keyframes.length&&this.keyframes[i].coordinate.x<e.coordinate.x;i++)t++;this.keyframes.splice(t,0,e),this.frameStart=this.keyframes[0].coordinate.x,this.frameEnd=this.keyframes[this.keyframes.length-1].coordinate.x}getValue(e){if(e==this.cache.frame)return this.cache.value;let t=null;for(let i=0;i<this.keyframes.length;i++){const s=this.keyframes[i];if(e<=s.coordinate.x){const a=this.keyframes[i-1];a?t=a.to(s,e):t=s.coordinate.y;break}}return t===null&&this.keyframes.length>0&&(t=this.keyframes[this.keyframes.length-1].coordinate.y),t!==null?(this.cache={frame:e,value:t},t):0}}class k extends S{constructor(e,t,i,s){super();d(this,"coordinate",{x:0,y:0});d(this,"handleLeft",{x:0,y:0});d(this,"handleRight",{x:0,y:0});d(this,"interpolation","BEZIER");d(this,"easing",null);d(this,"nextFrame",null);this.set(e,t,i,s)}set(e,t,i,s){this.coordinate=e,this.handleLeft=t||e,this.handleRight=i||e,this.interpolation=s||"BEZIER"}getEasing(e,t){return e=="BEZIER"?exports.Easings.bezier(this.coordinate,this.handleRight,t.handleLeft,t.coordinate):i=>{const s=t.coordinate.y-this.coordinate.y;return i=(i-this.coordinate.x)/(t.coordinate.x-this.coordinate.x),this.coordinate.y+i*s}}to(e,t){return(this.nextFrame==null||this.nextFrame.coordinate.x!=e.coordinate.x||this.nextFrame.coordinate.y!=e.coordinate.y)&&(this.easing=this.getEasing(this.interpolation,e),this.nextFrame=e),this.easing?this.easing(t):0}}const U=`#define GLSLIFY 1
varying vec2 vUv;void main(){gl_Position=vec4(position,1.0);vUv=uv;}`,W=`#define GLSLIFY 1
uniform sampler2D tex;varying vec2 vUv;void main(){gl_FragColor=texture2D(tex,vUv);}`;exports.UniformsLib=void 0;(u=>{function c(...e){const t={};for(let i=0;i<e.length;i++)e[i]!=null&&Object.assign(t,e[i]);return t}u.mergeUniforms=c})(exports.UniformsLib||(exports.UniformsLib={}));class j{constructor(c,e){d(this,"renderer");d(this,"dataSize");d(this,"uniforms");d(this,"scene");d(this,"camera");d(this,"mesh");d(this,"materials");d(this,"tempDataLinear");d(this,"tempDataNear");d(this,"renderTargets",[]);this.renderer=c,this.dataSize=e.clone(),this.uniforms={dataSize:{value:this.dataSize}},this.tempDataLinear=this.createData({minFilter:p.LinearFilter,magFilter:p.LinearFilter}),this.tempDataNear=this.createData({minFilter:p.NearestFilter,magFilter:p.NearestFilter}),this.scene=new p.Scene,this.camera=new p.Camera,this.materials=[],this.mesh=new p.Mesh(new p.PlaneGeometry(2,2)),this.scene.add(this.mesh)}get isSupported(){return this.renderer.extensions.get("OES_texture_float")}createInitializeTexture(){const c=new Float32Array(this.uniforms.dataSize.value.x*this.uniforms.dataSize.value.y*4),e=new p.DataTexture(c,this.uniforms.dataSize.value.x,this.uniforms.dataSize.value.y,p.RGBAFormat,p.FloatType);return e.needsUpdate=!0,e}createData(c,e){const t=navigator.userAgent,i=t.indexOf("iPhone")>=0||t.indexOf("iPad")>=0||navigator.platform=="iPad"||navigator.platform=="MacIntel"&&navigator.userAgent.indexOf("Safari")!=-1&&navigator.userAgent.indexOf("Chrome")==-1&&navigator.standalone!==void 0,s={wrapS:p.ClampToEdgeWrapping,wrapT:p.ClampToEdgeWrapping,minFilter:p.NearestFilter,magFilter:p.NearestFilter,format:p.RGBAFormat,type:i?p.HalfFloatType:p.FloatType,stencilBuffer:!1,depthBuffer:!1};let a=null,r=null;c&&(c.isDataTexture?(a=c,e&&(r=e)):r=c),r&&(s.wrapS=r.wrapS||s.wrapS,s.wrapT=r.wrapT||s.wrapT,s.minFilter=r.minFilter||s.minFilter,s.magFilter=r.magFilter||s.magFilter,s.format=r.format||s.format,s.type=r.type||s.type,s.stencilBuffer=r.stencilBuffer||s.stencilBuffer,s.depthBuffer=r.depthBuffer||s.depthBuffer);const h=new p.WebGLRenderTarget(this.uniforms.dataSize.value.x,this.uniforms.dataSize.value.y,s),n={buffer:h};if(this.renderTargets.push(h),a){const o=this.createKernel({fragmentShader:W,uniforms:{tex:{value:a}}});this.compute(o,n)}return n}createKernel(c){const e=exports.UniformsLib.mergeUniforms(c.uniforms,this.uniforms);c.uniforms=e,c.vertexShader=c.vertexShader||U;const t=new p.ShaderMaterial(c);return this.materials.push(t),{material:t,uniforms:c.uniforms}}compute(c,e,t){let i;e.buffer.texture.magFilter==p.LinearFilter?i=this.tempDataLinear:i=this.tempDataNear,this.mesh.material=c.material;const s=this.renderer.getRenderTarget();this.renderer.setRenderTarget(i.buffer),this.renderer.render(this.scene,t||this.camera),this.swapBuffers(e,i),this.renderer.setRenderTarget(s)}swapBuffers(c,e){const t=c.buffer;c.buffer=e.buffer,e.buffer=t}dispose(){this.mesh.geometry.dispose();for(let e=0;e<this.materials.length;e++)this.materials[e].dispose();this.scene.remove(this.mesh),this.tempDataLinear.buffer.dispose(),this.tempDataNear.buffer.dispose()}resizeData(c){this.dataSize.copy(c);for(let e=0;e<this.renderTargets.length;e++)this.renderTargets[e].setSize(c.x,c.y)}}class H{constructor(c){d(this,"renderer");d(this,"passes");d(this,"scene");d(this,"quad");d(this,"camera");d(this,"projectionMatrix");d(this,"projectionMatrixInverse");d(this,"cameraMatrix");d(this,"viewMatrix");this.renderer=c.renderer,this.passes=c.passes,this.scene=new p.Scene,this.quad=new p.Mesh(new p.PlaneGeometry(2,2)),this.scene.add(this.quad),this.camera=new p.Camera,this.projectionMatrix=new p.Matrix4,this.projectionMatrixInverse=new p.Matrix4,this.cameraMatrix=new p.Matrix4,this.viewMatrix=new p.Matrix4}render(c,e){const t=this.renderer.getRenderTarget(),i=this.renderer.autoClear;this.renderer.autoClear=!1,e&&e.camera&&(this.projectionMatrix.copy(e.camera.projectionMatrix),this.projectionMatrixInverse.copy(this.projectionMatrix).invert(),this.cameraMatrix.copy(e.camera.matrixWorld),this.viewMatrix.copy(e.camera.matrixWorld).invert());let s=c||null;for(let a=0;a<this.passes.length;a++){const r=this.passes[a];this.quad.material=r,r.uniforms.uBackBuffer={value:s},e&&e.camera&&(r.uniforms.pProjectionMatrix={value:this.projectionMatrix},r.uniforms.pProjectionMatrixInverse={value:this.projectionMatrixInverse},r.uniforms.pCameraMatrix={value:this.cameraMatrix},r.uniforms.pViewMatrix={value:this.viewMatrix}),this.renderer.setRenderTarget(r.renderTarget),this.renderer.render(this.scene,this.camera),!r.passThrough&&r.renderTarget&&(s=r.renderTarget.texture)}this.renderer.setRenderTarget(t),this.renderer.autoClear=i}resize(c){for(let e=0;e<this.passes.length;e++)this.passes[e].resize(c)}}const G=`#define GLSLIFY 1
out vec2 vUv;void main(void){vec3 pos=position;gl_Position=vec4(pos.xy,0.0,1.0);vUv=uv;}`,Q=`#define GLSLIFY 1
uniform sampler2D uBackBuffer;varying vec2 vUv;void main(void){vec4 col=texture2D(uBackBuffer,vUv);gl_FragColor=col;}`;class Z extends p.ShaderMaterial{constructor(e){e=e||{};const{renderTarget:t,resolutionRatio:i,passThrough:s,...a}=e,r=exports.UniformsLib.mergeUniforms(a.uniforms,{uResolution:{value:new p.Vector2},uResolutionInv:{value:new p.Vector2}});super({...a,vertexShader:e.vertexShader??G,fragmentShader:e.fragmentShader??Q,uniforms:r});d(this,"renderTarget");d(this,"clearColor");d(this,"clearDepth");d(this,"passThrough");d(this,"resolution");d(this,"resolutionInv");d(this,"resolutionRatio");t===void 0?this.renderTarget=new p.WebGLRenderTarget(1,1):this.renderTarget=t,this.clearColor=e.clearColor??null,this.clearDepth=e.clearDepth??null,this.passThrough=s||!1,this.resolution=r.uResolution.value,this.resolutionInv=r.uResolutionInv.value,this.resolutionRatio=i||1}resize(e){this.resolution.copy(e).multiplyScalar(this.resolutionRatio).floor(),this.resolutionInv.set(1,1).divide(this.resolution),this.renderTarget&&this.renderTarget.setSize(this.resolution.x,this.resolution.y)}setRendertarget(e){this.renderTarget=e,this.renderTarget&&(this.renderTarget.width!=this.resolution.x||this.renderTarget.height!=this.resolution.y)&&this.resize(this.resolution)}}class Y{constructor(c,e,t){d(this,"obj");d(this,"baseTransform");d(this,"transform");this.obj=c,this.baseTransform={position:this.obj.position.clone(),rotation:this.obj.quaternion.clone(),scale:this.obj.scale.clone()},this.transform=e,t||(this.transform.position&&this.transform.position.add(this.obj.position),this.transform.rotation&&this.transform.rotation.multiply(this.obj.quaternion))}updateTransform(c){this.transform.position&&this.obj.position.copy(this.baseTransform.position.clone().lerp(this.transform.position,c)),this.transform.rotation&&this.obj.quaternion.copy(this.baseTransform.rotation.clone().slerp(this.transform.rotation,c)),this.transform.scale&&this.obj.scale.copy(this.baseTransform.scale.clone().multiplyScalar(this.transform.scale*c+1-c))}}class q extends p.EventDispatcher{constructor(){super()}goHome(){this.dispatchEvent({type:"gohome"})}wait(c){return new Promise((e,t)=>{const i=()=>{t(),this.removeEventListener("gohome",i)};this.addEventListener("gohome",i),setTimeout(()=>{this.removeEventListener("gohome",i),e()},c*1e3)})}}exports.Animator=_;exports.BaseLayer=B;exports.Controller=V;exports.FCurve=F;exports.FCurveKeyFrame=k;exports.GPUComputationController=j;exports.LayoutController=Y;exports.Pointer=I;exports.PostProcess=H;exports.PostProcessPass=Z;exports.WaitMan=q;
//# sourceMappingURL=ore-three.cjs.map
